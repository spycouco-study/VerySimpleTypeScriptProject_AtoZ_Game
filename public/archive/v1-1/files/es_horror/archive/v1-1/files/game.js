let canvas;
let ctx;
let gameData;
const assets = {
  images: /* @__PURE__ */ new Map(),
  sounds: /* @__PURE__ */ new Map()
};
let currentGameState = "LOADING";
let lastTime = 0;
let deltaTime = 0;
let player;
let obstacles = [];
let score = 0;
let obstacleSpawnTimer = 0;
const input = {
  left: false,
  right: false,
  space: false
};
let backgroundMusic = null;
let gameOverEffect = null;
async function loadGame() {
  canvas = document.getElementById("gameCanvas");
  if (!canvas) {
    console.error("Canvas element with ID 'gameCanvas' not found.");
    return;
  }
  ctx = canvas.getContext("2d");
  if (!ctx) {
    console.error("Failed to get 2D rendering context.");
    return;
  }
  try {
    const response = await fetch("data.json");
    gameData = await response.json();
    canvas.width = gameData.gameSettings.canvasWidth;
    canvas.height = gameData.gameSettings.canvasHeight;
    await loadAssets();
    initGame();
    requestAnimationFrame(gameLoop);
  } catch (error) {
    console.error("Failed to load game data or assets:", error);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "red";
    ctx.font = "20px Arial";
    ctx.textAlign = "center";
    ctx.fillText("Failed to load game. Check console for details.", canvas.width / 2, canvas.height / 2);
  }
}
async function loadAssets() {
  currentGameState = "LOADING";
  drawText("Loading assets...", canvas.width / 2, canvas.height / 2, "24px Arial", "#ffffff");
  const imagePromises = gameData.assets.images.map((img) => {
    return new Promise((resolve, reject) => {
      const image = new Image();
      image.src = img.path;
      image.onload = () => {
        assets.images.set(img.name, image);
        resolve();
      };
      image.onerror = () => {
        console.warn(`Failed to load image: ${img.path}`);
        assets.images.set(img.name, new Image());
        resolve();
      };
    });
  });
  const soundPromises = gameData.assets.sounds.map((snd) => {
    return new Promise((resolve, reject) => {
      const audio = new Audio(snd.path);
      audio.volume = snd.volume;
      audio.oncanplaythrough = () => {
        assets.sounds.set(snd.name, audio);
        resolve();
      };
      audio.onerror = () => {
        console.warn(`Failed to load sound: ${snd.path}`);
        assets.sounds.set(snd.name, new Audio());
        resolve();
      };
      setTimeout(() => {
        if (!assets.sounds.has(snd.name)) {
          assets.sounds.set(snd.name, audio);
          resolve();
        }
      }, 1e3);
    });
  });
  try {
    await Promise.all([...imagePromises, ...soundPromises]);
    console.log("All assets loaded.");
  } catch (error) {
    console.error("Error loading assets (some may have failed but allowed progression):", error);
  }
}
function initGame() {
  window.addEventListener("keydown", handleKeyDown);
  window.addEventListener("keyup", handleKeyUp);
  backgroundMusic = assets.sounds.get(gameData.gameSettings.bgmSoundName) || null;
  if (backgroundMusic) {
    backgroundMusic.loop = true;
    backgroundMusic.volume = gameData.assets.sounds.find((s) => s.name === gameData.gameSettings.bgmSoundName)?.volume || 0.3;
  }
  gameOverEffect = assets.sounds.get(gameData.gameSettings.gameOverSoundName) || null;
  if (gameOverEffect) {
    gameOverEffect.volume = gameData.assets.sounds.find((s) => s.name === gameData.gameSettings.gameOverSoundName)?.volume || 0.7;
  }
  currentGameState = "TITLE";
}
function newGame() {
  player = {
    x: canvas.width / 2 - gameData.gameSettings.playerWidth / 2,
    y: canvas.height - gameData.gameSettings.playerHeight - 20,
    width: gameData.gameSettings.playerWidth,
    height: gameData.gameSettings.playerHeight,
    dx: 0
    // Player starts stationary
  };
  obstacles = [];
  score = 0;
  obstacleSpawnTimer = 0;
  currentGameState = "PLAYING";
  input.space = false;
  if (backgroundMusic) {
    backgroundMusic.currentTime = 0;
    backgroundMusic.play().catch((e) => console.warn("Background music autoplay prevented:", e));
  }
}
function gameLoop(currentTime) {
  if (lastTime === 0) lastTime = currentTime;
  deltaTime = (currentTime - lastTime) / 1e3;
  lastTime = currentTime;
  update(deltaTime);
  draw();
  requestAnimationFrame(gameLoop);
}
function update(dt) {
  switch (currentGameState) {
    case "LOADING":
      break;
    case "TITLE":
      if (input.space) {
        newGame();
      }
      break;
    case "PLAYING":
      player.x += player.dx * gameData.gameSettings.playerSpeed * dt;
      player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
      obstacleSpawnTimer += dt * 1e3;
      if (obstacleSpawnTimer >= gameData.gameSettings.obstacleSpawnInterval) {
        const obstacleWidth = Math.random() * (gameData.gameSettings.obstacleMaxSize - gameData.gameSettings.obstacleMinSize) + gameData.gameSettings.obstacleMinSize;
        const obstacleHeight = obstacleWidth;
        const obstacleX = Math.random() * (canvas.width - obstacleWidth);
        const obstacleSpeed = Math.random() * (gameData.gameSettings.obstacleMaxSpeed - gameData.gameSettings.obstacleMinSpeed) + gameData.gameSettings.obstacleMinSpeed;
        obstacles.push({
          x: obstacleX,
          y: -obstacleHeight,
          // Start obstacle just above the canvas
          width: obstacleWidth,
          height: obstacleHeight,
          speed: obstacleSpeed
        });
        obstacleSpawnTimer = 0;
      }
      for (let i = 0; i < obstacles.length; i++) {
        const obs = obstacles[i];
        obs.y += obs.speed * dt;
        if (player.x < obs.x + obs.width && player.x + player.width > obs.x && player.y < obs.y + obs.height && player.y + player.height > obs.y) {
          currentGameState = "GAME_OVER";
          if (gameOverEffect) {
            gameOverEffect.currentTime = 0;
            gameOverEffect.play().catch((e) => console.warn("Game over sound play prevented:", e));
          }
          if (backgroundMusic) {
            backgroundMusic.pause();
            backgroundMusic.currentTime = 0;
          }
          break;
        }
      }
      for (let i = obstacles.length - 1; i >= 0; i--) {
        if (obstacles[i].y > canvas.height) {
          obstacles.splice(i, 1);
          score += gameData.gameSettings.scoreIncrement;
        }
      }
      break;
    case "GAME_OVER":
      if (input.space) {
        newGame();
      }
      break;
  }
}
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  switch (currentGameState) {
    case "LOADING":
      drawText("Loading assets...", canvas.width / 2, canvas.height / 2, "24px Arial", "#ffffff");
      break;
    case "TITLE":
      drawText(gameData.gameSettings.titleScreenText, canvas.width / 2, canvas.height / 2 - 50, gameData.gameSettings.titleScreenFont, gameData.gameSettings.titleScreenTextColor);
      drawText(gameData.gameSettings.pressSpaceText, canvas.width / 2, canvas.height / 2 + 20, gameData.gameSettings.scoreFont, gameData.gameSettings.titleScreenTextColor);
      break;
    case "PLAYING":
      drawAsset(gameData.gameSettings.playerImageName, player.x, player.y, player.width, player.height);
      for (const obs of obstacles) {
        drawAsset(gameData.gameSettings.obstacleImageName, obs.x, obs.y, obs.width, obs.height);
      }
      ctx.font = gameData.gameSettings.scoreFont;
      ctx.fillStyle = gameData.gameSettings.scoreTextColor;
      ctx.textAlign = "left";
      ctx.fillText(`Score: ${score}`, 10, 30);
      break;
    case "GAME_OVER":
      drawText(gameData.gameSettings.gameOverScreenText, canvas.width / 2, canvas.height / 2 - 50, gameData.gameSettings.gameOverFont, gameData.gameSettings.gameOverTextColor);
      drawText(`Final Score: ${score}`, canvas.width / 2, canvas.height / 2, gameData.gameSettings.scoreFont, gameData.gameSettings.gameOverTextColor);
      drawText(gameData.gameSettings.pressSpaceText, canvas.width / 2, canvas.height / 2 + 50, gameData.gameSettings.scoreFont, gameData.gameSettings.gameOverTextColor);
      break;
  }
}
function drawText(text, x, y, font, color) {
  ctx.font = font;
  ctx.fillStyle = color;
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText(text, x, y);
}
function drawAsset(name, x, y, width, height) {
  const image = assets.images.get(name);
  if (image && image.complete && image.naturalWidth > 0) {
    ctx.drawImage(image, x, y, width, height);
  } else {
    ctx.fillStyle = name === gameData.gameSettings.playerImageName ? "blue" : "red";
    ctx.fillRect(x, y, width, height);
  }
}
function updatePlayerDirection() {
  if (player) {
    if (input.left && !input.right) {
      player.dx = -1;
    } else if (input.right && !input.left) {
      player.dx = 1;
    } else {
      player.dx = 0;
    }
  }
}
function handleKeyDown(event) {
  if (event.code === "ArrowLeft") {
    input.left = true;
  } else if (event.code === "ArrowRight") {
    input.right = true;
  } else if (event.code === "Space") {
    input.space = true;
  }
  updatePlayerDirection();
}
function handleKeyUp(event) {
  if (event.code === "ArrowLeft") {
    input.left = false;
  } else if (event.code === "ArrowRight") {
    input.right = false;
  }
  updatePlayerDirection();
}
document.addEventListener("DOMContentLoaded", loadGame);
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiZ2FtZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gRGVmaW5lIGludGVyZmFjZXMgZm9yIGRhdGEuanNvbiBzdHJ1Y3R1cmUgdG8gZW5zdXJlIHR5cGUgc2FmZXR5XHJcbmludGVyZmFjZSBJbWFnZUFzc2V0IHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHBhdGg6IHN0cmluZztcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFNvdW5kQXNzZXQge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcGF0aDogc3RyaW5nO1xyXG4gICAgZHVyYXRpb25fc2Vjb25kczogbnVtYmVyO1xyXG4gICAgdm9sdW1lOiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBHYW1lU2V0dGluZ3Mge1xyXG4gICAgY2FudmFzV2lkdGg6IG51bWJlcjtcclxuICAgIGNhbnZhc0hlaWdodDogbnVtYmVyO1xyXG4gICAgcGxheWVyU3BlZWQ6IG51bWJlcjtcclxuICAgIHBsYXllcldpZHRoOiBudW1iZXI7XHJcbiAgICBwbGF5ZXJIZWlnaHQ6IG51bWJlcjtcclxuICAgIG9ic3RhY2xlU3Bhd25JbnRlcnZhbDogbnVtYmVyOyAvLyBpbiBtaWxsaXNlY29uZHNcclxuICAgIG9ic3RhY2xlTWluU3BlZWQ6IG51bWJlcjsgLy8gcGl4ZWxzIHBlciBzZWNvbmRcclxuICAgIG9ic3RhY2xlTWF4U3BlZWQ6IG51bWJlcjsgLy8gcGl4ZWxzIHBlciBzZWNvbmRcclxuICAgIG9ic3RhY2xlTWluU2l6ZTogbnVtYmVyOyAvLyB3aWR0aC9oZWlnaHQgaW4gcGl4ZWxzXHJcbiAgICBvYnN0YWNsZU1heFNpemU6IG51bWJlcjsgLy8gd2lkdGgvaGVpZ2h0IGluIHBpeGVsc1xyXG4gICAgc2NvcmVJbmNyZW1lbnQ6IG51bWJlcjtcclxuICAgIHRpdGxlU2NyZWVuVGV4dDogc3RyaW5nO1xyXG4gICAgcHJlc3NTcGFjZVRleHQ6IHN0cmluZztcclxuICAgIGdhbWVPdmVyU2NyZWVuVGV4dDogc3RyaW5nO1xyXG4gICAgdGl0bGVTY3JlZW5Gb250OiBzdHJpbmc7XHJcbiAgICBzY29yZUZvbnQ6IHN0cmluZztcclxuICAgIGdhbWVPdmVyRm9udDogc3RyaW5nO1xyXG4gICAgdGl0bGVTY3JlZW5UZXh0Q29sb3I6IHN0cmluZztcclxuICAgIHNjb3JlVGV4dENvbG9yOiBzdHJpbmc7XHJcbiAgICBnYW1lT3ZlclRleHRDb2xvcjogc3RyaW5nO1xyXG4gICAgcGxheWVySW1hZ2VOYW1lOiBzdHJpbmc7XHJcbiAgICBvYnN0YWNsZUltYWdlTmFtZTogc3RyaW5nO1xyXG4gICAgYmdtU291bmROYW1lOiBzdHJpbmc7XHJcbiAgICBnYW1lT3ZlclNvdW5kTmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgR2FtZURhdGEge1xyXG4gICAgYXNzZXRzOiB7XHJcbiAgICAgICAgaW1hZ2VzOiBJbWFnZUFzc2V0W107XHJcbiAgICAgICAgc291bmRzOiBTb3VuZEFzc2V0W107XHJcbiAgICB9O1xyXG4gICAgZ2FtZVNldHRpbmdzOiBHYW1lU2V0dGluZ3M7XHJcbn1cclxuXHJcbi8vIC0tLSBHYW1lIFN0YXRlIFZhcmlhYmxlcyAtLS1cclxubGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmxldCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxubGV0IGdhbWVEYXRhOiBHYW1lRGF0YTsgLy8gU3RvcmVzIHBhcnNlZCBkYXRhLmpzb24gY29udGVudFxyXG5cclxuLy8gTWFwcyB0byBzdG9yZSBsb2FkZWQgaW1hZ2UgYW5kIGF1ZGlvIGFzc2V0c1xyXG5pbnRlcmZhY2UgTG9hZGVkQXNzZXRzIHtcclxuICAgIGltYWdlczogTWFwPHN0cmluZywgSFRNTEltYWdlRWxlbWVudD47XHJcbiAgICBzb3VuZHM6IE1hcDxzdHJpbmcsIEhUTUxBdWRpb0VsZW1lbnQ+O1xyXG59XHJcbmNvbnN0IGFzc2V0czogTG9hZGVkQXNzZXRzID0ge1xyXG4gICAgaW1hZ2VzOiBuZXcgTWFwKCksXHJcbiAgICBzb3VuZHM6IG5ldyBNYXAoKVxyXG59O1xyXG5cclxuLy8gRW51bS1saWtlIHR5cGUgZm9yIGdhbWUgc3RhdGVzXHJcbnR5cGUgR2FtZVN0YXRlID0gJ0xPQURJTkcnIHwgJ1RJVExFJyB8ICdQTEFZSU5HJyB8ICdHQU1FX09WRVInO1xyXG5sZXQgY3VycmVudEdhbWVTdGF0ZTogR2FtZVN0YXRlID0gJ0xPQURJTkcnO1xyXG5cclxuLy8gVGltZSB0cmFja2luZyBmb3IgZnJhbWUtcmF0ZSBpbmRlcGVuZGVudCB1cGRhdGVzXHJcbmxldCBsYXN0VGltZSA9IDA7XHJcbmxldCBkZWx0YVRpbWUgPSAwOyAvLyBUaW1lIGVsYXBzZWQgc2luY2UgbGFzdCBmcmFtZSwgaW4gc2Vjb25kc1xyXG5cclxuLy8gUGxheWVyIG9iamVjdFxyXG5pbnRlcmZhY2UgUGxheWVyIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxuICAgIGR4OiBudW1iZXI7IC8vIERpcmVjdGlvbiBtdWx0aXBsaWVyIGZvciBob3Jpem9udGFsIG1vdmVtZW50ICgtMSBmb3IgbGVmdCwgMSBmb3IgcmlnaHQsIDAgZm9yIHN0YXRpb25hcnkpXHJcbn1cclxubGV0IHBsYXllcjogUGxheWVyO1xyXG5cclxuLy8gT2JzdGFjbGUgYXJyYXlcclxuaW50ZXJmYWNlIE9ic3RhY2xlIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxuICAgIHNwZWVkOiBudW1iZXI7IC8vIHBpeGVscyBwZXIgc2Vjb25kXHJcbn1cclxubGV0IG9ic3RhY2xlczogT2JzdGFjbGVbXSA9IFtdO1xyXG5cclxubGV0IHNjb3JlID0gMDtcclxubGV0IG9ic3RhY2xlU3Bhd25UaW1lciA9IDA7IC8vIEFjY3VtdWxhdG9yIGZvciBvYnN0YWNsZSBzcGF3bmluZywgaW4gbWlsbGlzZWNvbmRzXHJcblxyXG4vLyBJbnB1dCBzdGF0ZSBmb3Iga2V5Ym9hcmQgcHJlc3Nlc1xyXG5pbnRlcmZhY2UgSW5wdXRTdGF0ZSB7XHJcbiAgICBsZWZ0OiBib29sZWFuO1xyXG4gICAgcmlnaHQ6IGJvb2xlYW47XHJcbiAgICBzcGFjZTogYm9vbGVhbjtcclxufVxyXG5jb25zdCBpbnB1dDogSW5wdXRTdGF0ZSA9IHtcclxuICAgIGxlZnQ6IGZhbHNlLFxyXG4gICAgcmlnaHQ6IGZhbHNlLFxyXG4gICAgc3BhY2U6IGZhbHNlXHJcbn07XHJcblxyXG4vLyBBdWRpbyBlbGVtZW50cyBmb3IgYmFja2dyb3VuZCBtdXNpYyBhbmQgc291bmQgZWZmZWN0c1xyXG5sZXQgYmFja2dyb3VuZE11c2ljOiBIVE1MQXVkaW9FbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbmxldCBnYW1lT3ZlckVmZmVjdDogSFRNTEF1ZGlvRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuXHJcbi8vIC0tLSBDb3JlIEdhbWUgRnVuY3Rpb25zIC0tLVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemVzIHRoZSBnYW1lOiBmZXRjaGVzIGRhdGEsIGxvYWRzIGFzc2V0cywgc2V0cyB1cCBjYW52YXMgYW5kIGV2ZW50IGxpc3RlbmVycy5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRHYW1lKCkge1xyXG4gICAgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVDYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGlmICghY2FudmFzKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbnZhcyBlbGVtZW50IHdpdGggSUQgJ2dhbWVDYW52YXMnIG5vdCBmb3VuZC5cIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBpZiAoIWN0eCkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IDJEIHJlbmRlcmluZyBjb250ZXh0LlwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyAxLiBGZXRjaCBnYW1lIGRhdGEgZnJvbSBkYXRhLmpzb25cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdkYXRhLmpzb24nKTtcclxuICAgICAgICBnYW1lRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgICAgLy8gMi4gU2V0IGNhbnZhcyBkaW1lbnNpb25zIGZyb20gZ2FtZSBzZXR0aW5nc1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5jYW52YXNXaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmNhbnZhc0hlaWdodDtcclxuXHJcbiAgICAgICAgLy8gMy4gTG9hZCBhbGwgYXNzZXRzIChpbWFnZXMgYW5kIHNvdW5kcylcclxuICAgICAgICBhd2FpdCBsb2FkQXNzZXRzKCk7XHJcblxyXG4gICAgICAgIC8vIDQuIEluaXRpYWxpemUgZ2FtZSBzdGF0ZSBhbmQgc3RhcnQgbG9vcFxyXG4gICAgICAgIGluaXRHYW1lKCk7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdhbWVMb29wKTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBnYW1lIGRhdGEgb3IgYXNzZXRzOlwiLCBlcnJvcik7XHJcbiAgICAgICAgLy8gRGlzcGxheSBhbiBlcnJvciBtZXNzYWdlIG9uIHRoZSBjYW52YXMgaWYgbG9hZGluZyBmYWlsc1xyXG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JlZCc7XHJcbiAgICAgICAgY3R4LmZvbnQgPSAnMjBweCBBcmlhbCc7XHJcbiAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIGN0eC5maWxsVGV4dChcIkZhaWxlZCB0byBsb2FkIGdhbWUuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuXCIsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIExvYWRzIGFsbCBpbWFnZSBhbmQgc291bmQgYXNzZXRzIHNwZWNpZmllZCBpbiBnYW1lRGF0YS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRBc3NldHMoKSB7XHJcbiAgICBjdXJyZW50R2FtZVN0YXRlID0gJ0xPQURJTkcnOyAvLyBJbmRpY2F0ZSBsb2FkaW5nIHN0YXRlXHJcbiAgICBkcmF3VGV4dCgnTG9hZGluZyBhc3NldHMuLi4nLCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiwgJzI0cHggQXJpYWwnLCAnI2ZmZmZmZicpO1xyXG5cclxuICAgIGNvbnN0IGltYWdlUHJvbWlzZXMgPSBnYW1lRGF0YS5hc3NldHMuaW1hZ2VzLm1hcChpbWcgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgIGltYWdlLnNyYyA9IGltZy5wYXRoO1xyXG4gICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhc3NldHMuaW1hZ2VzLnNldChpbWcubmFtZSwgaW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpbWFnZS5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gbG9hZCBpbWFnZTogJHtpbWcucGF0aH1gKTtcclxuICAgICAgICAgICAgICAgIGFzc2V0cy5pbWFnZXMuc2V0KGltZy5uYW1lLCBuZXcgSW1hZ2UoKSk7IC8vIFN0b3JlIGEgZHVtbXkgaW1hZ2UgdG8gcHJldmVudCBicmVha2luZyBkcmF3QXNzZXQsIGJ1dCB3YXJuXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7IC8vIFJlc29sdmUgYW55d2F5IHRvIGFsbG93IGdhbWUgdG8gY29udGludWUsIHBvdGVudGlhbGx5IHdpdGggZmFsbGJhY2tzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBzb3VuZFByb21pc2VzID0gZ2FtZURhdGEuYXNzZXRzLnNvdW5kcy5tYXAoc25kID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhzbmQucGF0aCk7XHJcbiAgICAgICAgICAgIGF1ZGlvLnZvbHVtZSA9IHNuZC52b2x1bWU7XHJcbiAgICAgICAgICAgIC8vIFNhZmFyaSBhbmQgb3RoZXIgYnJvd3NlcnMgcmVxdWlyZSB1c2VyIGludGVyYWN0aW9uIGZvciBtZWRpYSBwbGF5YmFjay5cclxuICAgICAgICAgICAgLy8gb25jYW5wbGF5dGhyb3VnaCBpbmRpY2F0ZXMgdGhlIGJyb3dzZXIgY2FuIHBsYXkgaXQsIGJ1dCBpdCBtaWdodCBub3QgYXV0b3BsYXkuXHJcbiAgICAgICAgICAgIGF1ZGlvLm9uY2FucGxheXRocm91Z2ggPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhc3NldHMuc291bmRzLnNldChzbmQubmFtZSwgYXVkaW8pO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhdWRpby5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gbG9hZCBzb3VuZDogJHtzbmQucGF0aH1gKTtcclxuICAgICAgICAgICAgICAgIGFzc2V0cy5zb3VuZHMuc2V0KHNuZC5uYW1lLCBuZXcgQXVkaW8oKSk7IC8vIFN0b3JlIGEgZHVtbXkgYXVkaW8gdG8gcHJldmVudCBicmVha2luZ1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpOyAvLyBSZXNvbHZlIGFueXdheVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBGYWxsYmFjayBmb3IgY2FzZXMgd2hlcmUgb25jYW5wbGF5dGhyb3VnaCBkb2Vzbid0IGZpcmUgYXMgZXhwZWN0ZWQgKGUuZy4sIHNvbWUgZm9ybWF0cy9icm93c2VycylcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWFzc2V0cy5zb3VuZHMuaGFzKHNuZC5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0cy5zb3VuZHMuc2V0KHNuZC5uYW1lLCBhdWRpbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxMDAwKTsgLy8gR2l2ZSBpdCBhIHNlY29uZCB0byBsb2FkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFsuLi5pbWFnZVByb21pc2VzLCAuLi5zb3VuZFByb21pc2VzXSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJBbGwgYXNzZXRzIGxvYWRlZC5cIik7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIGFzc2V0cyAoc29tZSBtYXkgaGF2ZSBmYWlsZWQgYnV0IGFsbG93ZWQgcHJvZ3Jlc3Npb24pOlwiLCBlcnJvcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXRzIHVwIGluaXRpYWwgZ2FtZSBzdGF0ZSBhZnRlciBhc3NldHMgYXJlIGxvYWRlZCwgYW5kIHJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0R2FtZSgpIHtcclxuICAgIC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgcGxheWVyIGlucHV0XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaGFuZGxlS2V5VXApO1xyXG5cclxuICAgIC8vIFByZXBhcmUgYXVkaW8gZWxlbWVudHNcclxuICAgIGJhY2tncm91bmRNdXNpYyA9IGFzc2V0cy5zb3VuZHMuZ2V0KGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5iZ21Tb3VuZE5hbWUpIHx8IG51bGw7XHJcbiAgICBpZiAoYmFja2dyb3VuZE11c2ljKSB7XHJcbiAgICAgICAgYmFja2dyb3VuZE11c2ljLmxvb3AgPSB0cnVlOyAvLyBMb29wIGJhY2tncm91bmQgbXVzaWNcclxuICAgICAgICBiYWNrZ3JvdW5kTXVzaWMudm9sdW1lID0gZ2FtZURhdGEuYXNzZXRzLnNvdW5kcy5maW5kKHMgPT4gcy5uYW1lID09PSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuYmdtU291bmROYW1lKT8udm9sdW1lIHx8IDAuMztcclxuICAgIH1cclxuXHJcbiAgICBnYW1lT3ZlckVmZmVjdCA9IGFzc2V0cy5zb3VuZHMuZ2V0KGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5nYW1lT3ZlclNvdW5kTmFtZSkgfHwgbnVsbDtcclxuICAgIGlmIChnYW1lT3ZlckVmZmVjdCkge1xyXG4gICAgICAgIGdhbWVPdmVyRWZmZWN0LnZvbHVtZSA9IGdhbWVEYXRhLmFzc2V0cy5zb3VuZHMuZmluZChzID0+IHMubmFtZSA9PT0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmdhbWVPdmVyU291bmROYW1lKT8udm9sdW1lIHx8IDAuNztcclxuICAgIH1cclxuXHJcbiAgICBjdXJyZW50R2FtZVN0YXRlID0gJ1RJVExFJzsgLy8gU3RhcnQgb24gdGhlIHRpdGxlIHNjcmVlblxyXG59XHJcblxyXG4vKipcclxuICogUmVzZXRzIGdhbWUgc3RhdGUgdG8gc3RhcnQgYSBuZXcgZ2FtZSAoZnJvbSB0aXRsZSBvciBnYW1lIG92ZXIgc2NyZWVuKS5cclxuICovXHJcbmZ1bmN0aW9uIG5ld0dhbWUoKSB7XHJcbiAgICAvLyBJbml0aWFsaXplIHBsYXllciBwb3NpdGlvbiBhbmQgc2l6ZVxyXG4gICAgcGxheWVyID0ge1xyXG4gICAgICAgIHg6IGNhbnZhcy53aWR0aCAvIDIgLSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MucGxheWVyV2lkdGggLyAyLFxyXG4gICAgICAgIHk6IGNhbnZhcy5oZWlnaHQgLSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MucGxheWVySGVpZ2h0IC0gMjAsXHJcbiAgICAgICAgd2lkdGg6IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5wbGF5ZXJXaWR0aCxcclxuICAgICAgICBoZWlnaHQ6IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5wbGF5ZXJIZWlnaHQsXHJcbiAgICAgICAgZHg6IDAgLy8gUGxheWVyIHN0YXJ0cyBzdGF0aW9uYXJ5XHJcbiAgICB9O1xyXG4gICAgb2JzdGFjbGVzID0gW107IC8vIENsZWFyIGFsbCBvYnN0YWNsZXNcclxuICAgIHNjb3JlID0gMDsgLy8gUmVzZXQgc2NvcmVcclxuICAgIG9ic3RhY2xlU3Bhd25UaW1lciA9IDA7IC8vIFJlc2V0IG9ic3RhY2xlIHNwYXduIHRpbWVyXHJcblxyXG4gICAgY3VycmVudEdhbWVTdGF0ZSA9ICdQTEFZSU5HJzsgLy8gQ2hhbmdlIHN0YXRlIHRvIHBsYXlpbmdcclxuICAgIGlucHV0LnNwYWNlID0gZmFsc2U7IC8vIENvbnN1bWUgdGhlICdzcGFjZScgaW5wdXQgdGhhdCB0cmlnZ2VyZWQgbmV3R2FtZVxyXG5cclxuICAgIC8vIFBsYXkgYmFja2dyb3VuZCBtdXNpYyAoaGFuZGxpbmcgYnJvd3NlciBhdXRvcGxheSBwb2xpY2llcylcclxuICAgIGlmIChiYWNrZ3JvdW5kTXVzaWMpIHtcclxuICAgICAgICBiYWNrZ3JvdW5kTXVzaWMuY3VycmVudFRpbWUgPSAwOyAvLyBSZXdpbmQgdG8gc3RhcnRcclxuICAgICAgICBiYWNrZ3JvdW5kTXVzaWMucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS53YXJuKFwiQmFja2dyb3VuZCBtdXNpYyBhdXRvcGxheSBwcmV2ZW50ZWQ6XCIsIGUpKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE1haW4gZ2FtZSBsb29wLCBjYWxsZWQgY29udGludW91c2x5IHZpYSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUuXHJcbiAqIEBwYXJhbSBjdXJyZW50VGltZSBUaGUgRE9NSGlnaFJlc1RpbWVTdGFtcCBmb3IgdGhlIGN1cnJlbnQgZnJhbWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBnYW1lTG9vcChjdXJyZW50VGltZTogbnVtYmVyKSB7XHJcbiAgICBpZiAobGFzdFRpbWUgPT09IDApIGxhc3RUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICBkZWx0YVRpbWUgPSAoY3VycmVudFRpbWUgLSBsYXN0VGltZSkgLyAxMDAwOyAvLyBDb252ZXJ0IGRlbHRhIHRpbWUgdG8gc2Vjb25kc1xyXG4gICAgbGFzdFRpbWUgPSBjdXJyZW50VGltZTtcclxuXHJcbiAgICB1cGRhdGUoZGVsdGFUaW1lKTsgLy8gVXBkYXRlIGdhbWUgbG9naWNcclxuICAgIGRyYXcoKTsgICAgICAgICAgIC8vIERyYXcgZ2FtZSBlbGVtZW50c1xyXG5cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7IC8vIFJlcXVlc3QgbmV4dCBmcmFtZVxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlcyBnYW1lIGxvZ2ljIGJhc2VkIG9uIHRoZSBjdXJyZW50IGdhbWUgc3RhdGUuXHJcbiAqIEBwYXJhbSBkdCBUaW1lIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgZnJhbWUgaW4gc2Vjb25kcy5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZShkdDogbnVtYmVyKSB7XHJcbiAgICBzd2l0Y2ggKGN1cnJlbnRHYW1lU3RhdGUpIHtcclxuICAgICAgICBjYXNlICdMT0FESU5HJzpcclxuICAgICAgICAgICAgLy8gTm8gZ2FtZSBsb2dpYyB1cGRhdGUgbmVlZGVkIHdoaWxlIGxvYWRpbmdcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnVElUTEUnOlxyXG4gICAgICAgICAgICBpZiAoaW5wdXQuc3BhY2UpIHtcclxuICAgICAgICAgICAgICAgIG5ld0dhbWUoKTsgLy8gU3RhcnQgZ2FtZSBvbiBzcGFjZSBwcmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ1BMQVlJTkcnOlxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgcGxheWVyIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIHBsYXllci54ICs9IHBsYXllci5keCAqIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5wbGF5ZXJTcGVlZCAqIGR0O1xyXG4gICAgICAgICAgICAvLyBDbGFtcCBwbGF5ZXIgd2l0aGluIGNhbnZhcyBib3VuZHNcclxuICAgICAgICAgICAgcGxheWVyLnggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjYW52YXMud2lkdGggLSBwbGF5ZXIud2lkdGgsIHBsYXllci54KSk7XHJcblxyXG4gICAgICAgICAgICAvLyBPYnN0YWNsZSBzcGF3bmluZyBsb2dpY1xyXG4gICAgICAgICAgICBvYnN0YWNsZVNwYXduVGltZXIgKz0gZHQgKiAxMDAwOyAvLyBBY2N1bXVsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgICAgIGlmIChvYnN0YWNsZVNwYXduVGltZXIgPj0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLm9ic3RhY2xlU3Bhd25JbnRlcnZhbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JzdGFjbGVXaWR0aCA9IE1hdGgucmFuZG9tKCkgKiAoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLm9ic3RhY2xlTWF4U2l6ZSAtIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5vYnN0YWNsZU1pblNpemUpICsgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLm9ic3RhY2xlTWluU2l6ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9ic3RhY2xlSGVpZ2h0ID0gb2JzdGFjbGVXaWR0aDsgLy8gTWFrZSBvYnN0YWNsZXMgc3F1YXJlIGZvciBzaW1wbGljaXR5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYnN0YWNsZVggPSBNYXRoLnJhbmRvbSgpICogKGNhbnZhcy53aWR0aCAtIG9ic3RhY2xlV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JzdGFjbGVTcGVlZCA9IE1hdGgucmFuZG9tKCkgKiAoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLm9ic3RhY2xlTWF4U3BlZWQgLSBnYW1lRGF0YS5nYW1lU2V0dGluZ3Mub2JzdGFjbGVNaW5TcGVlZCkgKyBnYW1lRGF0YS5nYW1lU2V0dGluZ3Mub2JzdGFjbGVNaW5TcGVlZDtcclxuXHJcbiAgICAgICAgICAgICAgICBvYnN0YWNsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogb2JzdGFjbGVYLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IC1vYnN0YWNsZUhlaWdodCwgLy8gU3RhcnQgb2JzdGFjbGUganVzdCBhYm92ZSB0aGUgY2FudmFzXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG9ic3RhY2xlV2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBvYnN0YWNsZUhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogb2JzdGFjbGVTcGVlZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBvYnN0YWNsZVNwYXduVGltZXIgPSAwOyAvLyBSZXNldCB0aW1lclxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgb2JzdGFjbGUgcG9zaXRpb25zIGFuZCBjaGVjayBmb3IgY29sbGlzaW9uc1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ic3RhY2xlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JzID0gb2JzdGFjbGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgb2JzLnkgKz0gb2JzLnNwZWVkICogZHQ7IC8vIE1vdmUgb2JzdGFjbGUgZG93bndhcmRzXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2ltcGxlIEFBQkIgY29sbGlzaW9uIGRldGVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllci54IDwgb2JzLnggKyBvYnMud2lkdGggJiZcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIueCArIHBsYXllci53aWR0aCA+IG9icy54ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnkgPCBvYnMueSArIG9icy5oZWlnaHQgJiZcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIueSArIHBsYXllci5oZWlnaHQgPiBvYnMueVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29sbGlzaW9uIGRldGVjdGVkISBHYW1lIE92ZXJcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50R2FtZVN0YXRlID0gJ0dBTUVfT1ZFUic7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVPdmVyRWZmZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVPdmVyRWZmZWN0LmN1cnJlbnRUaW1lID0gMDsgLy8gUmV3aW5kIGFuZCBwbGF5IHNvdW5kIGVmZmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lT3ZlckVmZmVjdC5wbGF5KCkuY2F0Y2goZSA9PiBjb25zb2xlLndhcm4oXCJHYW1lIG92ZXIgc291bmQgcGxheSBwcmV2ZW50ZWQ6XCIsIGUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhY2tncm91bmRNdXNpYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kTXVzaWMucGF1c2UoKTsgLy8gUGF1c2UgQkdNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRNdXNpYy5jdXJyZW50VGltZSA9IDA7IC8vIFJld2luZCBCR00gZm9yIG5leHQgZ2FtZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gRXhpdCBsb29wLCBnYW1lIHN0YXRlIGNoYW5nZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIG9mZi1zY3JlZW4gb2JzdGFjbGVzIGFuZCB1cGRhdGUgc2NvcmVcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IG9ic3RhY2xlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9ic3RhY2xlc1tpXS55ID4gY2FudmFzLmhlaWdodCkgeyAvLyBPYnN0YWNsZSBoYXMgbW92ZWQgb2ZmLXNjcmVlblxyXG4gICAgICAgICAgICAgICAgICAgIG9ic3RhY2xlcy5zcGxpY2UoaSwgMSk7IC8vIFJlbW92ZSBpdFxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlICs9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5zY29yZUluY3JlbWVudDsgLy8gSW5jcmVhc2Ugc2NvcmVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdHQU1FX09WRVInOlxyXG4gICAgICAgICAgICBpZiAoaW5wdXQuc3BhY2UpIHtcclxuICAgICAgICAgICAgICAgIG5ld0dhbWUoKTsgLy8gUmVzdGFydCBnYW1lIG9uIHNwYWNlIHByZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEcmF3cyBhbGwgZ2FtZSBlbGVtZW50cyBvbiB0aGUgY2FudmFzIGJhc2VkIG9uIHRoZSBjdXJyZW50IGdhbWUgc3RhdGUuXHJcbiAqL1xyXG5mdW5jdGlvbiBkcmF3KCkge1xyXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOyAvLyBDbGVhciB0aGUgZW50aXJlIGNhbnZhc1xyXG5cclxuICAgIHN3aXRjaCAoY3VycmVudEdhbWVTdGF0ZSkge1xyXG4gICAgICAgIGNhc2UgJ0xPQURJTkcnOlxyXG4gICAgICAgICAgICBkcmF3VGV4dCgnTG9hZGluZyBhc3NldHMuLi4nLCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiwgJzI0cHggQXJpYWwnLCAnI2ZmZmZmZicpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdUSVRMRSc6XHJcbiAgICAgICAgICAgIGRyYXdUZXh0KGdhbWVEYXRhLmdhbWVTZXR0aW5ncy50aXRsZVNjcmVlblRleHQsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyIC0gNTAsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy50aXRsZVNjcmVlbkZvbnQsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy50aXRsZVNjcmVlblRleHRDb2xvcik7XHJcbiAgICAgICAgICAgIGRyYXdUZXh0KGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5wcmVzc1NwYWNlVGV4dCwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIgKyAyMCwgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnNjb3JlRm9udCwgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnRpdGxlU2NyZWVuVGV4dENvbG9yKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnUExBWUlORyc6XHJcbiAgICAgICAgICAgIC8vIERyYXcgcGxheWVyXHJcbiAgICAgICAgICAgIGRyYXdBc3NldChnYW1lRGF0YS5nYW1lU2V0dGluZ3MucGxheWVySW1hZ2VOYW1lLCBwbGF5ZXIueCwgcGxheWVyLnksIHBsYXllci53aWR0aCwgcGxheWVyLmhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAvLyBEcmF3IG9ic3RhY2xlc1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9icyBvZiBvYnN0YWNsZXMpIHtcclxuICAgICAgICAgICAgICAgIGRyYXdBc3NldChnYW1lRGF0YS5nYW1lU2V0dGluZ3Mub2JzdGFjbGVJbWFnZU5hbWUsIG9icy54LCBvYnMueSwgb2JzLndpZHRoLCBvYnMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRHJhdyBzY29yZVxyXG4gICAgICAgICAgICBjdHguZm9udCA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5zY29yZUZvbnQ7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3Muc2NvcmVUZXh0Q29sb3I7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7IC8vIEFsaWduIHNjb3JlIHRvIHRoZSBsZWZ0XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChgU2NvcmU6ICR7c2NvcmV9YCwgMTAsIDMwKTsgLy8gUG9zaXRpb24gc2NvcmUgYXQgdG9wLWxlZnRcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnR0FNRV9PVkVSJzpcclxuICAgICAgICAgICAgZHJhd1RleHQoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmdhbWVPdmVyU2NyZWVuVGV4dCwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIgLSA1MCwgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmdhbWVPdmVyRm9udCwgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmdhbWVPdmVyVGV4dENvbG9yKTtcclxuICAgICAgICAgICAgZHJhd1RleHQoYEZpbmFsIFNjb3JlOiAke3Njb3JlfWAsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyLCBnYW1lRGF0YS5nYW1lU2V0dGluZ3Muc2NvcmVGb250LCBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZ2FtZU92ZXJUZXh0Q29sb3IpO1xyXG4gICAgICAgICAgICBkcmF3VGV4dChnYW1lRGF0YS5nYW1lU2V0dGluZ3MucHJlc3NTcGFjZVRleHQsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyICsgNTAsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5zY29yZUZvbnQsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5nYW1lT3ZlclRleHRDb2xvcik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gSGVscGVyIEZ1bmN0aW9ucyAtLS1cclxuXHJcbi8qKlxyXG4gKiBEcmF3cyB0ZXh0IG9uIHRoZSBjYW52YXMuXHJcbiAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IHN0cmluZyB0byBkcmF3LlxyXG4gKiBAcGFyYW0geCBYLWNvb3JkaW5hdGUgKGNlbnRlcikuXHJcbiAqIEBwYXJhbSB5IFktY29vcmRpbmF0ZSAoY2VudGVyKS5cclxuICogQHBhcmFtIGZvbnQgQ1NTIGZvbnQgc3RyaW5nIChlLmcuLCBcIjMwcHggQXJpYWxcIikuXHJcbiAqIEBwYXJhbSBjb2xvciBDU1MgY29sb3Igc3RyaW5nIChlLmcuLCBcIiNGRkZGRkZcIikuXHJcbiAqL1xyXG5mdW5jdGlvbiBkcmF3VGV4dCh0ZXh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBmb250OiBzdHJpbmcsIGNvbG9yOiBzdHJpbmcpIHtcclxuICAgIGN0eC5mb250ID0gZm9udDtcclxuICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcclxuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJzsgLy8gQ2VudGVyIHZlcnRpY2FsbHkgYXMgd2VsbFxyXG4gICAgY3R4LmZpbGxUZXh0KHRleHQsIHgsIHkpO1xyXG59XHJcblxyXG4vKipcclxuICogRHJhd3MgYW4gaW1hZ2UgYXNzZXQgb24gdGhlIGNhbnZhcywgc2NhbGVkIHRvIHRoZSBzcGVjaWZpZWQgZGltZW5zaW9ucy5cclxuICogSWYgdGhlIGltYWdlIGFzc2V0IGlzIG5vdCBmb3VuZCwgYSBjb2xvcmVkIHJlY3RhbmdsZSBpcyBkcmF3biBhcyBhIGZhbGxiYWNrLlxyXG4gKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW1hZ2UgYXNzZXQgKGFzIGRlZmluZWQgaW4gZGF0YS5qc29uKS5cclxuICogQHBhcmFtIHggWC1jb29yZGluYXRlIG9mIHRoZSB0b3AtbGVmdCBjb3JuZXIuXHJcbiAqIEBwYXJhbSB5IFktY29vcmRpbmF0ZSBvZiB0aGUgdG9wLWxlZnQgY29ybmVyLlxyXG4gKiBAcGFyYW0gd2lkdGggRGVzaXJlZCB3aWR0aCBmb3IgZHJhd2luZy5cclxuICogQHBhcmFtIGhlaWdodCBEZXNpcmVkIGhlaWdodCBmb3IgZHJhd2luZy5cclxuICovXHJcbmZ1bmN0aW9uIGRyYXdBc3NldChuYW1lOiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgaW1hZ2UgPSBhc3NldHMuaW1hZ2VzLmdldChuYW1lKTtcclxuICAgIGlmIChpbWFnZSAmJiBpbWFnZS5jb21wbGV0ZSAmJiBpbWFnZS5uYXR1cmFsV2lkdGggPiAwKSB7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEZhbGxiYWNrOiBkcmF3IGEgY29sb3JlZCByZWN0YW5nbGUgaWYgaW1hZ2UgaXMgbm90IGxvYWRlZCBvciBpbnZhbGlkXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG5hbWUgPT09IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5wbGF5ZXJJbWFnZU5hbWUgPyAnYmx1ZScgOiAncmVkJzsgLy8gRGlmZmVyZW50IGNvbG9ycyBmb3IgcGxheWVyL29ic3RhY2xlc1xyXG4gICAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAvLyBjb25zb2xlLndhcm4oYEFzc2V0IGltYWdlICcke25hbWV9JyBub3QgZm91bmQgb3Igbm90IGxvYWRlZC4gRHJhd2luZyBmYWxsYmFjayByZWN0YW5nbGUuYCk7IC8vIFVuY29tbWVudCBmb3IgZGVidWdnaW5nXHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSBwbGF5ZXIncyBob3Jpem9udGFsIG1vdmVtZW50IGRpcmVjdGlvbiBiYXNlZCBvbiBjdXJyZW50IGlucHV0LlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlUGxheWVyRGlyZWN0aW9uKCkge1xyXG4gICAgaWYgKHBsYXllcikgeyAvLyBFbnN1cmUgcGxheWVyIG9iamVjdCBleGlzdHMgYmVmb3JlIHVwZGF0aW5nXHJcbiAgICAgICAgaWYgKGlucHV0LmxlZnQgJiYgIWlucHV0LnJpZ2h0KSB7XHJcbiAgICAgICAgICAgIHBsYXllci5keCA9IC0xO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQucmlnaHQgJiYgIWlucHV0LmxlZnQpIHtcclxuICAgICAgICAgICAgcGxheWVyLmR4ID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwbGF5ZXIuZHggPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMga2V5Ym9hcmQga2V5IGRvd24gZXZlbnRzLlxyXG4gKiBAcGFyYW0gZXZlbnQgVGhlIEtleWJvYXJkRXZlbnQgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlS2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0xlZnQnKSB7XHJcbiAgICAgICAgaW5wdXQubGVmdCA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd1JpZ2h0Jykge1xyXG4gICAgICAgIGlucHV0LnJpZ2h0ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ1NwYWNlJykge1xyXG4gICAgICAgIGlucHV0LnNwYWNlID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVBsYXllckRpcmVjdGlvbigpOyAvLyBVcGRhdGUgcGxheWVyIG1vdmVtZW50IGltbWVkaWF0ZWx5XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIGtleWJvYXJkIGtleSB1cCBldmVudHMuXHJcbiAqIEBwYXJhbSBldmVudCBUaGUgS2V5Ym9hcmRFdmVudCBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVLZXlVcChldmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0xlZnQnKSB7XHJcbiAgICAgICAgaW5wdXQubGVmdCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dSaWdodCcpIHtcclxuICAgICAgICBpbnB1dC5yaWdodCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLy8gU3BhY2Uga2V5ICd1cCcgZG9lc24ndCBpbW1lZGlhdGVseSBjbGVhciAnaW5wdXQuc3BhY2UnIGJlY2F1c2UgaXQnc1xyXG4gICAgLy8gY29uc3VtZWQgYnkgdGhlIGdhbWUgc3RhdGUgbG9naWMgd2hlbiBzdGFydGluZy9yZXN0YXJ0aW5nIHRoZSBnYW1lLlxyXG4gICAgdXBkYXRlUGxheWVyRGlyZWN0aW9uKCk7IC8vIFVwZGF0ZSBwbGF5ZXIgbW92ZW1lbnQgaW1tZWRpYXRlbHlcclxufVxyXG5cclxuLy8gU3RhcnQgdGhlIGdhbWUgd2hlbiB0aGUgRE9NIGlzIGZ1bGx5IGxvYWRlZFxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbG9hZEdhbWUpOyJdLAogICJtYXBwaW5ncyI6ICJBQW1EQSxJQUFJO0FBQ0osSUFBSTtBQUNKLElBQUk7QUFPSixNQUFNLFNBQXVCO0FBQUEsRUFDekIsUUFBUSxvQkFBSSxJQUFJO0FBQUEsRUFDaEIsUUFBUSxvQkFBSSxJQUFJO0FBQ3BCO0FBSUEsSUFBSSxtQkFBOEI7QUFHbEMsSUFBSSxXQUFXO0FBQ2YsSUFBSSxZQUFZO0FBVWhCLElBQUk7QUFVSixJQUFJLFlBQXdCLENBQUM7QUFFN0IsSUFBSSxRQUFRO0FBQ1osSUFBSSxxQkFBcUI7QUFRekIsTUFBTSxRQUFvQjtBQUFBLEVBQ3RCLE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLE9BQU87QUFDWDtBQUdBLElBQUksa0JBQTJDO0FBQy9DLElBQUksaUJBQTBDO0FBUTlDLGVBQWUsV0FBVztBQUN0QixXQUFTLFNBQVMsZUFBZSxZQUFZO0FBQzdDLE1BQUksQ0FBQyxRQUFRO0FBQ1QsWUFBUSxNQUFNLGdEQUFnRDtBQUM5RDtBQUFBLEVBQ0o7QUFDQSxRQUFNLE9BQU8sV0FBVyxJQUFJO0FBQzVCLE1BQUksQ0FBQyxLQUFLO0FBQ04sWUFBUSxNQUFNLHFDQUFxQztBQUNuRDtBQUFBLEVBQ0o7QUFFQSxNQUFJO0FBRUEsVUFBTSxXQUFXLE1BQU0sTUFBTSxXQUFXO0FBQ3hDLGVBQVcsTUFBTSxTQUFTLEtBQUs7QUFHL0IsV0FBTyxRQUFRLFNBQVMsYUFBYTtBQUNyQyxXQUFPLFNBQVMsU0FBUyxhQUFhO0FBR3RDLFVBQU0sV0FBVztBQUdqQixhQUFTO0FBQ1QsMEJBQXNCLFFBQVE7QUFBQSxFQUVsQyxT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
