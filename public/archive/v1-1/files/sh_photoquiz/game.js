let canvas = document.getElementById("gameCanvas");
if (!canvas) {
  console.error("Canvas element with ID 'gameCanvas' not found. Creating a default one.");
  const body = document.getElementsByTagName("body")[0];
  const newCanvas = document.createElement("canvas");
  newCanvas.id = "gameCanvas";
  body.appendChild(newCanvas);
  newCanvas.width = 800;
  newCanvas.height = 600;
  canvas = newCanvas;
}
const ctx = canvas.getContext("2d");
if (!ctx) {
  console.error("Failed to get 2D rendering context for canvas. Your browser may not support HTML5 Canvas.");
}
var GameState = /* @__PURE__ */ ((GameState2) => {
  GameState2[GameState2["TITLE"] = 0] = "TITLE";
  GameState2[GameState2["PLAYING"] = 1] = "PLAYING";
  GameState2[GameState2["GAME_OVER"] = 2] = "GAME_OVER";
  return GameState2;
})(GameState || {});
let currentGameState = 0 /* TITLE */;
let gameData;
let assets = { images: /* @__PURE__ */ new Map(), sounds: /* @__PURE__ */ new Map() };
let currentCelebrities = [];
let currentCelebrity = null;
let currentCelebrityImage = null;
let timeRemaining = 0;
let lives = 0;
let score = 0;
let message = null;
let messageColor = "";
let messageTimer = 0;
let lastFrameTime = 0;
let inputElement;
async function loadAssets() {
  const loadImagePromises = gameData.assets.images.map((imgAsset) => {
    return new Promise((resolve, reject) => {
      const img = new Image();
      img.src = imgAsset.path;
      img.onload = () => {
        assets.images.set(imgAsset.name, img);
        resolve();
      };
      img.onerror = () => {
        console.error(`Failed to load image: ${imgAsset.path}`);
        reject(`Failed to load image: ${imgAsset.path}`);
      };
    });
  });
  const loadSoundPromises = gameData.assets.sounds.map((sndAsset) => {
    return new Promise((resolve) => {
      const audio = new Audio(sndAsset.path);
      audio.volume = sndAsset.volume !== void 0 ? sndAsset.volume : 1;
      audio.loop = sndAsset.loop || false;
      assets.sounds.set(sndAsset.name, audio);
      resolve();
    });
  });
  await Promise.all([...loadImagePromises, ...loadSoundPromises]);
  console.log("All assets loaded.");
}
function initGame() {
  canvas.width = gameData.gameSettings.canvasWidth;
  canvas.height = gameData.gameSettings.canvasHeight;
  inputElement = document.createElement("input");
  inputElement.type = "text";
  inputElement.placeholder = "Guess the celebrity!";
  inputElement.style.position = "absolute";
  inputElement.style.display = "none";
  inputElement.style.boxSizing = "border-box";
  document.body.appendChild(inputElement);
  positionInputBox();
  document.addEventListener("keydown", handleGlobalKeyDown);
  inputElement.addEventListener("keydown", handleInputKeyDown);
  requestAnimationFrame(gameLoop);
}
function positionInputBox() {
  if (!inputElement || !gameData || !canvas) return;
  const canvasRect = canvas.getBoundingClientRect();
  const inputBoxWidth = gameData.gameSettings.inputBoxWidth;
  const inputBoxHeight = gameData.gameSettings.inputBoxHeight;
  const inputBoxBottomMargin = gameData.gameSettings.inputBoxBottomMargin;
  inputElement.style.width = `${inputBoxWidth}px`;
  inputElement.style.height = `${inputBoxHeight}px`;
  inputElement.style.left = `${canvasRect.left + (canvasRect.width - inputBoxWidth) / 2}px`;
  inputElement.style.top = `${canvasRect.top + canvasRect.height - inputBoxHeight - inputBoxBottomMargin}px`;
  inputElement.style.fontSize = gameData.gameSettings.fontSizeUI;
  inputElement.style.fontFamily = gameData.gameSettings.fontFamily;
  inputElement.style.padding = "5px 10px";
  inputElement.style.backgroundColor = "#333";
  inputElement.style.color = gameData.gameSettings.textColor;
  inputElement.style.border = "2px solid #555";
  inputElement.style.borderRadius = "5px";
  inputElement.style.outline = "none";
}
function startGame() {
  lives = gameData.gameSettings.initialLives;
  score = 0;
  currentCelebrities = [...gameData.celebrities];
  shuffleArray(currentCelebrities);
  currentGameState = 1 /* PLAYING */;
  inputElement.style.display = "block";
  inputElement.value = "";
  inputElement.focus();
  startRound();
  const bgm = assets.sounds.get("bgm");
  if (bgm) {
    bgm.currentTime = 0;
    bgm.play().catch((e) => console.log("BGM autoplay prevented:", e));
  }
}
function startRound() {
  if (currentCelebrities.length === 0) {
    currentCelebrities = [...gameData.celebrities];
    shuffleArray(currentCelebrities);
  }
  currentCelebrity = currentCelebrities.pop();
  currentCelebrityImage = assets.images.get(currentCelebrity.image) || null;
  timeRemaining = gameData.gameSettings.roundTimeSeconds * 1e3;
  message = null;
  inputElement.value = "";
  inputElement.focus();
}
function checkGuess() {
  if (!currentCelebrity || !inputElement) return;
  const guess = inputElement.value.trim().toLowerCase();
  const correctName = currentCelebrity.name.toLowerCase();
  if (guess === correctName) {
    score += gameData.gameSettings.scorePerCorrect;
    message = "Correct!";
    messageColor = gameData.gameSettings.messageCorrectColor;
    assets.sounds.get("correct")?.play();
    messageTimer = gameData.gameSettings.messageDisplayDuration;
    setTimeout(startRound, messageTimer * 1e3);
  } else {
    lives--;
    message = "Wrong!";
    messageColor = gameData.gameSettings.messageWrongColor;
    assets.sounds.get("wrong")?.play();
    messageTimer = gameData.gameSettings.messageDisplayDuration;
    if (lives <= 0) {
      setTimeout(endGame, messageTimer * 1e3);
    } else {
      setTimeout(startRound, messageTimer * 1e3);
    }
  }
  inputElement.value = "";
}
function endGame() {
  currentGameState = 2 /* GAME_OVER */;
  inputElement.style.display = "none";
  const bgm = assets.sounds.get("bgm");
  if (bgm) {
    bgm.pause();
    bgm.currentTime = 0;
  }
}
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}
function handleGlobalKeyDown(event) {
  if (event.key === "Enter") {
    if (currentGameState === 0 /* TITLE */) {
      startGame();
    } else if (currentGameState === 2 /* GAME_OVER */) {
      startGame();
    }
  }
}
function handleInputKeyDown(event) {
  if (event.key === "Enter" && currentGameState === 1 /* PLAYING */) {
    checkGuess();
  }
}
function update(deltaTime) {
  const deltaTimeSeconds = deltaTime / 1e3;
  if (currentGameState === 1 /* PLAYING */) {
    if (messageTimer <= 0) {
      timeRemaining -= deltaTime;
      if (timeRemaining <= 0) {
        timeRemaining = 0;
        lives--;
        message = "Time's Up!";
        messageColor = gameData.gameSettings.messageTimeUpColor;
        assets.sounds.get("timeout")?.play();
        messageTimer = gameData.gameSettings.messageDisplayDuration;
        inputElement.value = "";
        if (lives <= 0) {
          setTimeout(endGame, messageTimer * 1e3);
        } else {
          setTimeout(startRound, messageTimer * 1e3);
        }
      }
    }
  }
  if (messageTimer > 0) {
    messageTimer -= deltaTimeSeconds;
    if (messageTimer <= 0) {
      message = null;
    }
  }
}
function render() {
  if (!ctx || !gameData) return;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = gameData.gameSettings.backgroundColor;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = gameData.gameSettings.textColor;
  ctx.font = gameData.gameSettings.fontSizeUI + " " + gameData.gameSettings.fontFamily;
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  if (currentGameState === 0 /* TITLE */) {
    ctx.font = gameData.gameSettings.fontSizeTitle + " " + gameData.gameSettings.fontFamily;
    const lines = gameData.gameSettings.titleScreenText.split("\n");
    const fontSizeNum = parseInt(gameData.gameSettings.fontSizeTitle, 10);
    const lineHeight = fontSizeNum;
    const totalTextHeight = (lines.length - 1) * lineHeight;
    let currentY = canvas.height / 2 - totalTextHeight / 2;
    lines.forEach((line) => {
      ctx.fillText(line.trim(), canvas.width / 2, currentY);
      currentY += lineHeight;
    });
  } else if (currentGameState === 1 /* PLAYING */) {
    if (currentCelebrityImage) {
      const displayWidth = gameData.gameSettings.celebrityImageDisplayWidth;
      const displayHeight = gameData.gameSettings.celebrityImageDisplayHeight;
      const x = (canvas.width - displayWidth) / 2;
      const y = canvas.height / 2 - displayHeight / 2 - 50;
      ctx.drawImage(currentCelebrityImage, x, y, displayWidth, displayHeight);
    }
    ctx.font = gameData.gameSettings.fontSizeUI + " " + gameData.gameSettings.fontFamily;
    ctx.fillText(`Time: ${Math.max(0, Math.ceil(timeRemaining / 1e3))}`, canvas.width / 2, gameData.gameSettings.uiTopY);
    ctx.fillText(`Lives: ${lives}`, canvas.width - 100, gameData.gameSettings.uiTopY);
    ctx.fillText(`Score: ${score}`, 100, gameData.gameSettings.uiTopY);
    if (message) {
      ctx.fillStyle = messageColor;
      ctx.font = gameData.gameSettings.fontSizeMessage + " " + gameData.gameSettings.fontFamily;
      const inputBoxTopY = canvas.height - gameData.gameSettings.inputBoxBottomMargin - gameData.gameSettings.inputBoxHeight;
      const messageY = inputBoxTopY - 20;
      ctx.fillText(message, canvas.width / 2, messageY);
    }
  } else if (currentGameState === 2 /* GAME_OVER */) {
    ctx.font = gameData.gameSettings.fontSizeTitle + " " + gameData.gameSettings.fontFamily;
    ctx.fillText(gameData.gameSettings.gameOverScreenText, canvas.width / 2, canvas.height / 2 - 50);
    ctx.font = gameData.gameSettings.fontSizeUI + " " + gameData.gameSettings.fontFamily;
    ctx.fillText(`Final Score: ${score}`, canvas.width / 2, canvas.height / 2 + 10);
    ctx.fillText("Press Enter to Restart", canvas.width / 2, canvas.height / 2 + 70);
  }
}
function gameLoop(currentTime) {
  const deltaTime = currentTime - lastFrameTime;
  lastFrameTime = currentTime;
  update(deltaTime);
  render();
  requestAnimationFrame(gameLoop);
}
window.onload = async () => {
  try {
    const response = await fetch("data.json");
    gameData = await response.json();
    await loadAssets();
    initGame();
    window.addEventListener("resize", positionInputBox);
    positionInputBox();
  } catch (error) {
    console.error("Failed to load game data or assets:", error);
    if (ctx && canvas) {
      ctx.fillStyle = "red";
      ctx.font = "30px Arial";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillText("Error loading game. Check console for details.", canvas.width / 2, canvas.height / 2);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiZ2FtZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gZ2FtZS50c1xyXG5cclxuLy8gMS4gSFRNTCBDYW52YXMgYW5kIENvbnRleHQgc2V0dXBcclxubGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lQ2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbi8vIEZhbGxiYWNrL2Vycm9yIGhhbmRsaW5nIGlmIGNhbnZhcyBlbGVtZW50IGlzIG5vdCBmb3VuZFxyXG5pZiAoIWNhbnZhcykge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkNhbnZhcyBlbGVtZW50IHdpdGggSUQgJ2dhbWVDYW52YXMnIG5vdCBmb3VuZC4gQ3JlYXRpbmcgYSBkZWZhdWx0IG9uZS5cIik7XHJcbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcclxuICAgIGNvbnN0IG5ld0NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgbmV3Q2FudmFzLmlkID0gJ2dhbWVDYW52YXMnO1xyXG4gICAgYm9keS5hcHBlbmRDaGlsZChuZXdDYW52YXMpO1xyXG4gICAgLy8gU2V0IGRlZmF1bHQgZGltZW5zaW9ucyBmb3Igc2FmZXR5IGJlZm9yZSBnYW1lRGF0YSBpcyBsb2FkZWRcclxuICAgIG5ld0NhbnZhcy53aWR0aCA9IDgwMDtcclxuICAgIG5ld0NhbnZhcy5oZWlnaHQgPSA2MDA7XHJcbiAgICBjYW52YXMgPSBuZXdDYW52YXM7IC8vIFVwZGF0ZSBjYW52YXMgcmVmZXJlbmNlXHJcbn1cclxuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5pZiAoIWN0eCkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBnZXQgMkQgcmVuZGVyaW5nIGNvbnRleHQgZm9yIGNhbnZhcy4gWW91ciBicm93c2VyIG1heSBub3Qgc3VwcG9ydCBIVE1MNSBDYW52YXMuXCIpO1xyXG4gICAgLy8gUG90ZW50aWFsbHkgZGlzcGxheSBhIHVzZXItZnJpZW5kbHkgZXJyb3IgbWVzc2FnZSBvbiB0aGUgcGFnZVxyXG59XHJcblxyXG5cclxuLy8gMi4gR2xvYmFsIEdhbWUgU3RhdGUgVmFyaWFibGVzIGFuZCBUeXBlc1xyXG5lbnVtIEdhbWVTdGF0ZSB7XHJcbiAgICBUSVRMRSxcclxuICAgIFBMQVlJTkcsXHJcbiAgICBHQU1FX09WRVJcclxufVxyXG5cclxubGV0IGN1cnJlbnRHYW1lU3RhdGU6IEdhbWVTdGF0ZSA9IEdhbWVTdGF0ZS5USVRMRTtcclxubGV0IGdhbWVEYXRhOiBhbnk7IC8vIFdpbGwgaG9sZCB0aGUgcGFyc2VkIGRhdGEgZnJvbSBkYXRhLmpzb25cclxubGV0IGFzc2V0czogeyBpbWFnZXM6IE1hcDxzdHJpbmcsIEhUTUxJbWFnZUVsZW1lbnQ+LCBzb3VuZHM6IE1hcDxzdHJpbmcsIEhUTUxBdWRpb0VsZW1lbnQ+IH0gPSB7IGltYWdlczogbmV3IE1hcCgpLCBzb3VuZHM6IG5ldyBNYXAoKSB9O1xyXG5cclxubGV0IGN1cnJlbnRDZWxlYnJpdGllczogYW55W10gPSBbXTsgLy8gU2h1ZmZsZWQgbGlzdCBvZiBjZWxlYnJpdGllcyBmb3Igcm91bmRzXHJcbmxldCBjdXJyZW50Q2VsZWJyaXR5OiBhbnkgfCBudWxsID0gbnVsbDsgLy8gVGhlIGNlbGVicml0eSBmb3IgdGhlIGN1cnJlbnQgcm91bmRcclxubGV0IGN1cnJlbnRDZWxlYnJpdHlJbWFnZTogSFRNTEltYWdlRWxlbWVudCB8IG51bGwgPSBudWxsOyAvLyBUaGUgbG9hZGVkIGltYWdlIGZvciB0aGUgY3VycmVudCBjZWxlYnJpdHlcclxuXHJcbmxldCB0aW1lUmVtYWluaW5nOiBudW1iZXIgPSAwOyAvLyBUaW1lIGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlIGN1cnJlbnQgcm91bmRcclxubGV0IGxpdmVzOiBudW1iZXIgPSAwO1xyXG5sZXQgc2NvcmU6IG51bWJlciA9IDA7XHJcblxyXG5sZXQgbWVzc2FnZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7IC8vIE1lc3NhZ2UgbGlrZSBcIkNvcnJlY3QhXCIsIFwiV3JvbmchXCIsIFwiVGltZSdzIFVwIVwiXHJcbmxldCBtZXNzYWdlQ29sb3I6IHN0cmluZyA9ICcnO1xyXG5sZXQgbWVzc2FnZVRpbWVyOiBudW1iZXIgPSAwOyAvLyBIb3cgbG9uZyB0byBkaXNwbGF5IHRoZSBtZXNzYWdlIChpbiBzZWNvbmRzKVxyXG5cclxubGV0IGxhc3RGcmFtZVRpbWU6IG51bWJlciA9IDA7IC8vIEZvciBkZWx0YSB0aW1lIGNhbGN1bGF0aW9uIGluIHRoZSBnYW1lIGxvb3BcclxuXHJcbi8vIDMuIElucHV0IEVsZW1lbnQgKGR5bmFtaWNhbGx5IGNyZWF0ZWQpXHJcbmxldCBpbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4vLyA0LiBBc3NldCBMb2FkaW5nIEZ1bmN0aW9uXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRBc3NldHMoKSB7XHJcbiAgICBjb25zdCBsb2FkSW1hZ2VQcm9taXNlcyA9IGdhbWVEYXRhLmFzc2V0cy5pbWFnZXMubWFwKChpbWdBc3NldDogYW55KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgIGltZy5zcmMgPSBpbWdBc3NldC5wYXRoO1xyXG4gICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXNzZXRzLmltYWdlcy5zZXQoaW1nQXNzZXQubmFtZSwgaW1nKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBpbWFnZTogJHtpbWdBc3NldC5wYXRofWApO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGBGYWlsZWQgdG8gbG9hZCBpbWFnZTogJHtpbWdBc3NldC5wYXRofWApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgbG9hZFNvdW5kUHJvbWlzZXMgPSBnYW1lRGF0YS5hc3NldHMuc291bmRzLm1hcCgoc25kQXNzZXQ6IGFueSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhzbmRBc3NldC5wYXRoKTtcclxuICAgICAgICAgICAgYXVkaW8udm9sdW1lID0gc25kQXNzZXQudm9sdW1lICE9PSB1bmRlZmluZWQgPyBzbmRBc3NldC52b2x1bWUgOiAxLjA7XHJcbiAgICAgICAgICAgIGF1ZGlvLmxvb3AgPSBzbmRBc3NldC5sb29wIHx8IGZhbHNlO1xyXG4gICAgICAgICAgICBhc3NldHMuc291bmRzLnNldChzbmRBc3NldC5uYW1lLCBhdWRpbyk7XHJcbiAgICAgICAgICAgIC8vIEZvciBzaW1wbGljaXR5LCB3ZSByZXNvbHZlIGltbWVkaWF0ZWx5IGFmdGVyIGNyZWF0aW5nIHRoZSBBdWRpbyBvYmplY3QuXHJcbiAgICAgICAgICAgIC8vIEZvciBtb3JlIHJvYnVzdCBnYW1lcywgJ2NhbnBsYXl0aHJvdWdoJyBldmVudCBtaWdodCBiZSB1c2VkIGZvciBzb3VuZHMuXHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IFByb21pc2UuYWxsKFsuLi5sb2FkSW1hZ2VQcm9taXNlcywgLi4ubG9hZFNvdW5kUHJvbWlzZXNdKTtcclxuICAgIGNvbnNvbGUubG9nKCdBbGwgYXNzZXRzIGxvYWRlZC4nKTtcclxufVxyXG5cclxuLy8gNS4gR2FtZSBMb2dpYyBGdW5jdGlvbnNcclxuZnVuY3Rpb24gaW5pdEdhbWUoKSB7XHJcbiAgICAvLyBTZXQgY2FudmFzIGRpbWVuc2lvbnMgYmFzZWQgb24gbG9hZGVkIGdhbWVEYXRhXHJcbiAgICBjYW52YXMud2lkdGggPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuY2FudmFzV2lkdGg7XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmNhbnZhc0hlaWdodDtcclxuXHJcbiAgICAvLyBDcmVhdGUgYW5kIHBvc2l0aW9uIGlucHV0IGVsZW1lbnRcclxuICAgIGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICBpbnB1dEVsZW1lbnQudHlwZSA9ICd0ZXh0JztcclxuICAgIGlucHV0RWxlbWVudC5wbGFjZWhvbGRlciA9ICdHdWVzcyB0aGUgY2VsZWJyaXR5ISc7XHJcbiAgICBpbnB1dEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOyAvLyBQb3NpdGlvbiBhYnNvbHV0ZWx5IHJlbGF0aXZlIHRvIHRoZSBib2R5XHJcbiAgICBpbnB1dEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSGlkZGVuIGluaXRpYWxseVxyXG4gICAgaW5wdXRFbGVtZW50LnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94JzsgLy8gSW5jbHVkZSBwYWRkaW5nIGFuZCBib3JkZXIgaW4gd2lkdGgvaGVpZ2h0IGNhbGN1bGF0aW9uXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlucHV0RWxlbWVudCk7XHJcblxyXG4gICAgcG9zaXRpb25JbnB1dEJveCgpOyAvLyBDYWxsIHRvIHNldCBpbml0aWFsIHBvc2l0aW9uIGFuZCBzdHlsZVxyXG5cclxuICAgIC8vIEV2ZW50IExpc3RlbmVyc1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUdsb2JhbEtleURvd24pOyAvLyBGb3IgVGl0bGUvR2FtZSBPdmVyIHNjcmVlbiBuYXZpZ2F0aW9uXHJcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUlucHV0S2V5RG93bik7IC8vIEZvciBzdWJtaXR0aW5nIGd1ZXNzZXMgaW4gUExBWUlORyBzdGF0ZVxyXG5cclxuICAgIC8vIFN0YXJ0IHRoZSBnYW1lIGxvb3BcclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XHJcbn1cclxuXHJcbi8vIER5bmFtaWNhbGx5IHBvc2l0aW9uIHRoZSBpbnB1dCBib3ggcmVsYXRpdmUgdG8gdGhlIGNhbnZhc1xyXG5mdW5jdGlvbiBwb3NpdGlvbklucHV0Qm94KCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQgfHwgIWdhbWVEYXRhIHx8ICFjYW52YXMpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBjYW52YXNSZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyAvLyBHZXQgY2FudmFzIHBvc2l0aW9uIGFuZCBzaXplIG9uIHNjcmVlblxyXG4gICAgY29uc3QgaW5wdXRCb3hXaWR0aCA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5pbnB1dEJveFdpZHRoO1xyXG4gICAgY29uc3QgaW5wdXRCb3hIZWlnaHQgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuaW5wdXRCb3hIZWlnaHQ7XHJcbiAgICBjb25zdCBpbnB1dEJveEJvdHRvbU1hcmdpbiA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5pbnB1dEJveEJvdHRvbU1hcmdpbjtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgcG9zaXRpb246IGNlbnRlciBob3Jpem9udGFsbHksIHBvc2l0aW9uIGZyb20gYm90dG9tIHdpdGggbWFyZ2luXHJcbiAgICBpbnB1dEVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHtpbnB1dEJveFdpZHRofXB4YDtcclxuICAgIGlucHV0RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHtpbnB1dEJveEhlaWdodH1weGA7XHJcbiAgICBpbnB1dEVsZW1lbnQuc3R5bGUubGVmdCA9IGAke2NhbnZhc1JlY3QubGVmdCArIChjYW52YXNSZWN0LndpZHRoIC0gaW5wdXRCb3hXaWR0aCkgLyAyfXB4YDtcclxuICAgIGlucHV0RWxlbWVudC5zdHlsZS50b3AgPSBgJHtjYW52YXNSZWN0LnRvcCArIGNhbnZhc1JlY3QuaGVpZ2h0IC0gaW5wdXRCb3hIZWlnaHQgLSBpbnB1dEJveEJvdHRvbU1hcmdpbn1weGA7XHJcbiAgICBpbnB1dEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udFNpemVVSTtcclxuICAgIGlucHV0RWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmZvbnRGYW1pbHk7XHJcbiAgICBpbnB1dEVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICc1cHggMTBweCc7XHJcbiAgICBpbnB1dEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMzMzMnO1xyXG4gICAgaW5wdXRFbGVtZW50LnN0eWxlLmNvbG9yID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnRleHRDb2xvcjtcclxuICAgIGlucHV0RWxlbWVudC5zdHlsZS5ib3JkZXIgPSAnMnB4IHNvbGlkICM1NTUnO1xyXG4gICAgaW5wdXRFbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1cHgnO1xyXG4gICAgaW5wdXRFbGVtZW50LnN0eWxlLm91dGxpbmUgPSAnbm9uZSc7IC8vIFJlbW92ZSBkZWZhdWx0IGZvY3VzIG91dGxpbmVcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnRHYW1lKCkge1xyXG4gICAgbGl2ZXMgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuaW5pdGlhbExpdmVzO1xyXG4gICAgc2NvcmUgPSAwO1xyXG4gICAgLy8gQ3JlYXRlIGEgc2h1ZmZsZWQgY29weSBvZiBjZWxlYnJpdGllcyBmb3IgZWFjaCBuZXcgZ2FtZVxyXG4gICAgY3VycmVudENlbGVicml0aWVzID0gWy4uLmdhbWVEYXRhLmNlbGVicml0aWVzXTtcclxuICAgIHNodWZmbGVBcnJheShjdXJyZW50Q2VsZWJyaXRpZXMpO1xyXG4gICAgY3VycmVudEdhbWVTdGF0ZSA9IEdhbWVTdGF0ZS5QTEFZSU5HO1xyXG4gICAgaW5wdXRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyAvLyBTaG93IHRoZSBpbnB1dCBib3hcclxuICAgIGlucHV0RWxlbWVudC52YWx1ZSA9ICcnO1xyXG4gICAgaW5wdXRFbGVtZW50LmZvY3VzKCk7IC8vIEZvY3VzIGlucHV0IGZvciBpbW1lZGlhdGUgdHlwaW5nXHJcbiAgICBzdGFydFJvdW5kKCk7IC8vIEJlZ2luIHRoZSBmaXJzdCByb3VuZFxyXG5cclxuICAgIC8vIFBsYXkgQkdNLCBoYW5kbGluZyBwb3RlbnRpYWwgYXV0b3BsYXkgcG9saWNpZXNcclxuICAgIGNvbnN0IGJnbSA9IGFzc2V0cy5zb3VuZHMuZ2V0KCdiZ20nKTtcclxuICAgIGlmIChiZ20pIHtcclxuICAgICAgICBiZ20uY3VycmVudFRpbWUgPSAwOyAvLyBTdGFydCBCR00gZnJvbSB0aGUgYmVnaW5uaW5nXHJcbiAgICAgICAgYmdtLnBsYXkoKS5jYXRjaChlID0+IGNvbnNvbGUubG9nKFwiQkdNIGF1dG9wbGF5IHByZXZlbnRlZDpcIiwgZSkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzdGFydFJvdW5kKCkge1xyXG4gICAgaWYgKGN1cnJlbnRDZWxlYnJpdGllcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAvLyBJZiBhbGwgY2VsZWJyaXRpZXMgaGF2ZSBiZWVuIGd1ZXNzZWQsIHJlc2h1ZmZsZSBhbmQgY29udGludWVcclxuICAgICAgICBjdXJyZW50Q2VsZWJyaXRpZXMgPSBbLi4uZ2FtZURhdGEuY2VsZWJyaXRpZXNdO1xyXG4gICAgICAgIHNodWZmbGVBcnJheShjdXJyZW50Q2VsZWJyaXRpZXMpO1xyXG4gICAgfVxyXG4gICAgY3VycmVudENlbGVicml0eSA9IGN1cnJlbnRDZWxlYnJpdGllcy5wb3AoKTsgLy8gR2V0IHRoZSBuZXh0IGNlbGVicml0eSBmcm9tIHRoZSBzaHVmZmxlZCBsaXN0XHJcbiAgICBjdXJyZW50Q2VsZWJyaXR5SW1hZ2UgPSBhc3NldHMuaW1hZ2VzLmdldChjdXJyZW50Q2VsZWJyaXR5LmltYWdlKSB8fCBudWxsOyAvLyBMb2FkIHRoZSBjb3JyZXNwb25kaW5nIGltYWdlXHJcblxyXG4gICAgdGltZVJlbWFpbmluZyA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5yb3VuZFRpbWVTZWNvbmRzICogMTAwMDsgLy8gUmVzZXQgdGltZXIgZm9yIHRoZSBuZXcgcm91bmRcclxuICAgIG1lc3NhZ2UgPSBudWxsOyAvLyBDbGVhciBhbnkgcHJldmlvdXMgbWVzc2FnZVxyXG4gICAgaW5wdXRFbGVtZW50LnZhbHVlID0gJyc7IC8vIENsZWFyIHRoZSBpbnB1dCBmaWVsZFxyXG4gICAgaW5wdXRFbGVtZW50LmZvY3VzKCk7IC8vIFJlLWZvY3VzIHRoZSBpbnB1dCBmaWVsZFxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0d1ZXNzKCkge1xyXG4gICAgaWYgKCFjdXJyZW50Q2VsZWJyaXR5IHx8ICFpbnB1dEVsZW1lbnQpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBndWVzcyA9IGlucHV0RWxlbWVudC52YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IGNvcnJlY3ROYW1lID0gY3VycmVudENlbGVicml0eS5uYW1lLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgaWYgKGd1ZXNzID09PSBjb3JyZWN0TmFtZSkge1xyXG4gICAgICAgIHNjb3JlICs9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5zY29yZVBlckNvcnJlY3Q7XHJcbiAgICAgICAgbWVzc2FnZSA9ICdDb3JyZWN0ISc7XHJcbiAgICAgICAgbWVzc2FnZUNvbG9yID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLm1lc3NhZ2VDb3JyZWN0Q29sb3I7XHJcbiAgICAgICAgYXNzZXRzLnNvdW5kcy5nZXQoJ2NvcnJlY3QnKT8ucGxheSgpO1xyXG4gICAgICAgIG1lc3NhZ2VUaW1lciA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5tZXNzYWdlRGlzcGxheUR1cmF0aW9uO1xyXG4gICAgICAgIHNldFRpbWVvdXQoc3RhcnRSb3VuZCwgbWVzc2FnZVRpbWVyICogMTAwMCk7IC8vIFN0YXJ0IG5leHQgcm91bmQgYWZ0ZXIgbWVzc2FnZSBkaXNwbGF5XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxpdmVzLS07XHJcbiAgICAgICAgbWVzc2FnZSA9ICdXcm9uZyEnO1xyXG4gICAgICAgIG1lc3NhZ2VDb2xvciA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5tZXNzYWdlV3JvbmdDb2xvcjtcclxuICAgICAgICBhc3NldHMuc291bmRzLmdldCgnd3JvbmcnKT8ucGxheSgpO1xyXG4gICAgICAgIG1lc3NhZ2VUaW1lciA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5tZXNzYWdlRGlzcGxheUR1cmF0aW9uO1xyXG4gICAgICAgIGlmIChsaXZlcyA8PSAwKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZW5kR2FtZSwgbWVzc2FnZVRpbWVyICogMTAwMCk7IC8vIEdhbWUgb3ZlciBpZiBubyBsaXZlcyBsZWZ0XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChzdGFydFJvdW5kLCBtZXNzYWdlVGltZXIgKiAxMDAwKTsgLy8gTmV4dCByb3VuZCBpZiBsaXZlcyByZW1haW5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSAnJzsgLy8gQ2xlYXIgaW5wdXQgYWZ0ZXIgZ3Vlc3MsIHJlZ2FyZGxlc3Mgb2YgY29ycmVjdG5lc3NcclxufVxyXG5cclxuZnVuY3Rpb24gZW5kR2FtZSgpIHtcclxuICAgIGN1cnJlbnRHYW1lU3RhdGUgPSBHYW1lU3RhdGUuR0FNRV9PVkVSO1xyXG4gICAgaW5wdXRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEhpZGUgdGhlIGlucHV0IGJveFxyXG4gICAgLy8gUGF1c2UgYW5kIHJlc2V0IEJHTVxyXG4gICAgY29uc3QgYmdtID0gYXNzZXRzLnNvdW5kcy5nZXQoJ2JnbScpO1xyXG4gICAgaWYgKGJnbSkge1xyXG4gICAgICAgIGJnbS5wYXVzZSgpO1xyXG4gICAgICAgIGJnbS5jdXJyZW50VGltZSA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gc2h1ZmZsZSBhbiBhcnJheSAoRmlzaGVyLVlhdGVzIGFsZ29yaXRobSlcclxuZnVuY3Rpb24gc2h1ZmZsZUFycmF5PFQ+KGFycmF5OiBUW10pIHtcclxuICAgIGZvciAobGV0IGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XHJcbiAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xyXG4gICAgICAgIFthcnJheVtpXSwgYXJyYXlbal1dID0gW2FycmF5W2pdLCBhcnJheVtpXV07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIDYuIEV2ZW50IEhhbmRsZXJzXHJcbmZ1bmN0aW9uIGhhbmRsZUdsb2JhbEtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICBpZiAoY3VycmVudEdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLlRJVExFKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0R2FtZSgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLkdBTUVfT1ZFUikge1xyXG4gICAgICAgICAgICBzdGFydEdhbWUoKTsgLy8gUHJlc3MgRW50ZXIgdG8gcmVzdGFydCBmcm9tIGdhbWUgb3ZlciBzY3JlZW5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUlucHV0S2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJyAmJiBjdXJyZW50R2FtZVN0YXRlID09PSBHYW1lU3RhdGUuUExBWUlORykge1xyXG4gICAgICAgIGNoZWNrR3Vlc3MoKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gNy4gVXBkYXRlIGZ1bmN0aW9uIChnYW1lIGxvZ2ljIHBlciBmcmFtZSlcclxuZnVuY3Rpb24gdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKSB7XHJcbiAgICAvLyBDb252ZXJ0IGRlbHRhVGltZSBmcm9tIG1pbGxpc2Vjb25kcyB0byBzZWNvbmRzIGZvciBtZXNzYWdlVGltZXIgYW5kIG90aGVyIHRpbWUgY2FsY3VsYXRpb25zXHJcbiAgICBjb25zdCBkZWx0YVRpbWVTZWNvbmRzID0gZGVsdGFUaW1lIC8gMTAwMDtcclxuXHJcbiAgICBpZiAoY3VycmVudEdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLlBMQVlJTkcpIHtcclxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aW1lIGFuZCBjaGVjayBmb3IgdGltZW91dCBpZiBubyBtZXNzYWdlIGlzIGN1cnJlbnRseSBkaXNwbGF5ZWQuXHJcbiAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgdGltZS1vdXQgbG9naWMgKGxpdmVzIGRlZHVjdGlvbiwgbWVzc2FnZSBzZXR0aW5nKSBmcm9tIGZpcmluZ1xyXG4gICAgICAgIC8vIG11bHRpcGxlIHRpbWVzIGR1cmluZyB0aGUgc2hvcnQgcGVyaW9kIHdoZW4gYSBtZXNzYWdlIGlzIGFscmVhZHkgYmVpbmcgZGlzcGxheWVkXHJcbiAgICAgICAgLy8gZHVlIHRvIGEgZ3Vlc3MgKGNvcnJlY3Qvd3JvbmcpIG9yIGEgcHJldmlvdXMgdGltZS1vdXQgZXZlbnQuXHJcbiAgICAgICAgaWYgKG1lc3NhZ2VUaW1lciA8PSAwKSB7XHJcbiAgICAgICAgICAgIHRpbWVSZW1haW5pbmcgLT0gZGVsdGFUaW1lOyAvLyBTdWJ0cmFjdCBhY3R1YWwgdGltZSBwYXNzZWRcclxuICAgICAgICAgICAgaWYgKHRpbWVSZW1haW5pbmcgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGltZVJlbWFpbmluZyA9IDA7IC8vIEVuc3VyZSB0aW1lciBkb2Vzbid0IGdvIG5lZ2F0aXZlIGZvciBkaXNwbGF5IHB1cnBvc2VzXHJcbiAgICAgICAgICAgICAgICBsaXZlcy0tO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiVGltZSdzIFVwIVwiO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUNvbG9yID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLm1lc3NhZ2VUaW1lVXBDb2xvcjtcclxuICAgICAgICAgICAgICAgIGFzc2V0cy5zb3VuZHMuZ2V0KCd0aW1lb3V0Jyk/LnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUaW1lciA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5tZXNzYWdlRGlzcGxheUR1cmF0aW9uOyAvLyBUaGlzIHRpbWVyIHdpbGwgbm93IHByZXZlbnQgZnVydGhlciB1cGRhdGVzIGZvciBhIGJpdFxyXG4gICAgICAgICAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gJyc7IC8vIENsZWFyIGlucHV0IG9uIHRpbWVvdXRcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGl2ZXMgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZW5kR2FtZSwgbWVzc2FnZVRpbWVyICogMTAwMCk7IC8vIEdhbWUgb3ZlclxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHN0YXJ0Um91bmQsIG1lc3NhZ2VUaW1lciAqIDEwMDApOyAvLyBOZXh0IHJvdW5kXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIG1lc3NhZ2UgZGlzcGxheSB0aW1lclxyXG4gICAgaWYgKG1lc3NhZ2VUaW1lciA+IDApIHtcclxuICAgICAgICBtZXNzYWdlVGltZXIgLT0gZGVsdGFUaW1lU2Vjb25kcztcclxuICAgICAgICBpZiAobWVzc2FnZVRpbWVyIDw9IDApIHtcclxuICAgICAgICAgICAgbWVzc2FnZSA9IG51bGw7IC8vIENsZWFyIG1lc3NhZ2Ugd2hlbiB0aW1lciBydW5zIG91dFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gOC4gUmVuZGVyIGdhbWUgZWxlbWVudHNcclxuLy8gVGhpcyBpcyB0aGUgb3JpZ2luYWwgcmVuZGVyIGZ1bmN0aW9uIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLCBub3cgaW50ZWdyYXRlZCBpbnRvIHRoZSBnYW1lIGxpZmVjeWNsZVxyXG5mdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgICBpZiAoIWN0eCB8fCAhZ2FtZURhdGEpIHJldHVybjsgLy8gRW5zdXJlIGNvbnRleHQgYW5kIGdhbWVEYXRhIGFyZSBhdmFpbGFibGVcclxuXHJcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7IC8vIENsZWFyIHRoZSBlbnRpcmUgY2FudmFzXHJcbiAgICBjdHguZmlsbFN0eWxlID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmJhY2tncm91bmRDb2xvcjtcclxuICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOyAvLyBEcmF3IGJhY2tncm91bmRcclxuXHJcbiAgICBjdHguZmlsbFN0eWxlID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnRleHRDb2xvcjtcclxuICAgIGN0eC5mb250ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmZvbnRTaXplVUkgKyAnICcgKyBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udEZhbWlseTtcclxuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcclxuXHJcbiAgICBpZiAoY3VycmVudEdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLlRJVExFKSB7XHJcbiAgICAgICAgY3R4LmZvbnQgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udFNpemVUaXRsZSArICcgJyArIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5mb250RmFtaWx5O1xyXG4gICAgICAgIC8vIFNwbGl0IHRoZSB0ZXh0IGJ5IHRoZSBuZXdsaW5lIGNoYXJhY3RlciB0byByZW5kZXIgbXVsdGlwbGUgbGluZXNcclxuICAgICAgICBjb25zdCBsaW5lcyA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy50aXRsZVNjcmVlblRleHQuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIGNvbnN0IGZvbnRTaXplTnVtID0gcGFyc2VJbnQoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmZvbnRTaXplVGl0bGUsIDEwKTsgLy8gRXh0cmFjdCBmb250IHNpemUgbnVtYmVyIChlLmcuLCA0OCBmcm9tIFwiNDhweFwiKVxyXG4gICAgICAgIGNvbnN0IGxpbmVIZWlnaHQgPSBmb250U2l6ZU51bTsgLy8gVXNlIGZvbnQgc2l6ZSBkaXJlY3RseSBmb3IgbGluZSBzcGFjaW5nXHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgdG90YWwgaGVpZ2h0IG9mIHRoZSB0ZXh0IGJsb2NrIHRvIGNlbnRlciBpdCB2ZXJ0aWNhbGx5XHJcbiAgICAgICAgY29uc3QgdG90YWxUZXh0SGVpZ2h0ID0gKGxpbmVzLmxlbmd0aCAtIDEpICogbGluZUhlaWdodDtcclxuICAgICAgICBsZXQgY3VycmVudFkgPSBjYW52YXMuaGVpZ2h0IC8gMiAtIHRvdGFsVGV4dEhlaWdodCAvIDI7XHJcblxyXG4gICAgICAgIGxpbmVzLmZvckVhY2goKGxpbmU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQobGluZS50cmltKCksIGNhbnZhcy53aWR0aCAvIDIsIGN1cnJlbnRZKTtcclxuICAgICAgICAgICAgY3VycmVudFkgKz0gbGluZUhlaWdodDtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAoY3VycmVudEdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLlBMQVlJTkcpIHtcclxuICAgICAgICAvLyBEcmF3IGNlbGVicml0eSBpbWFnZVxyXG4gICAgICAgIGlmIChjdXJyZW50Q2VsZWJyaXR5SW1hZ2UpIHtcclxuICAgICAgICAgICAgY29uc3QgZGlzcGxheVdpZHRoID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmNlbGVicml0eUltYWdlRGlzcGxheVdpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5SGVpZ2h0ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmNlbGVicml0eUltYWdlRGlzcGxheUhlaWdodDtcclxuICAgICAgICAgICAgY29uc3QgeCA9IChjYW52YXMud2lkdGggLSBkaXNwbGF5V2lkdGgpIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgeSA9IChjYW52YXMuaGVpZ2h0IC8gMikgLSBkaXNwbGF5SGVpZ2h0IC8gMiAtIDUwOyAvLyBQb3NpdGlvbiBhYm92ZSBjZW50ZXIgb2YgY2FudmFzXHJcblxyXG4gICAgICAgICAgICAvLyBEcmF3IGltYWdlLCBzY2FsaW5nIGl0IHRvIHRoZSBzcGVjaWZpZWQgZGlzcGxheSBkaW1lbnNpb25zXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoY3VycmVudENlbGVicml0eUltYWdlLCB4LCB5LCBkaXNwbGF5V2lkdGgsIGRpc3BsYXlIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRHJhdyB0aW1lclxyXG4gICAgICAgIGN0eC5mb250ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmZvbnRTaXplVUkgKyAnICcgKyBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udEZhbWlseTtcclxuICAgICAgICAvLyBFbnN1cmUgdGltZSByZW1haW5pbmcgaXMgbm90IG5lZ2F0aXZlIGJlZm9yZSBkaXNwbGF5aW5nXHJcbiAgICAgICAgY3R4LmZpbGxUZXh0KGBUaW1lOiAke01hdGgubWF4KDAsIE1hdGguY2VpbCh0aW1lUmVtYWluaW5nIC8gMTAwMCkpfWAsIGNhbnZhcy53aWR0aCAvIDIsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy51aVRvcFkpO1xyXG5cclxuICAgICAgICAvLyBEcmF3IGxpdmVzXHJcbiAgICAgICAgY3R4LmZpbGxUZXh0KGBMaXZlczogJHtsaXZlc31gLCBjYW52YXMud2lkdGggLSAxMDAsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy51aVRvcFkpO1xyXG5cclxuICAgICAgICAvLyBEcmF3IHNjb3JlXHJcbiAgICAgICAgY3R4LmZpbGxUZXh0KGBTY29yZTogJHtzY29yZX1gLCAxMDAsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy51aVRvcFkpO1xyXG5cclxuICAgICAgICAvLyBEcmF3IG1lc3NhZ2UgKENvcnJlY3QvV3JvbmcvVGltZSdzIFVwKVxyXG4gICAgICAgIGlmIChtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBtZXNzYWdlQ29sb3I7XHJcbiAgICAgICAgICAgIGN0eC5mb250ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmZvbnRTaXplTWVzc2FnZSArICcgJyArIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5mb250RmFtaWx5O1xyXG4gICAgICAgICAgICAvLyBQb3NpdGlvbiBtZXNzYWdlIGFib3ZlIHRoZSBpbnB1dCBib3ggYXJlYSAoaW5wdXQgYm94IGlzIHBvc2l0aW9uZWQgb3V0c2lkZSBjYW52YXMpXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0Qm94VG9wWSA9IGNhbnZhcy5oZWlnaHQgLSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuaW5wdXRCb3hCb3R0b21NYXJnaW4gLSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuaW5wdXRCb3hIZWlnaHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VZID0gaW5wdXRCb3hUb3BZIC0gMjA7IC8vIDIwcHggbWFyZ2luIGFib3ZlIHRoZSB2aXJ0dWFsIGlucHV0IGJveCBwb3NpdGlvblxyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQobWVzc2FnZSwgY2FudmFzLndpZHRoIC8gMiwgbWVzc2FnZVkpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoY3VycmVudEdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLkdBTUVfT1ZFUikge1xyXG4gICAgICAgIGN0eC5mb250ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmZvbnRTaXplVGl0bGUgKyAnICcgKyBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udEZhbWlseTtcclxuICAgICAgICBjdHguZmlsbFRleHQoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmdhbWVPdmVyU2NyZWVuVGV4dCwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIgLSA1MCk7XHJcbiAgICAgICAgY3R4LmZvbnQgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udFNpemVVSSArICcgJyArIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5mb250RmFtaWx5O1xyXG4gICAgICAgIGN0eC5maWxsVGV4dChgRmluYWwgU2NvcmU6ICR7c2NvcmV9YCwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIgKyAxMCk7XHJcbiAgICAgICAgY3R4LmZpbGxUZXh0KFwiUHJlc3MgRW50ZXIgdG8gUmVzdGFydFwiLCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiArIDcwKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8vIDkuIE1haW4gR2FtZSBMb29wXHJcbmZ1bmN0aW9uIGdhbWVMb29wKGN1cnJlbnRUaW1lOiBudW1iZXIpIHtcclxuICAgIC8vIENhbGN1bGF0ZSBkZWx0YSB0aW1lIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgY29uc3QgZGVsdGFUaW1lID0gY3VycmVudFRpbWUgLSBsYXN0RnJhbWVUaW1lO1xyXG4gICAgbGFzdEZyYW1lVGltZSA9IGN1cnJlbnRUaW1lO1xyXG5cclxuICAgIHVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgcmVuZGVyKCk7XHJcblxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdhbWVMb29wKTsgLy8gUmVxdWVzdCB0aGUgbmV4dCBmcmFtZVxyXG59XHJcblxyXG4vLyAxMC4gSW5pdGlhbCBMb2FkIChmZXRjaCBkYXRhLmpzb24pXHJcbndpbmRvdy5vbmxvYWQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2RhdGEuanNvbicpO1xyXG4gICAgICAgIGdhbWVEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgICAvLyBMb2FkIGFzc2V0cyAoaW1hZ2VzIGFuZCBzb3VuZHMpXHJcbiAgICAgICAgYXdhaXQgbG9hZEFzc2V0cygpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIGdhbWUgZWxlbWVudHMgYW5kIHN0YXRlIGFmdGVyIGRhdGEgYW5kIGFzc2V0cyBhcmUgZnVsbHkgbG9hZGVkXHJcbiAgICAgICAgaW5pdEdhbWUoKTtcclxuICAgICAgICAvLyBSZWNhbGN1bGF0ZSBpbnB1dCBib3ggcG9zaXRpb24gaWYgd2luZG93IHJlc2l6ZWQgb3IgaW5pdGlhbGx5IGxvYWRlZCB3aXRob3V0IGNvcnJlY3QgZGltZW5zaW9uc1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBwb3NpdGlvbklucHV0Qm94KTtcclxuICAgICAgICBwb3NpdGlvbklucHV0Qm94KCk7IC8vIEluaXRpYWwgcG9zaXRpb25pbmcgYWZ0ZXIgY2FudmFzIHNldHVwXHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBnYW1lIGRhdGEgb3IgYXNzZXRzOicsIGVycm9yKTtcclxuICAgICAgICAvLyBEaXNwbGF5IGFuIGVycm9yIG1lc3NhZ2UgdG8gdGhlIHVzZXIgaWYgdGhlIGdhbWUgY2Fubm90IGxvYWRcclxuICAgICAgICBpZiAoY3R4ICYmIGNhbnZhcykge1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JlZCc7XHJcbiAgICAgICAgICAgIGN0eC5mb250ID0gJzMwcHggQXJpYWwnO1xyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCdFcnJvciBsb2FkaW5nIGdhbWUuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuJywgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTsiXSwKICAibWFwcGluZ3MiOiAiQUFHQSxJQUFJLFNBQVMsU0FBUyxlQUFlLFlBQVk7QUFFakQsSUFBSSxDQUFDLFFBQVE7QUFDVCxVQUFRLE1BQU0sd0VBQXdFO0FBQ3RGLFFBQU0sT0FBTyxTQUFTLHFCQUFxQixNQUFNLEVBQUUsQ0FBQztBQUNwRCxRQUFNLFlBQVksU0FBUyxjQUFjLFFBQVE7QUFDakQsWUFBVSxLQUFLO0FBQ2YsT0FBSyxZQUFZLFNBQVM7QUFFMUIsWUFBVSxRQUFRO0FBQ2xCLFlBQVUsU0FBUztBQUNuQixXQUFTO0FBQ2I7QUFDQSxNQUFNLE1BQU0sT0FBTyxXQUFXLElBQUk7QUFDbEMsSUFBSSxDQUFDLEtBQUs7QUFDTixVQUFRLE1BQU0sMkZBQTJGO0FBRTdHO0FBSUEsSUFBSyxZQUFMLGtCQUFLQSxlQUFMO0FBQ0ksRUFBQUEsc0JBQUE7QUFDQSxFQUFBQSxzQkFBQTtBQUNBLEVBQUFBLHNCQUFBO0FBSEMsU0FBQUE7QUFBQSxHQUFBO0FBTUwsSUFBSSxtQkFBOEI7QUFDbEMsSUFBSTtBQUNKLElBQUksU0FBMkYsRUFBRSxRQUFRLG9CQUFJLElBQUksR0FBRyxRQUFRLG9CQUFJLElBQUksRUFBRTtBQUV0SSxJQUFJLHFC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
