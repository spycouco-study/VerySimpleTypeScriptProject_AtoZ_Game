var GameState = /* @__PURE__ */ ((GameState2) => {
  GameState2[GameState2["LOADING"] = 0] = "LOADING";
  GameState2[GameState2["TITLE"] = 1] = "TITLE";
  GameState2[GameState2["INSTRUCTIONS"] = 2] = "INSTRUCTIONS";
  GameState2[GameState2["PLAYING"] = 3] = "PLAYING";
  GameState2[GameState2["GAME_OVER"] = 4] = "GAME_OVER";
  return GameState2;
})(GameState || {});
let canvas;
let ctx;
let gameData;
let currentGameState = 0 /* LOADING */;
const loadedImages = /* @__PURE__ */ new Map();
const loadedSounds = /* @__PURE__ */ new Map();
let clicks = 0;
let timeLeft = 0;
let gameStartTime = 0;
let lastFrameTime = 0;
const rainDrops = [];
let lastRainSpawnTime = 0;
let clickableObject = null;
function getRandomNumber(min, max) {
  return Math.random() * (max - min) + min;
}
function playSound(name, loop = false) {
  const audio = loadedSounds.get(name);
  if (audio) {
    audio.currentTime = 0;
    audio.volume = gameData.assets.sounds.find((s) => s.name === name)?.volume ?? 1;
    audio.loop = loop;
    audio.play().catch((e) => console.warn(`Audio playback failed for ${name}:`, e));
  }
}
function stopSound(name) {
  const audio = loadedSounds.get(name);
  if (audio) {
    audio.pause();
    audio.currentTime = 0;
  }
}
async function loadAssets() {
  const imagePromises = gameData.assets.images.map((imgData) => {
    return new Promise((resolve, reject) => {
      const img = new Image();
      img.src = imgData.path;
      img.onload = () => {
        loadedImages.set(imgData.name, img);
        resolve();
      };
      img.onerror = () => reject(`Failed to load image: ${imgData.path}`);
    });
  });
  const soundPromises = gameData.assets.sounds.map((soundData) => {
    return new Promise((resolve, reject) => {
      const audio = new Audio(soundData.path);
      audio.preload = "auto";
      audio.oncanplaythrough = () => {
        loadedSounds.set(soundData.name, audio);
        resolve();
      };
      audio.onerror = () => reject(`Failed to load sound: ${soundData.path}`);
    });
  });
  await Promise.all([...imagePromises, ...soundPromises]);
  console.log("All assets loaded.");
}
async function initGame() {
  canvas = document.getElementById("gameCanvas");
  if (!canvas) {
    console.error("Canvas element with ID 'gameCanvas' not found.");
    return;
  }
  ctx = canvas.getContext("2d");
  try {
    const response = await fetch("data.json");
    gameData = await response.json();
    canvas.width = gameData.gameSettings.canvasWidth;
    canvas.height = gameData.gameSettings.canvasHeight;
    await loadAssets();
    currentGameState = 1 /* TITLE */;
    console.log("Game initialized. Ready to start.");
  } catch (error) {
    console.error("Failed to load game data or assets:", error);
    currentGameState = 0 /* LOADING */;
    drawLoadingScreen();
    return;
  }
  canvas.addEventListener("click", handleClick);
  generateRaindrops(gameData.gameSettings.rainSettings.maxRaindrops);
  lastFrameTime = performance.now();
  gameLoop(lastFrameTime);
}
function createRaindrop() {
  const { minRainSpeed, maxRainSpeed, minRainLength, maxRainLength } = gameData.gameSettings.rainSettings;
  return {
    x: getRandomNumber(0, canvas.width),
    y: getRandomNumber(-canvas.height, 0),
    // Start above or at top of screen
    speed: getRandomNumber(minRainSpeed, maxRainSpeed),
    length: getRandomNumber(minRainLength, maxRainLength)
  };
}
function generateRaindrops(count) {
  for (let i = 0; i < count; i++) {
    rainDrops.push(createRaindrop());
  }
}
function updateRaindrops(deltaTime) {
  const { rainSpawnRateMs, maxRaindrops } = gameData.gameSettings.rainSettings;
  for (let i = 0; i < rainDrops.length; i++) {
    const drop = rainDrops[i];
    drop.y += drop.speed * (deltaTime / 16.66);
    if (drop.y > canvas.height) {
      drop.x = getRandomNumber(0, canvas.width);
      drop.y = getRandomNumber(-50, -10);
    }
  }
  if (performance.now() - lastRainSpawnTime > rainSpawnRateMs && rainDrops.length < maxRaindrops) {
    rainDrops.push(createRaindrop());
    lastRainSpawnTime = performance.now();
  }
}
function drawRaindrops() {
  ctx.strokeStyle = gameData.gameSettings.rainSettings.rainColor;
  ctx.lineWidth = 1.5;
  ctx.beginPath();
  for (const drop of rainDrops) {
    ctx.moveTo(drop.x, drop.y);
    ctx.lineTo(drop.x, drop.y + drop.length);
  }
  ctx.stroke();
}
function spawnClickableObject() {
  const { imageName, defaultWidth, defaultHeight, minScale, maxScale, spawnPadding } = gameData.gameSettings.clickableObject;
  const image = loadedImages.get(imageName);
  if (!image) {
    console.error(`Image "${imageName}" not loaded.`);
    return;
  }
  const scale = getRandomNumber(minScale, maxScale);
  const width = defaultWidth * scale;
  const height = defaultHeight * scale;
  const minX = spawnPadding;
  const maxX = canvas.width - width - spawnPadding;
  const minY = spawnPadding;
  const maxY = canvas.height - height - spawnPadding;
  if (maxX < minX || maxY < minY) {
    console.warn("Clickable object spawn area is too small due to padding. Adjusting to center.");
    clickableObject = {
      x: (canvas.width - width) / 2,
      y: (canvas.height - height) / 2,
      width,
      height,
      image
    };
  } else {
    clickableObject = {
      x: getRandomNumber(minX, maxX),
      y: getRandomNumber(minY, maxY),
      width,
      height,
      image
    };
  }
}
function startGame() {
  clicks = 0;
  timeLeft = gameData.gameSettings.gameDurationSeconds;
  gameStartTime = performance.now();
  currentGameState = 3 /* PLAYING */;
  spawnClickableObject();
  playSound("background_rain_sound", true);
}
function resetGame() {
  stopSound("background_rain_sound");
  clicks = 0;
  timeLeft = 0;
  gameStartTime = 0;
  clickableObject = null;
  currentGameState = 1 /* TITLE */;
}
function updateGame(deltaTime) {
  if (currentGameState === 3 /* PLAYING */) {
    const elapsedSeconds = (performance.now() - gameStartTime) / 1e3;
    timeLeft = Math.max(0, gameData.gameSettings.gameDurationSeconds - Math.floor(elapsedSeconds));
    if (clicks >= gameData.gameSettings.targetClicks) {
      currentGameState = 4 /* GAME_OVER */;
      playSound("win_sound");
      stopSound("background_rain_sound");
    } else if (timeLeft <= 0) {
      currentGameState = 4 /* GAME_OVER */;
      playSound("lose_sound");
      stopSound("background_rain_sound");
    }
  }
  updateRaindrops(deltaTime);
}
function drawBackground() {
  ctx.fillStyle = "#1a2a3a";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  drawRaindrops();
}
function drawLoadingScreen() {
  drawBackground();
  ctx.textAlign = "center";
  ctx.fillStyle = gameData?.gameSettings.fontSettings.textColor || "#FFFFFF";
  ctx.font = gameData?.gameSettings.fontSettings.titleFontSize || "48px sans-serif";
  ctx.fillText(gameData?.texts.loading || "\uB85C\uB529 \uC911...", canvas.width / 2, canvas.height / 2);
}
function drawTitleScreen() {
  drawBackground();
  ctx.textAlign = "center";
  ctx.fillStyle = gameData.gameSettings.fontSettings.textColor;
  ctx.font = gameData.gameSettings.fontSettings.titleFontSize;
  ctx.fillText(gameData.texts.titleScreen.title, canvas.width / 2, canvas.height / 2 - 50);
  ctx.font = gameData.gameSettings.fontSettings.instructionFontSize;
  ctx.fillText(gameData.texts.titleScreen.startPrompt, canvas.width / 2, canvas.height / 2 + 30);
}
function drawInstructionsScreen() {
  drawBackground();
  ctx.textAlign = "center";
  ctx.fillStyle = gameData.gameSettings.fontSettings.textColor;
  ctx.font = gameData.gameSettings.fontSettings.instructionFontSize;
  const instructionsText = gameData.texts.instructionsScreen.instructions.replace("{TARGET_CLICKS}", gameData.gameSettings.targetClicks.toString()).replace("{GAME_DURATION}", gameData.gameSettings.gameDurationSeconds.toString());
  const lines = instructionsText.split("\n");
  let y = canvas.height / 2 - lines.length / 2 * 30;
  for (const line of lines) {
    ctx.fillText(line, canvas.width / 2, y);
    y += 30;
  }
  ctx.fillText(gameData.texts.instructionsScreen.startPrompt, canvas.width / 2, y + 40);
}
function drawPlayingScreen() {
  drawBackground();
  if (clickableObject) {
    ctx.drawImage(
      clickableObject.image,
      clickableObject.x,
      clickableObject.y,
      clickableObject.width,
      clickableObject.height
    );
  }
  ctx.textAlign = "left";
  ctx.fillStyle = gameData.gameSettings.fontSettings.textColor;
  ctx.font = gameData.gameSettings.fontSettings.gameUiFontSize;
  ctx.fillText(`${gameData.texts.playingScreen.clicksLabel}${clicks}/${gameData.gameSettings.targetClicks}`, 20, 50);
  ctx.textAlign = "right";
  ctx.fillText(`${gameData.texts.playingScreen.timeLabel}${timeLeft}\uCD08`, canvas.width - 20, 50);
}
function drawGameOverScreen() {
  drawBackground();
  ctx.textAlign = "center";
  ctx.fillStyle = gameData.gameSettings.fontSettings.textColor;
  ctx.font = gameData.gameSettings.fontSettings.gameOverFontSize;
  const winConditionMet = clicks >= gameData.gameSettings.targetClicks;
  const message = winConditionMet ? gameData.texts.winScreen.message : gameData.texts.loseScreen.message;
  const clicksAchievedText = winConditionMet ? gameData.texts.winScreen.clicksAchieved : gameData.texts.loseScreen.clicksAchieved;
  const restartPrompt = winConditionMet ? gameData.texts.winScreen.restartPrompt : gameData.texts.loseScreen.restartPrompt;
  ctx.fillText(message, canvas.width / 2, canvas.height / 2 - 60);
  ctx.font = gameData.gameSettings.fontSettings.gameUiFontSize;
  ctx.fillText(`${clicksAchievedText}${clicks}\uD68C`, canvas.width / 2, canvas.height / 2 + 10);
  ctx.fillText(restartPrompt, canvas.width / 2, canvas.height / 2 + 80);
}
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  switch (currentGameState) {
    case 0 /* LOADING */:
      drawLoadingScreen();
      break;
    case 1 /* TITLE */:
      drawTitleScreen();
      break;
    case 2 /* INSTRUCTIONS */:
      drawInstructionsScreen();
      break;
    case 3 /* PLAYING */:
      drawPlayingScreen();
      break;
    case 4 /* GAME_OVER */:
      drawGameOverScreen();
      break;
  }
}
function handleClick(event) {
  const rect = canvas.getBoundingClientRect();
  const mouseX = event.clientX - rect.left;
  const mouseY = event.clientY - rect.top;
  switch (currentGameState) {
    case 1 /* TITLE */:
      currentGameState = 2 /* INSTRUCTIONS */;
      break;
    case 2 /* INSTRUCTIONS */:
      startGame();
      break;
    case 3 /* PLAYING */:
      if (clickableObject && mouseX >= clickableObject.x && mouseX <= clickableObject.x + clickableObject.width && mouseY >= clickableObject.y && mouseY <= clickableObject.y + clickableObject.height) {
        clicks++;
        playSound("click_sound");
        spawnClickableObject();
      }
      break;
    case 4 /* GAME_OVER */:
      resetGame();
      break;
  }
}
function gameLoop(currentTime) {
  const deltaTime = currentTime - lastFrameTime;
  lastFrameTime = currentTime;
  updateGame(deltaTime);
  draw();
  requestAnimationFrame(gameLoop);
}
window.onload = initGame;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiZ2FtZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gVHlwZSBEZWZpbml0aW9ucyBmb3IgYmV0dGVyIHJlYWRhYmlsaXR5IGFuZCBtYWludGFpbmFiaWxpdHlcclxuaW50ZXJmYWNlIEdhbWVTZXR0aW5ncyB7XHJcbiAgICBjYW52YXNXaWR0aDogbnVtYmVyO1xyXG4gICAgY2FudmFzSGVpZ2h0OiBudW1iZXI7XHJcbiAgICBnYW1lRHVyYXRpb25TZWNvbmRzOiBudW1iZXI7XHJcbiAgICB0YXJnZXRDbGlja3M6IG51bWJlcjtcclxuICAgIHJhaW5TZXR0aW5nczogUmFpblNldHRpbmdzO1xyXG4gICAgY2xpY2thYmxlT2JqZWN0OiBDbGlja2FibGVPYmplY3RTZXR0aW5ncztcclxuICAgIGZvbnRTZXR0aW5nczogRm9udFNldHRpbmdzO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUmFpblNldHRpbmdzIHtcclxuICAgIG1heFJhaW5kcm9wczogbnVtYmVyO1xyXG4gICAgbWluUmFpblNwZWVkOiBudW1iZXI7XHJcbiAgICBtYXhSYWluU3BlZWQ6IG51bWJlcjtcclxuICAgIG1pblJhaW5MZW5ndGg6IG51bWJlcjtcclxuICAgIG1heFJhaW5MZW5ndGg6IG51bWJlcjtcclxuICAgIHJhaW5Db2xvcjogc3RyaW5nO1xyXG4gICAgcmFpblNwYXduUmF0ZU1zOiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBDbGlja2FibGVPYmplY3RTZXR0aW5ncyB7XHJcbiAgICBpbWFnZU5hbWU6IHN0cmluZztcclxuICAgIGRlZmF1bHRXaWR0aDogbnVtYmVyO1xyXG4gICAgZGVmYXVsdEhlaWdodDogbnVtYmVyO1xyXG4gICAgbWluU2NhbGU6IG51bWJlcjtcclxuICAgIG1heFNjYWxlOiBudW1iZXI7XHJcbiAgICBzcGF3blBhZGRpbmc6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEZvbnRTZXR0aW5ncyB7XHJcbiAgICB0aXRsZUZvbnRTaXplOiBzdHJpbmc7XHJcbiAgICBpbnN0cnVjdGlvbkZvbnRTaXplOiBzdHJpbmc7XHJcbiAgICBnYW1lVWlGb250U2l6ZTogc3RyaW5nO1xyXG4gICAgZ2FtZU92ZXJGb250U2l6ZTogc3RyaW5nO1xyXG4gICAgdGV4dENvbG9yOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBUZXh0cyB7XHJcbiAgICBsb2FkaW5nOiBzdHJpbmc7XHJcbiAgICB0aXRsZVNjcmVlbjogeyB0aXRsZTogc3RyaW5nOyBzdGFydFByb21wdDogc3RyaW5nOyB9O1xyXG4gICAgaW5zdHJ1Y3Rpb25zU2NyZWVuOiB7IGluc3RydWN0aW9uczogc3RyaW5nOyBzdGFydFByb21wdDogc3RyaW5nOyB9O1xyXG4gICAgcGxheWluZ1NjcmVlbjogeyBjbGlja3NMYWJlbDogc3RyaW5nOyB0aW1lTGFiZWw6IHN0cmluZzsgfTtcclxuICAgIHdpblNjcmVlbjogeyBtZXNzYWdlOiBzdHJpbmc7IGNsaWNrc0FjaGlldmVkOiBzdHJpbmc7IHJlc3RhcnRQcm9tcHQ6IHN0cmluZzsgfTtcclxuICAgIGxvc2VTY3JlZW46IHsgbWVzc2FnZTogc3RyaW5nOyBjbGlja3NBY2hpZXZlZDogc3RyaW5nOyByZXN0YXJ0UHJvbXB0OiBzdHJpbmc7IH07XHJcbn1cclxuXHJcbmludGVyZmFjZSBBc3NldEltYWdlRGF0YSB7IC8vIFJlbmFtZWQgZnJvbSBJbWFnZURhdGEgdG8gQXNzZXRJbWFnZURhdGEgdG8gYXZvaWQgY29uZmxpY3Qgd2l0aCBidWlsdC1pbiBET00gSW1hZ2VEYXRhIGludGVyZmFjZVxyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcGF0aDogc3RyaW5nO1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU291bmREYXRhIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHBhdGg6IHN0cmluZztcclxuICAgIGR1cmF0aW9uX3NlY29uZHM6IG51bWJlcjtcclxuICAgIHZvbHVtZTogbnVtYmVyO1xyXG4gICAgbG9vcDogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEFzc2V0c0RhdGEge1xyXG4gICAgaW1hZ2VzOiBBc3NldEltYWdlRGF0YVtdOyAvLyBVcGRhdGVkIHRoaXMgbGluZVxyXG4gICAgc291bmRzOiBTb3VuZERhdGFbXTtcclxufVxyXG5cclxuaW50ZXJmYWNlIEdhbWVEYXRhIHtcclxuICAgIGdhbWVTZXR0aW5nczogR2FtZVNldHRpbmdzO1xyXG4gICAgdGV4dHM6IFRleHRzO1xyXG4gICAgYXNzZXRzOiBBc3NldHNEYXRhO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUmFpbmRyb3Age1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgc3BlZWQ6IG51bWJlcjtcclxuICAgIGxlbmd0aDogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQ2xpY2thYmxlR2FtZU9iamVjdCB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICBpbWFnZTogSFRNTEltYWdlRWxlbWVudDtcclxufVxyXG5cclxuLy8gR2FtZSBTdGF0ZSBFbnVtXHJcbmVudW0gR2FtZVN0YXRlIHtcclxuICAgIExPQURJTkcsXHJcbiAgICBUSVRMRSxcclxuICAgIElOU1RSVUNUSU9OUyxcclxuICAgIFBMQVlJTkcsXHJcbiAgICBHQU1FX09WRVIsXHJcbn1cclxuXHJcbi8vIEdsb2JhbCBHYW1lIFZhcmlhYmxlc1xyXG5sZXQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxubGV0IGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5sZXQgZ2FtZURhdGE6IEdhbWVEYXRhO1xyXG5sZXQgY3VycmVudEdhbWVTdGF0ZTogR2FtZVN0YXRlID0gR2FtZVN0YXRlLkxPQURJTkc7XHJcblxyXG4vLyBBc3NldHNcclxuY29uc3QgbG9hZGVkSW1hZ2VzOiBNYXA8c3RyaW5nLCBIVE1MSW1hZ2VFbGVtZW50PiA9IG5ldyBNYXAoKTtcclxuY29uc3QgbG9hZGVkU291bmRzOiBNYXA8c3RyaW5nLCBIVE1MQXVkaW9FbGVtZW50PiA9IG5ldyBNYXAoKTtcclxuXHJcbi8vIEdhbWUgTG9naWMgVmFyaWFibGVzXHJcbmxldCBjbGlja3M6IG51bWJlciA9IDA7XHJcbmxldCB0aW1lTGVmdDogbnVtYmVyID0gMDsgLy8gaW4gc2Vjb25kc1xyXG5sZXQgZ2FtZVN0YXJ0VGltZTogbnVtYmVyID0gMDsgLy8gcGVyZm9ybWFuY2Uubm93KCkgdGltZXN0YW1wXHJcbmxldCBsYXN0RnJhbWVUaW1lOiBudW1iZXIgPSAwOyAvLyBwZXJmb3JtYW5jZS5ub3coKSBmb3IgZGVsdGEgdGltZSBjYWxjdWxhdGlvblxyXG5cclxuLy8gUmFpbiBFZmZlY3QgVmFyaWFibGVzXHJcbmNvbnN0IHJhaW5Ecm9wczogUmFpbmRyb3BbXSA9IFtdO1xyXG5sZXQgbGFzdFJhaW5TcGF3blRpbWU6IG51bWJlciA9IDA7XHJcblxyXG4vLyBDbGlja2FibGUgT2JqZWN0XHJcbmxldCBjbGlja2FibGVPYmplY3Q6IENsaWNrYWJsZUdhbWVPYmplY3QgfCBudWxsID0gbnVsbDtcclxuXHJcbi8vIC0tLSBVdGlsaXR5IEZ1bmN0aW9ucyAtLS1cclxuZnVuY3Rpb24gZ2V0UmFuZG9tTnVtYmVyKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwbGF5U291bmQobmFtZTogc3RyaW5nLCBsb29wOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgIGNvbnN0IGF1ZGlvID0gbG9hZGVkU291bmRzLmdldChuYW1lKTtcclxuICAgIGlmIChhdWRpbykge1xyXG4gICAgICAgIGF1ZGlvLmN1cnJlbnRUaW1lID0gMDsgLy8gUmV3aW5kIHRvIHN0YXJ0IGZvciBxdWljayByZXBlYXRlZCBwbGF5c1xyXG4gICAgICAgIGF1ZGlvLnZvbHVtZSA9IGdhbWVEYXRhLmFzc2V0cy5zb3VuZHMuZmluZChzID0+IHMubmFtZSA9PT0gbmFtZSk/LnZvbHVtZSA/PyAxLjA7XHJcbiAgICAgICAgYXVkaW8ubG9vcCA9IGxvb3A7XHJcbiAgICAgICAgYXVkaW8ucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS53YXJuKGBBdWRpbyBwbGF5YmFjayBmYWlsZWQgZm9yICR7bmFtZX06YCwgZSkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzdG9wU291bmQobmFtZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBjb25zdCBhdWRpbyA9IGxvYWRlZFNvdW5kcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoYXVkaW8pIHtcclxuICAgICAgICBhdWRpby5wYXVzZSgpO1xyXG4gICAgICAgIGF1ZGlvLmN1cnJlbnRUaW1lID0gMDtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIEFzc2V0IExvYWRpbmcgLS0tXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRBc3NldHMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBpbWFnZVByb21pc2VzID0gZ2FtZURhdGEuYXNzZXRzLmltYWdlcy5tYXAoaW1nRGF0YSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgIGltZy5zcmMgPSBpbWdEYXRhLnBhdGg7XHJcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2FkZWRJbWFnZXMuc2V0KGltZ0RhdGEubmFtZSwgaW1nKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiByZWplY3QoYEZhaWxlZCB0byBsb2FkIGltYWdlOiAke2ltZ0RhdGEucGF0aH1gKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHNvdW5kUHJvbWlzZXMgPSBnYW1lRGF0YS5hc3NldHMuc291bmRzLm1hcChzb3VuZERhdGEgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKHNvdW5kRGF0YS5wYXRoKTtcclxuICAgICAgICAgICAgYXVkaW8ucHJlbG9hZCA9ICdhdXRvJztcclxuICAgICAgICAgICAgYXVkaW8ub25jYW5wbGF5dGhyb3VnaCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxvYWRlZFNvdW5kcy5zZXQoc291bmREYXRhLm5hbWUsIGF1ZGlvKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYXVkaW8ub25lcnJvciA9ICgpID0+IHJlamVjdChgRmFpbGVkIHRvIGxvYWQgc291bmQ6ICR7c291bmREYXRhLnBhdGh9YCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbLi4uaW1hZ2VQcm9taXNlcywgLi4uc291bmRQcm9taXNlc10pO1xyXG4gICAgY29uc29sZS5sb2coXCJBbGwgYXNzZXRzIGxvYWRlZC5cIik7XHJcbn1cclxuXHJcbi8vIC0tLSBHYW1lIEluaXRpYWxpemF0aW9uIC0tLVxyXG5hc3luYyBmdW5jdGlvbiBpbml0R2FtZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lQ2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBpZiAoIWNhbnZhcykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW52YXMgZWxlbWVudCB3aXRoIElEICdnYW1lQ2FudmFzJyBub3QgZm91bmQuXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2RhdGEuanNvbicpO1xyXG4gICAgICAgIGdhbWVEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgICBjYW52YXMud2lkdGggPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuY2FudmFzV2lkdGg7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5jYW52YXNIZWlnaHQ7XHJcblxyXG4gICAgICAgIGF3YWl0IGxvYWRBc3NldHMoKTtcclxuICAgICAgICBjdXJyZW50R2FtZVN0YXRlID0gR2FtZVN0YXRlLlRJVExFO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiR2FtZSBpbml0aWFsaXplZC4gUmVhZHkgdG8gc3RhcnQuXCIpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgZ2FtZSBkYXRhIG9yIGFzc2V0czpcIiwgZXJyb3IpO1xyXG4gICAgICAgIGN1cnJlbnRHYW1lU3RhdGUgPSBHYW1lU3RhdGUuTE9BRElORzsgLy8gU3RheSBpbiBsb2FkaW5nIG9yIHNob3cgZXJyb3Igc3RhdGVcclxuICAgICAgICBkcmF3TG9hZGluZ1NjcmVlbigpOyAvLyBTaG93IGxvYWRpbmcgZXJyb3JcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVyIGZvciBjbGlja3NcclxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTtcclxuXHJcbiAgICAvLyBJbml0aWFsaXplIHJhaW4gZHJvcHNcclxuICAgIGdlbmVyYXRlUmFpbmRyb3BzKGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5yYWluU2V0dGluZ3MubWF4UmFpbmRyb3BzKTtcclxuXHJcbiAgICAvLyBTdGFydCB0aGUgZ2FtZSBsb29wXHJcbiAgICBsYXN0RnJhbWVUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBnYW1lTG9vcChsYXN0RnJhbWVUaW1lKTtcclxufVxyXG5cclxuLy8gLS0tIFJhaW4gRWZmZWN0IC0tLVxyXG5mdW5jdGlvbiBjcmVhdGVSYWluZHJvcCgpOiBSYWluZHJvcCB7XHJcbiAgICBjb25zdCB7IG1pblJhaW5TcGVlZCwgbWF4UmFpblNwZWVkLCBtaW5SYWluTGVuZ3RoLCBtYXhSYWluTGVuZ3RoIH0gPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MucmFpblNldHRpbmdzO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiBnZXRSYW5kb21OdW1iZXIoMCwgY2FudmFzLndpZHRoKSxcclxuICAgICAgICB5OiBnZXRSYW5kb21OdW1iZXIoLWNhbnZhcy5oZWlnaHQsIDApLCAvLyBTdGFydCBhYm92ZSBvciBhdCB0b3Agb2Ygc2NyZWVuXHJcbiAgICAgICAgc3BlZWQ6IGdldFJhbmRvbU51bWJlcihtaW5SYWluU3BlZWQsIG1heFJhaW5TcGVlZCksXHJcbiAgICAgICAgbGVuZ3RoOiBnZXRSYW5kb21OdW1iZXIobWluUmFpbkxlbmd0aCwgbWF4UmFpbkxlbmd0aCksXHJcbiAgICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVJhaW5kcm9wcyhjb3VudDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICByYWluRHJvcHMucHVzaChjcmVhdGVSYWluZHJvcCgpKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUmFpbmRyb3BzKGRlbHRhVGltZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBjb25zdCB7IHJhaW5TcGF3blJhdGVNcywgbWF4UmFpbmRyb3BzIH0gPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MucmFpblNldHRpbmdzO1xyXG5cclxuICAgIC8vIE1vdmUgZXhpc3RpbmcgcmFpbmRyb3BzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhaW5Ecm9wcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGRyb3AgPSByYWluRHJvcHNbaV07XHJcbiAgICAgICAgZHJvcC55ICs9IGRyb3Auc3BlZWQgKiAoZGVsdGFUaW1lIC8gMTYuNjYpOyAvLyBTY2FsZSBzcGVlZCBieSBkZWx0YSB0aW1lIHJlbGF0aXZlIHRvIDYwZnBzXHJcbiAgICAgICAgaWYgKGRyb3AueSA+IGNhbnZhcy5oZWlnaHQpIHtcclxuICAgICAgICAgICAgLy8gUmVzZXQgcmFpbmRyb3AgdG8gdG9wIGlmIGl0IGdvZXMgb2ZmIHNjcmVlblxyXG4gICAgICAgICAgICBkcm9wLnggPSBnZXRSYW5kb21OdW1iZXIoMCwgY2FudmFzLndpZHRoKTtcclxuICAgICAgICAgICAgZHJvcC55ID0gZ2V0UmFuZG9tTnVtYmVyKC01MCwgLTEwKTsgLy8gU3RhcnQgc2xpZ2h0bHkgYWJvdmUgdGhlIGNhbnZhc1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgbmV3IHJhaW5kcm9wcyBpZiBuZWVkZWRcclxuICAgIGlmIChwZXJmb3JtYW5jZS5ub3coKSAtIGxhc3RSYWluU3Bhd25UaW1lID4gcmFpblNwYXduUmF0ZU1zICYmIHJhaW5Ecm9wcy5sZW5ndGggPCBtYXhSYWluZHJvcHMpIHtcclxuICAgICAgICByYWluRHJvcHMucHVzaChjcmVhdGVSYWluZHJvcCgpKTtcclxuICAgICAgICBsYXN0UmFpblNwYXduVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3UmFpbmRyb3BzKCk6IHZvaWQge1xyXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnJhaW5TZXR0aW5ncy5yYWluQ29sb3I7XHJcbiAgICBjdHgubGluZVdpZHRoID0gMS41O1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgZm9yIChjb25zdCBkcm9wIG9mIHJhaW5Ecm9wcykge1xyXG4gICAgICAgIGN0eC5tb3ZlVG8oZHJvcC54LCBkcm9wLnkpO1xyXG4gICAgICAgIGN0eC5saW5lVG8oZHJvcC54LCBkcm9wLnkgKyBkcm9wLmxlbmd0aCk7XHJcbiAgICB9XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcbn1cclxuXHJcbi8vIC0tLSBHYW1lIE9iamVjdCBTcGF3bmluZyAtLS1cclxuZnVuY3Rpb24gc3Bhd25DbGlja2FibGVPYmplY3QoKTogdm9pZCB7XHJcbiAgICBjb25zdCB7IGltYWdlTmFtZSwgZGVmYXVsdFdpZHRoLCBkZWZhdWx0SGVpZ2h0LCBtaW5TY2FsZSwgbWF4U2NhbGUsIHNwYXduUGFkZGluZyB9ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmNsaWNrYWJsZU9iamVjdDtcclxuICAgIGNvbnN0IGltYWdlID0gbG9hZGVkSW1hZ2VzLmdldChpbWFnZU5hbWUpO1xyXG5cclxuICAgIGlmICghaW1hZ2UpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBJbWFnZSBcIiR7aW1hZ2VOYW1lfVwiIG5vdCBsb2FkZWQuYCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNjYWxlID0gZ2V0UmFuZG9tTnVtYmVyKG1pblNjYWxlLCBtYXhTY2FsZSk7XHJcbiAgICBjb25zdCB3aWR0aCA9IGRlZmF1bHRXaWR0aCAqIHNjYWxlO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gZGVmYXVsdEhlaWdodCAqIHNjYWxlO1xyXG5cclxuICAgIGNvbnN0IG1pblggPSBzcGF3blBhZGRpbmc7XHJcbiAgICBjb25zdCBtYXhYID0gY2FudmFzLndpZHRoIC0gd2lkdGggLSBzcGF3blBhZGRpbmc7XHJcbiAgICBjb25zdCBtaW5ZID0gc3Bhd25QYWRkaW5nO1xyXG4gICAgY29uc3QgbWF4WSA9IGNhbnZhcy5oZWlnaHQgLSBoZWlnaHQgLSBzcGF3blBhZGRpbmc7XHJcblxyXG4gICAgaWYgKG1heFggPCBtaW5YIHx8IG1heFkgPCBtaW5ZKSB7IC8vIENoZWNrIGlmIHBhZGRpbmcgbWFrZXMgaXQgaW1wb3NzaWJsZSB0byBzcGF3blxyXG4gICAgICBjb25zb2xlLndhcm4oXCJDbGlja2FibGUgb2JqZWN0IHNwYXduIGFyZWEgaXMgdG9vIHNtYWxsIGR1ZSB0byBwYWRkaW5nLiBBZGp1c3RpbmcgdG8gY2VudGVyLlwiKTtcclxuICAgICAgY2xpY2thYmxlT2JqZWN0ID0ge1xyXG4gICAgICAgIHg6IChjYW52YXMud2lkdGggLSB3aWR0aCkgLyAyLFxyXG4gICAgICAgIHk6IChjYW52YXMuaGVpZ2h0IC0gaGVpZ2h0KSAvIDIsXHJcbiAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0LFxyXG4gICAgICAgIGltYWdlXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjbGlja2FibGVPYmplY3QgPSB7XHJcbiAgICAgICAgICB4OiBnZXRSYW5kb21OdW1iZXIobWluWCwgbWF4WCksXHJcbiAgICAgICAgICB5OiBnZXRSYW5kb21OdW1iZXIobWluWSwgbWF4WSksXHJcbiAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgIGltYWdlLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gR2FtZSBGbG93ICYgU3RhdGUgTWFuYWdlbWVudCAtLS1cclxuZnVuY3Rpb24gc3RhcnRHYW1lKCk6IHZvaWQge1xyXG4gICAgY2xpY2tzID0gMDtcclxuICAgIHRpbWVMZWZ0ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmdhbWVEdXJhdGlvblNlY29uZHM7XHJcbiAgICBnYW1lU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBjdXJyZW50R2FtZVN0YXRlID0gR2FtZVN0YXRlLlBMQVlJTkc7XHJcbiAgICBzcGF3bkNsaWNrYWJsZU9iamVjdCgpO1xyXG4gICAgcGxheVNvdW5kKFwiYmFja2dyb3VuZF9yYWluX3NvdW5kXCIsIHRydWUpOyAvLyBTdGFydCBiYWNrZ3JvdW5kIHJhaW4gc291bmRcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzZXRHYW1lKCk6IHZvaWQge1xyXG4gICAgc3RvcFNvdW5kKFwiYmFja2dyb3VuZF9yYWluX3NvdW5kXCIpO1xyXG4gICAgY2xpY2tzID0gMDtcclxuICAgIHRpbWVMZWZ0ID0gMDtcclxuICAgIGdhbWVTdGFydFRpbWUgPSAwO1xyXG4gICAgY2xpY2thYmxlT2JqZWN0ID0gbnVsbDtcclxuICAgIGN1cnJlbnRHYW1lU3RhdGUgPSBHYW1lU3RhdGUuVElUTEU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUdhbWUoZGVsdGFUaW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGlmIChjdXJyZW50R2FtZVN0YXRlID09PSBHYW1lU3RhdGUuUExBWUlORykge1xyXG4gICAgICAgIGNvbnN0IGVsYXBzZWRTZWNvbmRzID0gKHBlcmZvcm1hbmNlLm5vdygpIC0gZ2FtZVN0YXJ0VGltZSkgLyAxMDAwO1xyXG4gICAgICAgIHRpbWVMZWZ0ID0gTWF0aC5tYXgoMCwgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmdhbWVEdXJhdGlvblNlY29uZHMgLSBNYXRoLmZsb29yKGVsYXBzZWRTZWNvbmRzKSk7XHJcblxyXG4gICAgICAgIGlmIChjbGlja3MgPj0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnRhcmdldENsaWNrcykge1xyXG4gICAgICAgICAgICBjdXJyZW50R2FtZVN0YXRlID0gR2FtZVN0YXRlLkdBTUVfT1ZFUjtcclxuICAgICAgICAgICAgcGxheVNvdW5kKFwid2luX3NvdW5kXCIpO1xyXG4gICAgICAgICAgICBzdG9wU291bmQoXCJiYWNrZ3JvdW5kX3JhaW5fc291bmRcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lTGVmdCA8PSAwKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRHYW1lU3RhdGUgPSBHYW1lU3RhdGUuR0FNRV9PVkVSO1xyXG4gICAgICAgICAgICBwbGF5U291bmQoXCJsb3NlX3NvdW5kXCIpO1xyXG4gICAgICAgICAgICBzdG9wU291bmQoXCJiYWNrZ3JvdW5kX3JhaW5fc291bmRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdXBkYXRlUmFpbmRyb3BzKGRlbHRhVGltZSk7XHJcbn1cclxuXHJcbi8vIC0tLSBEcmF3aW5nIEZ1bmN0aW9ucyAtLS1cclxuZnVuY3Rpb24gZHJhd0JhY2tncm91bmQoKTogdm9pZCB7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gJyMxYTJhM2EnOyAvLyBEYXJrIGJsdWUtZ3JleSBmb3IgYSBzdG9ybXkgc2t5XHJcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgIGRyYXdSYWluZHJvcHMoKTsgLy8gQWx3YXlzIGRyYXcgcmFpbiBmb3IgdGhlIGJhY2tncm91bmQgYXRtb3NwaGVyZVxyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3TG9hZGluZ1NjcmVlbigpOiB2b2lkIHtcclxuICAgIGRyYXdCYWNrZ3JvdW5kKCk7XHJcbiAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gZ2FtZURhdGE/LmdhbWVTZXR0aW5ncy5mb250U2V0dGluZ3MudGV4dENvbG9yIHx8ICcjRkZGRkZGJztcclxuICAgIGN0eC5mb250ID0gZ2FtZURhdGE/LmdhbWVTZXR0aW5ncy5mb250U2V0dGluZ3MudGl0bGVGb250U2l6ZSB8fCAnNDhweCBzYW5zLXNlcmlmJztcclxuICAgIGN0eC5maWxsVGV4dChnYW1lRGF0YT8udGV4dHMubG9hZGluZyB8fCAnXHVCODVDXHVCNTI5IFx1QzkxMS4uLicsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1RpdGxlU2NyZWVuKCk6IHZvaWQge1xyXG4gICAgZHJhd0JhY2tncm91bmQoKTtcclxuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgIGN0eC5maWxsU3R5bGUgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udFNldHRpbmdzLnRleHRDb2xvcjtcclxuXHJcbiAgICBjdHguZm9udCA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5mb250U2V0dGluZ3MudGl0bGVGb250U2l6ZTtcclxuICAgIGN0eC5maWxsVGV4dChnYW1lRGF0YS50ZXh0cy50aXRsZVNjcmVlbi50aXRsZSwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIgLSA1MCk7XHJcblxyXG4gICAgY3R4LmZvbnQgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udFNldHRpbmdzLmluc3RydWN0aW9uRm9udFNpemU7XHJcbiAgICBjdHguZmlsbFRleHQoZ2FtZURhdGEudGV4dHMudGl0bGVTY3JlZW4uc3RhcnRQcm9tcHQsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyICsgMzApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3SW5zdHJ1Y3Rpb25zU2NyZWVuKCk6IHZvaWQge1xyXG4gICAgZHJhd0JhY2tncm91bmQoKTtcclxuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgIGN0eC5maWxsU3R5bGUgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udFNldHRpbmdzLnRleHRDb2xvcjtcclxuXHJcbiAgICBjdHguZm9udCA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5mb250U2V0dGluZ3MuaW5zdHJ1Y3Rpb25Gb250U2l6ZTtcclxuXHJcbiAgICAvLyBSZXBsYWNlIHBsYWNlaG9sZGVycyBpbiBpbnN0cnVjdGlvbnMgdGV4dFxyXG4gICAgY29uc3QgaW5zdHJ1Y3Rpb25zVGV4dCA9IGdhbWVEYXRhLnRleHRzLmluc3RydWN0aW9uc1NjcmVlbi5pbnN0cnVjdGlvbnNcclxuICAgICAgICAucmVwbGFjZSgne1RBUkdFVF9DTElDS1N9JywgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnRhcmdldENsaWNrcy50b1N0cmluZygpKVxyXG4gICAgICAgIC5yZXBsYWNlKCd7R0FNRV9EVVJBVElPTn0nLCBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZ2FtZUR1cmF0aW9uU2Vjb25kcy50b1N0cmluZygpKTtcclxuXHJcbiAgICAvLyBTcGxpdCB0ZXh0IGJ5IG5ld2xpbmUgYW5kIGRyYXcgZWFjaCBsaW5lXHJcbiAgICBjb25zdCBsaW5lcyA9IGluc3RydWN0aW9uc1RleHQuc3BsaXQoJ1xcbicpO1xyXG4gICAgbGV0IHkgPSBjYW52YXMuaGVpZ2h0IC8gMiAtIChsaW5lcy5sZW5ndGggLyAyKSAqIDMwOyAvLyBBZGp1c3Qgc3RhcnRpbmcgWSBiYXNlZCBvbiBudW1iZXIgb2YgbGluZXNcclxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgIGN0eC5maWxsVGV4dChsaW5lLCBjYW52YXMud2lkdGggLyAyLCB5KTtcclxuICAgICAgICB5ICs9IDMwOyAvLyBMaW5lIGhlaWdodFxyXG4gICAgfVxyXG5cclxuICAgIGN0eC5maWxsVGV4dChnYW1lRGF0YS50ZXh0cy5pbnN0cnVjdGlvbnNTY3JlZW4uc3RhcnRQcm9tcHQsIGNhbnZhcy53aWR0aCAvIDIsIHkgKyA0MCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkcmF3UGxheWluZ1NjcmVlbigpOiB2b2lkIHtcclxuICAgIGRyYXdCYWNrZ3JvdW5kKCk7XHJcblxyXG4gICAgaWYgKGNsaWNrYWJsZU9iamVjdCkge1xyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICAgICAgICAgIGNsaWNrYWJsZU9iamVjdC5pbWFnZSxcclxuICAgICAgICAgICAgY2xpY2thYmxlT2JqZWN0LngsXHJcbiAgICAgICAgICAgIGNsaWNrYWJsZU9iamVjdC55LFxyXG4gICAgICAgICAgICBjbGlja2FibGVPYmplY3Qud2lkdGgsXHJcbiAgICAgICAgICAgIGNsaWNrYWJsZU9iamVjdC5oZWlnaHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmZvbnRTZXR0aW5ncy50ZXh0Q29sb3I7XHJcbiAgICBjdHguZm9udCA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5mb250U2V0dGluZ3MuZ2FtZVVpRm9udFNpemU7XHJcbiAgICBjdHguZmlsbFRleHQoYCR7Z2FtZURhdGEudGV4dHMucGxheWluZ1NjcmVlbi5jbGlja3NMYWJlbH0ke2NsaWNrc30vJHtnYW1lRGF0YS5nYW1lU2V0dGluZ3MudGFyZ2V0Q2xpY2tzfWAsIDIwLCA1MCk7XHJcblxyXG4gICAgY3R4LnRleHRBbGlnbiA9ICdyaWdodCc7XHJcbiAgICBjdHguZmlsbFRleHQoYCR7Z2FtZURhdGEudGV4dHMucGxheWluZ1NjcmVlbi50aW1lTGFiZWx9JHt0aW1lTGVmdH1cdUNEMDhgLCBjYW52YXMud2lkdGggLSAyMCwgNTApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3R2FtZU92ZXJTY3JlZW4oKTogdm9pZCB7XHJcbiAgICBkcmF3QmFja2dyb3VuZCgpO1xyXG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgY3R4LmZpbGxTdHlsZSA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5mb250U2V0dGluZ3MudGV4dENvbG9yO1xyXG4gICAgY3R4LmZvbnQgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udFNldHRpbmdzLmdhbWVPdmVyRm9udFNpemU7XHJcblxyXG4gICAgY29uc3Qgd2luQ29uZGl0aW9uTWV0ID0gY2xpY2tzID49IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy50YXJnZXRDbGlja3M7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gd2luQ29uZGl0aW9uTWV0ID8gZ2FtZURhdGEudGV4dHMud2luU2NyZWVuLm1lc3NhZ2UgOiBnYW1lRGF0YS50ZXh0cy5sb3NlU2NyZWVuLm1lc3NhZ2U7XHJcbiAgICBjb25zdCBjbGlja3NBY2hpZXZlZFRleHQgPSB3aW5Db25kaXRpb25NZXQgPyBnYW1lRGF0YS50ZXh0cy53aW5TY3JlZW4uY2xpY2tzQWNoaWV2ZWQgOiBnYW1lRGF0YS50ZXh0cy5sb3NlU2NyZWVuLmNsaWNrc0FjaGlldmVkO1xyXG4gICAgY29uc3QgcmVzdGFydFByb21wdCA9IHdpbkNvbmRpdGlvbk1ldCA/IGdhbWVEYXRhLnRleHRzLndpblNjcmVlbi5yZXN0YXJ0UHJvbXB0IDogZ2FtZURhdGEudGV4dHMubG9zZVNjcmVlbi5yZXN0YXJ0UHJvbXB0O1xyXG5cclxuXHJcbiAgICBjdHguZmlsbFRleHQobWVzc2FnZSwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIgLSA2MCk7XHJcblxyXG4gICAgY3R4LmZvbnQgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udFNldHRpbmdzLmdhbWVVaUZvbnRTaXplO1xyXG4gICAgY3R4LmZpbGxUZXh0KGAke2NsaWNrc0FjaGlldmVkVGV4dH0ke2NsaWNrc31cdUQ2OENgLCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiArIDEwKTtcclxuICAgIGN0eC5maWxsVGV4dChyZXN0YXJ0UHJvbXB0LCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiArIDgwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhdygpOiB2b2lkIHtcclxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsgLy8gQ2xlYXIgdGhlIGVudGlyZSBjYW52YXNcclxuXHJcbiAgICBzd2l0Y2ggKGN1cnJlbnRHYW1lU3RhdGUpIHtcclxuICAgICAgICBjYXNlIEdhbWVTdGF0ZS5MT0FESU5HOlxyXG4gICAgICAgICAgICBkcmF3TG9hZGluZ1NjcmVlbigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEdhbWVTdGF0ZS5USVRMRTpcclxuICAgICAgICAgICAgZHJhd1RpdGxlU2NyZWVuKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgR2FtZVN0YXRlLklOU1RSVUNUSU9OUzpcclxuICAgICAgICAgICAgZHJhd0luc3RydWN0aW9uc1NjcmVlbigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEdhbWVTdGF0ZS5QTEFZSU5HOlxyXG4gICAgICAgICAgICBkcmF3UGxheWluZ1NjcmVlbigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEdhbWVTdGF0ZS5HQU1FX09WRVI6XHJcbiAgICAgICAgICAgIGRyYXdHYW1lT3ZlclNjcmVlbigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIElucHV0IEhhbmRsaW5nIC0tLVxyXG5mdW5jdGlvbiBoYW5kbGVDbGljayhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IG1vdXNlWCA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQ7XHJcbiAgICBjb25zdCBtb3VzZVkgPSBldmVudC5jbGllbnRZIC0gcmVjdC50b3A7XHJcblxyXG4gICAgc3dpdGNoIChjdXJyZW50R2FtZVN0YXRlKSB7XHJcbiAgICAgICAgY2FzZSBHYW1lU3RhdGUuVElUTEU6XHJcbiAgICAgICAgICAgIGN1cnJlbnRHYW1lU3RhdGUgPSBHYW1lU3RhdGUuSU5TVFJVQ1RJT05TO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEdhbWVTdGF0ZS5JTlNUUlVDVElPTlM6XHJcbiAgICAgICAgICAgIHN0YXJ0R2FtZSgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEdhbWVTdGF0ZS5QTEFZSU5HOlxyXG4gICAgICAgICAgICBpZiAoY2xpY2thYmxlT2JqZWN0ICYmXHJcbiAgICAgICAgICAgICAgICBtb3VzZVggPj0gY2xpY2thYmxlT2JqZWN0LnggJiZcclxuICAgICAgICAgICAgICAgIG1vdXNlWCA8PSBjbGlja2FibGVPYmplY3QueCArIGNsaWNrYWJsZU9iamVjdC53aWR0aCAmJlxyXG4gICAgICAgICAgICAgICAgbW91c2VZID49IGNsaWNrYWJsZU9iamVjdC55ICYmXHJcbiAgICAgICAgICAgICAgICBtb3VzZVkgPD0gY2xpY2thYmxlT2JqZWN0LnkgKyBjbGlja2FibGVPYmplY3QuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBjbGlja3MrKztcclxuICAgICAgICAgICAgICAgIHBsYXlTb3VuZChcImNsaWNrX3NvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgc3Bhd25DbGlja2FibGVPYmplY3QoKTsgLy8gUmVzcGF3bnMgdGhlIG9iamVjdCBhZnRlciBhIGNsaWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBHYW1lU3RhdGUuR0FNRV9PVkVSOlxyXG4gICAgICAgICAgICByZXNldEdhbWUoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBHYW1lIExvb3AgLS0tXHJcbmZ1bmN0aW9uIGdhbWVMb29wKGN1cnJlbnRUaW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IGRlbHRhVGltZSA9IGN1cnJlbnRUaW1lIC0gbGFzdEZyYW1lVGltZTsgLy8gaW4gbWlsbGlzZWNvbmRzXHJcbiAgICBsYXN0RnJhbWVUaW1lID0gY3VycmVudFRpbWU7XHJcblxyXG4gICAgdXBkYXRlR2FtZShkZWx0YVRpbWUpO1xyXG4gICAgZHJhdygpO1xyXG5cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XHJcbn1cclxuXHJcbi8vIEVuc3VyZSB0aGUgZ2FtZSBpbml0aWFsaXplcyBhZnRlciB0aGUgd2luZG93IGxvYWRzXHJcbndpbmRvdy5vbmxvYWQgPSBpbml0R2FtZTtcclxuIl0sCiAgIm1hcHBpbmdzIjogIkFBeUZBLElBQUssWUFBTCxrQkFBS0EsZUFBTDtBQUNJLEVBQUFBLHNCQUFBO0FBQ0EsRUFBQUEsc0JBQUE7QUFDQSxFQUFBQSxzQkFBQTtBQUNBLEVBQUFBLHNCQUFBO0FBQ0EsRUFBQUEsc0JBQUE7QUFMQyxTQUFBQTtBQUFBLEdBQUE7QUFTTCxJQUFJO0FBQ0osSUFBSTtBQUNKLElBQUk7QUFDSixJQUFJLG1CQUE4QjtBQUdsQyxNQUFNLGVBQThDLG9CQUFJLElBQUk7QUFDNUQsTUFBTSxlQUE4QyxvQkFBSSxJQUFJO0FBRzVELElBQUksU0FBaUI7QUFDckIsSUFBSSxXQUFtQjtBQUN2QixJQUFJLGdCQUF3QjtBQUM1QixJQUFJLGdCQUF3QjtBQUc1QixNQUFNLFlBQXdCLENBQUM7QUFDL0IsSUFBSSxvQkFBNEI7QUFHaEMsSUFBSSxrQkFBOEM7QUFHbEQsU0FBUyxnQkFBZ0IsS0FBYSxLQUFxQjtBQUN2RCxTQUFPLEtBQUssT0FBTyxLQUFLLE1BQU0sT0FBTztBQUN6QztBQUVBLFNBQVMsVUFBVSxNQUFjLE9BQWdCLE9BQWE7QUFDMUQsUUFBTSxRQUFRLGFBQWEsSUFBSSxJQUFJO0FBQ25DLE1BQUksT0FBTztBQUNQLFVBQU0sY0FBYztBQUNwQixVQUFNLFNBQVMsU0FBUyxPQUFPLE9BQU8sS0FBSyxPQUFLLEVBQUUsU0FBUyxJQUFJLEdBQUcsVUFBVTtBQUM1RSxVQUFNLE9BQU87QUFDYixVQUFNLEtBQUssRUFBRSxNQUFNLE9BQUssUUFBUSxLQUFLLDZCQUE2QixJQUFJLEtBQUssQ0FBQyxDQUFDO0FBQUEsRUFDakY7QUFDSjtBQUVBLFNBQVMsVUFBVSxNQUFvQjtBQUNuQyxRQUFNLFFBQVEsYUFBYSxJQUFJLElBQUk7QUFDbkMsTUFBSSxP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
