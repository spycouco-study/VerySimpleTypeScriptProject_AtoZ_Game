let canvas;
let ctx;
let gameData;
const assets = {
  images: /* @__PURE__ */ new Map(),
  sounds: /* @__PURE__ */ new Map()
};
let currentGameState = "LOADING";
let lastTime = 0;
let deltaTime = 0;
let player;
let obstacles = [];
let score = 0;
let obstacleSpawnTimer = 0;
const input = {
  left: false,
  right: false,
  space: false
};
let backgroundMusic = null;
let gameOverEffect = null;
async function loadGame() {
  canvas = document.getElementById("gameCanvas");
  if (!canvas) {
    console.error("Canvas element with ID 'gameCanvas' not found.");
    return;
  }
  ctx = canvas.getContext("2d");
  if (!ctx) {
    console.error("Failed to get 2D rendering context.");
    return;
  }
  try {
    const response = await fetch("data.json");
    gameData = await response.json();
    canvas.width = gameData.gameSettings.canvasWidth;
    canvas.height = gameData.gameSettings.canvasHeight;
    await loadAssets();
    initGame();
    requestAnimationFrame(gameLoop);
  } catch (error) {
    console.error("Failed to load game data or assets:", error);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "red";
    ctx.font = "20px Arial";
    ctx.textAlign = "center";
    ctx.fillText("Failed to load game. Check console for details.", canvas.width / 2, canvas.height / 2);
  }
}
async function loadAssets() {
  currentGameState = "LOADING";
  const imagePromises = gameData.assets.images.map((img) => {
    return new Promise((resolve, reject) => {
      const image = new Image();
      image.src = img.path;
      image.onload = () => {
        assets.images.set(img.name, image);
        resolve();
      };
      image.onerror = () => {
        console.warn(`Failed to load image: ${img.path}`);
        assets.images.set(img.name, new Image());
        resolve();
      };
    });
  });
  const soundPromises = gameData.assets.sounds.map((snd) => {
    return new Promise((resolve, reject) => {
      const audio = new Audio(snd.path);
      audio.volume = snd.volume;
      audio.oncanplaythrough = () => {
        assets.sounds.set(snd.name, audio);
        resolve();
      };
      audio.onerror = () => {
        console.warn(`Failed to load sound: ${snd.path}`);
        assets.sounds.set(snd.name, new Audio());
        resolve();
      };
      setTimeout(() => {
        if (!assets.sounds.has(snd.name)) {
          assets.sounds.set(snd.name, audio);
          resolve();
        }
      }, 1e3);
    });
  });
  try {
    await Promise.all([...imagePromises, ...soundPromises]);
    console.log("All assets loaded.");
  } catch (error) {
    console.error("Error loading assets (some may have failed but allowed progression):", error);
  }
}
function initGame() {
  window.addEventListener("keydown", handleKeyDown);
  window.addEventListener("keyup", handleKeyUp);
  backgroundMusic = assets.sounds.get(gameData.gameSettings.bgmSoundName) || null;
  if (backgroundMusic) {
    backgroundMusic.loop = true;
  }
  gameOverEffect = assets.sounds.get(gameData.gameSettings.gameOverSoundName) || null;
  if (gameOverEffect) {
  }
  currentGameState = "TITLE";
}
function newGame() {
  player = {
    x: canvas.width / 2 - gameData.gameSettings.playerWidth / 2,
    y: canvas.height - gameData.gameSettings.playerHeight - 20,
    width: gameData.gameSettings.playerWidth,
    height: gameData.gameSettings.playerHeight,
    dx: 0
    // Player starts stationary
  };
  obstacles = [];
  score = 0;
  obstacleSpawnTimer = 0;
  currentGameState = "PLAYING";
  input.space = false;
  if (backgroundMusic) {
    backgroundMusic.currentTime = 0;
    backgroundMusic.play().catch((e) => console.warn("Background music autoplay prevented:", e));
  }
}
function gameLoop(currentTime) {
  if (lastTime === 0) lastTime = currentTime;
  deltaTime = (currentTime - lastTime) / 1e3;
  lastTime = currentTime;
  update(deltaTime);
  draw();
  requestAnimationFrame(gameLoop);
}
function update(dt) {
  switch (currentGameState) {
    case "LOADING":
      break;
    case "TITLE":
      if (input.space) {
        newGame();
      }
      break;
    case "PLAYING":
      player.x += player.dx * gameData.gameSettings.playerSpeed * dt;
      player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
      obstacleSpawnTimer += dt * 1e3;
      if (obstacleSpawnTimer >= gameData.gameSettings.obstacleSpawnInterval) {
        const obstacleWidth = Math.random() * (gameData.gameSettings.obstacleMaxSize - gameData.gameSettings.obstacleMinSize) + gameData.gameSettings.obstacleMinSize;
        const obstacleHeight = obstacleWidth;
        const obstacleX = Math.random() * (canvas.width - obstacleWidth);
        const obstacleSpeed = Math.random() * (gameData.gameSettings.obstacleMaxSpeed - gameData.gameSettings.obstacleMinSpeed) + gameData.gameSettings.obstacleMinSpeed;
        obstacles.push({
          x: obstacleX,
          y: -obstacleHeight,
          // Start obstacle just above the canvas
          width: obstacleWidth,
          height: obstacleHeight,
          speed: obstacleSpeed
        });
        obstacleSpawnTimer = 0;
      }
      for (let i = 0; i < obstacles.length; i++) {
        const obs = obstacles[i];
        obs.y += obs.speed * dt;
        if (player.x < obs.x + obs.width && player.x + player.width > obs.x && player.y < obs.y + obs.height && player.y + player.height > obs.y) {
          currentGameState = "GAME_OVER";
          if (gameOverEffect) {
            gameOverEffect.currentTime = 0;
            gameOverEffect.play().catch((e) => console.warn("Game over sound play prevented:", e));
          }
          if (backgroundMusic) {
            backgroundMusic.pause();
            backgroundMusic.currentTime = 0;
          }
          break;
        }
      }
      for (let i = obstacles.length - 1; i >= 0; i--) {
        if (obstacles[i].y > canvas.height) {
          obstacles.splice(i, 1);
          score += gameData.gameSettings.scoreIncrement;
        }
      }
      break;
    case "GAME_OVER":
      if (input.space) {
        newGame();
      }
      break;
  }
}
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  switch (currentGameState) {
    case "LOADING":
      drawText("Loading assets...", canvas.width / 2, canvas.height / 2, "24px Arial", "#ffffff");
      break;
    case "TITLE":
      drawText(gameData.gameSettings.titleScreenText, canvas.width / 2, canvas.height / 2 - 50, gameData.gameSettings.titleScreenFont, gameData.gameSettings.titleScreenTextColor);
      drawText(gameData.gameSettings.pressSpaceText, canvas.width / 2, canvas.height / 2 + 20, gameData.gameSettings.scoreFont, gameData.gameSettings.titleScreenTextColor);
      break;
    case "PLAYING":
      drawAsset(gameData.gameSettings.playerImageName, player.x, player.y, player.width, player.height);
      for (const obs of obstacles) {
        drawAsset(gameData.gameSettings.obstacleImageName, obs.x, obs.y, obs.width, obs.height);
      }
      ctx.font = gameData.gameSettings.scoreFont;
      ctx.fillStyle = gameData.gameSettings.scoreTextColor;
      ctx.textAlign = "left";
      ctx.fillText(`Score: ${score}`, 10, 30);
      break;
    case "GAME_OVER":
      drawText(gameData.gameSettings.gameOverScreenText, canvas.width / 2, canvas.height / 2 - 50, gameData.gameSettings.gameOverFont, gameData.gameSettings.gameOverTextColor);
      drawText(`Final Score: ${score}`, canvas.width / 2, canvas.height / 2, gameData.gameSettings.scoreFont, gameData.gameSettings.gameOverTextColor);
      drawText(gameData.gameSettings.pressSpaceText, canvas.width / 2, canvas.height / 2 + 50, gameData.gameSettings.scoreFont, gameData.gameSettings.gameOverTextColor);
      break;
  }
}
function drawText(text, x, y, font, color) {
  ctx.font = font;
  ctx.fillStyle = color;
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText(text, x, y);
}
function drawAsset(name, x, y, width, height) {
  const image = assets.images.get(name);
  if (image && image.complete && image.naturalWidth > 0) {
    ctx.drawImage(image, x, y, width, height);
  } else {
    ctx.fillStyle = name === gameData.gameSettings.playerImageName ? "blue" : "red";
    ctx.fillRect(x, y, width, height);
  }
}
function updatePlayerDirection() {
  if (player) {
    if (input.left && !input.right) {
      player.dx = -1;
    } else if (input.right && !input.left) {
      player.dx = 1;
    } else {
      player.dx = 0;
    }
  }
}
function handleKeyDown(event) {
  if (event.code === "ArrowLeft") {
    input.left = true;
  } else if (event.code === "ArrowRight") {
    input.right = true;
  } else if (event.code === "Space") {
    input.space = true;
  }
  updatePlayerDirection();
}
function handleKeyUp(event) {
  if (event.code === "ArrowLeft") {
    input.left = false;
  } else if (event.code === "ArrowRight") {
    input.right = false;
  }
  updatePlayerDirection();
}
document.addEventListener("DOMContentLoaded", loadGame);
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiZ2FtZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gRGVmaW5lIGludGVyZmFjZXMgZm9yIGRhdGEuanNvbiBzdHJ1Y3R1cmUgdG8gZW5zdXJlIHR5cGUgc2FmZXR5XHJcbmludGVyZmFjZSBJbWFnZUFzc2V0IHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHBhdGg6IHN0cmluZztcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFNvdW5kQXNzZXQge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcGF0aDogc3RyaW5nO1xyXG4gICAgZHVyYXRpb25fc2Vjb25kczogbnVtYmVyO1xyXG4gICAgdm9sdW1lOiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBHYW1lU2V0dGluZ3Mge1xyXG4gICAgY2FudmFzV2lkdGg6IG51bWJlcjtcclxuICAgIGNhbnZhc0hlaWdodDogbnVtYmVyO1xyXG4gICAgcGxheWVyU3BlZWQ6IG51bWJlcjtcclxuICAgIHBsYXllcldpZHRoOiBudW1iZXI7XHJcbiAgICBwbGF5ZXJIZWlnaHQ6IG51bWJlcjtcclxuICAgIG9ic3RhY2xlU3Bhd25JbnRlcnZhbDogbnVtYmVyOyAvLyBpbiBtaWxsaXNlY29uZHNcclxuICAgIG9ic3RhY2xlTWluU3BlZWQ6IG51bWJlcjsgLy8gcGl4ZWxzIHBlciBzZWNvbmRcclxuICAgIG9ic3RhY2xlTWF4U3BlZWQ6IG51bWJlcjsgLy8gcGl4ZWxzIHBlciBzZWNvbmRcclxuICAgIG9ic3RhY2xlTWluU2l6ZTogbnVtYmVyOyAvLyB3aWR0aC9oZWlnaHQgaW4gcGl4ZWxzXHJcbiAgICBvYnN0YWNsZU1heFNpemU6IG51bWJlcjsgLy8gd2lkdGgvaGVpZ2h0IGluIHBpeGVsc1xyXG4gICAgc2NvcmVJbmNyZW1lbnQ6IG51bWJlcjtcclxuICAgIHRpdGxlU2NyZWVuVGV4dDogc3RyaW5nO1xyXG4gICAgcHJlc3NTcGFjZVRleHQ6IHN0cmluZztcclxuICAgIGdhbWVPdmVyU2NyZWVuVGV4dDogc3RyaW5nO1xyXG4gICAgdGl0bGVTY3JlZW5Gb250OiBzdHJpbmc7XHJcbiAgICBzY29yZUZvbnQ6IHN0cmluZztcclxuICAgIGdhbWVPdmVyRm9udDogc3RyaW5nO1xyXG4gICAgdGl0bGVTY3JlZW5UZXh0Q29sb3I6IHN0cmluZztcclxuICAgIHNjb3JlVGV4dENvbG9yOiBzdHJpbmc7XHJcbiAgICBnYW1lT3ZlclRleHRDb2xvcjogc3RyaW5nO1xyXG4gICAgcGxheWVySW1hZ2VOYW1lOiBzdHJpbmc7XHJcbiAgICBvYnN0YWNsZUltYWdlTmFtZTogc3RyaW5nO1xyXG4gICAgYmdtU291bmROYW1lOiBzdHJpbmc7XHJcbiAgICBnYW1lT3ZlclNvdW5kTmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgR2FtZURhdGEge1xyXG4gICAgYXNzZXRzOiB7XHJcbiAgICAgICAgaW1hZ2VzOiBJbWFnZUFzc2V0W107XHJcbiAgICAgICAgc291bmRzOiBTb3VuZEFzc2V0W107XHJcbiAgICB9O1xyXG4gICAgZ2FtZVNldHRpbmdzOiBHYW1lU2V0dGluZ3M7XHJcbn1cclxuXHJcbi8vIC0tLSBHYW1lIFN0YXRlIFZhcmlhYmxlcyAtLS1cclxubGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmxldCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxubGV0IGdhbWVEYXRhOiBHYW1lRGF0YTsgLy8gU3RvcmVzIHBhcnNlZCBkYXRhLmpzb24gY29udGVudFxyXG5cclxuLy8gTWFwcyB0byBzdG9yZSBsb2FkZWQgaW1hZ2UgYW5kIGF1ZGlvIGFzc2V0c1xyXG5pbnRlcmZhY2UgTG9hZGVkQXNzZXRzIHtcclxuICAgIGltYWdlczogTWFwPHN0cmluZywgSFRNTEltYWdlRWxlbWVudD47XHJcbiAgICBzb3VuZHM6IE1hcDxzdHJpbmcsIEhUTUxBdWRpb0VsZW1lbnQ+O1xyXG59XHJcbmNvbnN0IGFzc2V0czogTG9hZGVkQXNzZXRzID0ge1xyXG4gICAgaW1hZ2VzOiBuZXcgTWFwKCksXHJcbiAgICBzb3VuZHM6IG5ldyBNYXAoKVxyXG59O1xyXG5cclxuLy8gRW51bS1saWtlIHR5cGUgZm9yIGdhbWUgc3RhdGVzXHJcbnR5cGUgR2FtZVN0YXRlID0gJ0xPQURJTkcnIHwgJ1RJVExFJyB8ICdQTEFZSU5HJyB8ICdHQU1FX09WRVInO1xyXG5sZXQgY3VycmVudEdhbWVTdGF0ZTogR2FtZVN0YXRlID0gJ0xPQURJTkcnO1xyXG5cclxuLy8gVGltZSB0cmFja2luZyBmb3IgZnJhbWUtcmF0ZSBpbmRlcGVuZGVudCB1cGRhdGVzXHJcbmxldCBsYXN0VGltZSA9IDA7XHJcbmxldCBkZWx0YVRpbWUgPSAwOyAvLyBUaW1lIGVsYXBzZWQgc2luY2UgbGFzdCBmcmFtZSwgaW4gc2Vjb25kc1xyXG5cclxuLy8gUGxheWVyIG9iamVjdFxyXG5pbnRlcmZhY2UgUGxheWVyIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxuICAgIGR4OiBudW1iZXI7IC8vIERpcmVjdGlvbiBtdWx0aXBsaWVyIGZvciBob3Jpem9udGFsIG1vdmVtZW50ICgtMSBmb3IgbGVmdCwgMSBmb3IgcmlnaHQsIDAgZm9yIHN0YXRpb25hcnkpXHJcbn1cclxubGV0IHBsYXllcjogUGxheWVyO1xyXG5cclxuLy8gT2JzdGFjbGUgYXJyYXlcclxuaW50ZXJmYWNlIE9ic3RhY2xlIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxuICAgIHNwZWVkOiBudW1iZXI7IC8vIHBpeGVscyBwZXIgc2Vjb25kXHJcbn1cclxubGV0IG9ic3RhY2xlczogT2JzdGFjbGVbXSA9IFtdO1xyXG5cclxubGV0IHNjb3JlID0gMDtcclxubGV0IG9ic3RhY2xlU3Bhd25UaW1lciA9IDA7IC8vIEFjY3VtdWxhdG9yIGZvciBvYnN0YWNsZSBzcGF3bmluZywgaW4gbWlsbGlzZWNvbmRzXHJcblxyXG4vLyBJbnB1dCBzdGF0ZSBmb3Iga2V5Ym9hcmQgcHJlc3Nlc1xyXG5pbnRlcmZhY2UgSW5wdXRTdGF0ZSB7XHJcbiAgICBsZWZ0OiBib29sZWFuO1xyXG4gICAgcmlnaHQ6IGJvb2xlYW47XHJcbiAgICBzcGFjZTogYm9vbGVhbjtcclxufVxyXG5jb25zdCBpbnB1dDogSW5wdXRTdGF0ZSA9IHtcclxuICAgIGxlZnQ6IGZhbHNlLFxyXG4gICAgcmlnaHQ6IGZhbHNlLFxyXG4gICAgc3BhY2U6IGZhbHNlXHJcbn07XHJcblxyXG4vLyBBdWRpbyBlbGVtZW50cyBmb3IgYmFja2dyb3VuZCBtdXNpYyBhbmQgc291bmQgZWZmZWN0c1xyXG5sZXQgYmFja2dyb3VuZE11c2ljOiBIVE1MQXVkaW9FbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbmxldCBnYW1lT3ZlckVmZmVjdDogSFRNTEF1ZGlvRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuXHJcbi8vIC0tLSBDb3JlIEdhbWUgRnVuY3Rpb25zIC0tLVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemVzIHRoZSBnYW1lOiBmZXRjaGVzIGRhdGEsIGxvYWRzIGFzc2V0cywgc2V0cyB1cCBjYW52YXMgYW5kIGV2ZW50IGxpc3RlbmVycy5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRHYW1lKCkge1xyXG4gICAgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVDYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGlmICghY2FudmFzKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbnZhcyBlbGVtZW50IHdpdGggSUQgJ2dhbWVDYW52YXMnIG5vdCBmb3VuZC5cIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBpZiAoIWN0eCkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IDJEIHJlbmRlcmluZyBjb250ZXh0LlwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyAxLiBGZXRjaCBnYW1lIGRhdGEgZnJvbSBkYXRhLmpzb25cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdkYXRhLmpzb24nKTtcclxuICAgICAgICBnYW1lRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgICAgLy8gMi4gU2V0IGNhbnZhcyBkaW1lbnNpb25zIGZyb20gZ2FtZSBzZXR0aW5nc1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5jYW52YXNXaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmNhbnZhc0hlaWdodDtcclxuXHJcbiAgICAgICAgLy8gMy4gTG9hZCBhbGwgYXNzZXRzIChpbWFnZXMgYW5kIHNvdW5kcylcclxuICAgICAgICBhd2FpdCBsb2FkQXNzZXRzKCk7XHJcblxyXG4gICAgICAgIC8vIDQuIEluaXRpYWxpemUgZ2FtZSBzdGF0ZSBhbmQgc3RhcnQgbG9vcFxyXG4gICAgICAgIGluaXRHYW1lKCk7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdhbWVMb29wKTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBnYW1lIGRhdGEgb3IgYXNzZXRzOlwiLCBlcnJvcik7XHJcbiAgICAgICAgLy8gRGlzcGxheSBhbiBlcnJvciBtZXNzYWdlIG9uIHRoZSBjYW52YXMgaWYgbG9hZGluZyBmYWlsc1xyXG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JlZCc7XHJcbiAgICAgICAgY3R4LmZvbnQgPSAnMjBweCBBcmlhbCc7XHJcbiAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIGN0eC5maWxsVGV4dChcIkZhaWxlZCB0byBsb2FkIGdhbWUuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuXCIsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIExvYWRzIGFsbCBpbWFnZSBhbmQgc291bmQgYXNzZXRzIHNwZWNpZmllZCBpbiBnYW1lRGF0YS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRBc3NldHMoKSB7XHJcbiAgICBjdXJyZW50R2FtZVN0YXRlID0gJ0xPQURJTkcnOyAvLyBJbmRpY2F0ZSBsb2FkaW5nIHN0YXRlXHJcbiAgICAvLyBUaGUgbG9hZGluZyB0ZXh0IGlzIG5vdyBoYW5kbGVkIGJ5IHRoZSBkcmF3IGZ1bmN0aW9uIHdoZW4gY3VycmVudEdhbWVTdGF0ZSBpcyAnTE9BRElORydcclxuXHJcbiAgICBjb25zdCBpbWFnZVByb21pc2VzID0gZ2FtZURhdGEuYXNzZXRzLmltYWdlcy5tYXAoaW1nID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBpbWcucGF0aDtcclxuICAgICAgICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXNzZXRzLmltYWdlcy5zZXQoaW1nLm5hbWUsIGltYWdlKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaW1hZ2Uub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGxvYWQgaW1hZ2U6ICR7aW1nLnBhdGh9YCk7XHJcbiAgICAgICAgICAgICAgICBhc3NldHMuaW1hZ2VzLnNldChpbWcubmFtZSwgbmV3IEltYWdlKCkpOyAvLyBTdG9yZSBhIGR1bW15IGltYWdlIHRvIHByZXZlbnQgYnJlYWtpbmcgZHJhd0Fzc2V0LCBidXQgd2FyblxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpOyAvLyBSZXNvbHZlIGFueXdheSB0byBhbGxvdyBnYW1lIHRvIGNvbnRpbnVlLCBwb3RlbnRpYWxseSB3aXRoIGZhbGxiYWNrc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3Qgc291bmRQcm9taXNlcyA9IGdhbWVEYXRhLmFzc2V0cy5zb3VuZHMubWFwKHNuZCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXVkaW8gPSBuZXcgQXVkaW8oc25kLnBhdGgpO1xyXG4gICAgICAgICAgICBhdWRpby52b2x1bWUgPSBzbmQudm9sdW1lOyAvLyBTZXQgdm9sdW1lIGhlcmUgZHVyaW5nIGxvYWRpbmdcclxuICAgICAgICAgICAgLy8gU2FmYXJpIGFuZCBvdGhlciBicm93c2VycyByZXF1aXJlIHVzZXIgaW50ZXJhY3Rpb24gZm9yIG1lZGlhIHBsYXliYWNrLlxyXG4gICAgICAgICAgICAvLyBvbmNhbnBsYXl0aHJvdWdoIGluZGljYXRlcyB0aGUgYnJvd3NlciBjYW4gcGxheSBpdCwgYnV0IGl0IG1pZ2h0IG5vdCBhdXRvcGxheS5cclxuICAgICAgICAgICAgYXVkaW8ub25jYW5wbGF5dGhyb3VnaCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFzc2V0cy5zb3VuZHMuc2V0KHNuZC5uYW1lLCBhdWRpbyk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBsb2FkIHNvdW5kOiAke3NuZC5wYXRofWApO1xyXG4gICAgICAgICAgICAgICAgYXNzZXRzLnNvdW5kcy5zZXQoc25kLm5hbWUsIG5ldyBBdWRpbygpKTsgLy8gU3RvcmUgYSBkdW1teSBhdWRpbyB0byBwcmV2ZW50IGJyZWFraW5nXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7IC8vIFJlc29sdmUgYW55d2F5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIGZvciBjYXNlcyB3aGVyZSBvbmNhbnBsYXl0aHJvdWdoIGRvZXNuJ3QgZmlyZSBhcyBleHBlY3RlZCAoZS5nLiwgc29tZSBmb3JtYXRzL2Jyb3dzZXJzKVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghYXNzZXRzLnNvdW5kcy5oYXMoc25kLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzLnNvdW5kcy5zZXQoc25kLm5hbWUsIGF1ZGlvKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMDApOyAvLyBHaXZlIGl0IGEgc2Vjb25kIHRvIGxvYWRcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoWy4uLmltYWdlUHJvbWlzZXMsIC4uLnNvdW5kUHJvbWlzZXNdKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkFsbCBhc3NldHMgbG9hZGVkLlwiKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgYXNzZXRzIChzb21lIG1heSBoYXZlIGZhaWxlZCBidXQgYWxsb3dlZCBwcm9ncmVzc2lvbik6XCIsIGVycm9yKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHMgdXAgaW5pdGlhbCBnYW1lIHN0YXRlIGFmdGVyIGFzc2V0cyBhcmUgbG9hZGVkLCBhbmQgcmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycy5cclxuICovXHJcbmZ1bmN0aW9uIGluaXRHYW1lKCkge1xyXG4gICAgLy8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzIGZvciBwbGF5ZXIgaW5wdXRcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBoYW5kbGVLZXlVcCk7XHJcblxyXG4gICAgLy8gUHJlcGFyZSBhdWRpbyBlbGVtZW50c1xyXG4gICAgYmFja2dyb3VuZE11c2ljID0gYXNzZXRzLnNvdW5kcy5nZXQoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmJnbVNvdW5kTmFtZSkgfHwgbnVsbDtcclxuICAgIGlmIChiYWNrZ3JvdW5kTXVzaWMpIHtcclxuICAgICAgICBiYWNrZ3JvdW5kTXVzaWMubG9vcCA9IHRydWU7IC8vIExvb3AgYmFja2dyb3VuZCBtdXNpY1xyXG4gICAgICAgIC8vIFZvbHVtZSBpcyBhbHJlYWR5IHNldCBkdXJpbmcgbG9hZGluZyBpbiBsb2FkQXNzZXRzLCBubyBuZWVkIHRvIHNldCBhZ2FpbiBoZXJlLlxyXG4gICAgfVxyXG5cclxuICAgIGdhbWVPdmVyRWZmZWN0ID0gYXNzZXRzLnNvdW5kcy5nZXQoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmdhbWVPdmVyU291bmROYW1lKSB8fCBudWxsO1xyXG4gICAgaWYgKGdhbWVPdmVyRWZmZWN0KSB7XHJcbiAgICAgICAgLy8gVm9sdW1lIGlzIGFscmVhZHkgc2V0IGR1cmluZyBsb2FkaW5nIGluIGxvYWRBc3NldHMsIG5vIG5lZWQgdG8gc2V0IGFnYWluIGhlcmUuXHJcbiAgICB9XHJcblxyXG4gICAgY3VycmVudEdhbWVTdGF0ZSA9ICdUSVRMRSc7IC8vIFN0YXJ0IG9uIHRoZSB0aXRsZSBzY3JlZW5cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc2V0cyBnYW1lIHN0YXRlIHRvIHN0YXJ0IGEgbmV3IGdhbWUgKGZyb20gdGl0bGUgb3IgZ2FtZSBvdmVyIHNjcmVlbikuXHJcbiAqL1xyXG5mdW5jdGlvbiBuZXdHYW1lKCkge1xyXG4gICAgLy8gSW5pdGlhbGl6ZSBwbGF5ZXIgcG9zaXRpb24gYW5kIHNpemVcclxuICAgIHBsYXllciA9IHtcclxuICAgICAgICB4OiBjYW52YXMud2lkdGggLyAyIC0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnBsYXllcldpZHRoIC8gMixcclxuICAgICAgICB5OiBjYW52YXMuaGVpZ2h0IC0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnBsYXllckhlaWdodCAtIDIwLFxyXG4gICAgICAgIHdpZHRoOiBnYW1lRGF0YS5nYW1lU2V0dGluZ3MucGxheWVyV2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiBnYW1lRGF0YS5nYW1lU2V0dGluZ3MucGxheWVySGVpZ2h0LFxyXG4gICAgICAgIGR4OiAwIC8vIFBsYXllciBzdGFydHMgc3RhdGlvbmFyeVxyXG4gICAgfTtcclxuICAgIG9ic3RhY2xlcyA9IFtdOyAvLyBDbGVhciBhbGwgb2JzdGFjbGVzXHJcbiAgICBzY29yZSA9IDA7IC8vIFJlc2V0IHNjb3JlXHJcbiAgICBvYnN0YWNsZVNwYXduVGltZXIgPSAwOyAvLyBSZXNldCBvYnN0YWNsZSBzcGF3biB0aW1lclxyXG5cclxuICAgIGN1cnJlbnRHYW1lU3RhdGUgPSAnUExBWUlORyc7IC8vIENoYW5nZSBzdGF0ZSB0byBwbGF5aW5nXHJcbiAgICBpbnB1dC5zcGFjZSA9IGZhbHNlOyAvLyBDb25zdW1lIHRoZSAnc3BhY2UnIGlucHV0IHRoYXQgdHJpZ2dlcmVkIG5ld0dhbWVcclxuXHJcbiAgICAvLyBQbGF5IGJhY2tncm91bmQgbXVzaWMgKGhhbmRsaW5nIGJyb3dzZXIgYXV0b3BsYXkgcG9saWNpZXMpXHJcbiAgICBpZiAoYmFja2dyb3VuZE11c2ljKSB7XHJcbiAgICAgICAgYmFja2dyb3VuZE11c2ljLmN1cnJlbnRUaW1lID0gMDsgLy8gUmV3aW5kIHRvIHN0YXJ0XHJcbiAgICAgICAgYmFja2dyb3VuZE11c2ljLnBsYXkoKS5jYXRjaChlID0+IGNvbnNvbGUud2FybihcIkJhY2tncm91bmQgbXVzaWMgYXV0b3BsYXkgcHJldmVudGVkOlwiLCBlKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYWluIGdhbWUgbG9vcCwgY2FsbGVkIGNvbnRpbnVvdXNseSB2aWEgcmVxdWVzdEFuaW1hdGlvbkZyYW1lLlxyXG4gKiBAcGFyYW0gY3VycmVudFRpbWUgVGhlIERPTUhpZ2hSZXNUaW1lU3RhbXAgZm9yIHRoZSBjdXJyZW50IGZyYW1lLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2FtZUxvb3AoY3VycmVudFRpbWU6IG51bWJlcikge1xyXG4gICAgaWYgKGxhc3RUaW1lID09PSAwKSBsYXN0VGltZSA9IGN1cnJlbnRUaW1lO1xyXG4gICAgZGVsdGFUaW1lID0gKGN1cnJlbnRUaW1lIC0gbGFzdFRpbWUpIC8gMTAwMDsgLy8gQ29udmVydCBkZWx0YSB0aW1lIHRvIHNlY29uZHNcclxuICAgIGxhc3RUaW1lID0gY3VycmVudFRpbWU7XHJcblxyXG4gICAgdXBkYXRlKGRlbHRhVGltZSk7IC8vIFVwZGF0ZSBnYW1lIGxvZ2ljXHJcbiAgICBkcmF3KCk7ICAgICAgICAgICAvLyBEcmF3IGdhbWUgZWxlbWVudHNcclxuXHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApOyAvLyBSZXF1ZXN0IG5leHQgZnJhbWVcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZXMgZ2FtZSBsb2dpYyBiYXNlZCBvbiB0aGUgY3VycmVudCBnYW1lIHN0YXRlLlxyXG4gKiBAcGFyYW0gZHQgVGltZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IGZyYW1lIGluIHNlY29uZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGUoZHQ6IG51bWJlcikge1xyXG4gICAgc3dpdGNoIChjdXJyZW50R2FtZVN0YXRlKSB7XHJcbiAgICAgICAgY2FzZSAnTE9BRElORyc6XHJcbiAgICAgICAgICAgIC8vIE5vIGdhbWUgbG9naWMgdXBkYXRlIG5lZWRlZCB3aGlsZSBsb2FkaW5nXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ1RJVExFJzpcclxuICAgICAgICAgICAgaWYgKGlucHV0LnNwYWNlKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdHYW1lKCk7IC8vIFN0YXJ0IGdhbWUgb24gc3BhY2UgcHJlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdQTEFZSU5HJzpcclxuICAgICAgICAgICAgLy8gVXBkYXRlIHBsYXllciBwb3NpdGlvblxyXG4gICAgICAgICAgICBwbGF5ZXIueCArPSBwbGF5ZXIuZHggKiBnYW1lRGF0YS5nYW1lU2V0dGluZ3MucGxheWVyU3BlZWQgKiBkdDtcclxuICAgICAgICAgICAgLy8gQ2xhbXAgcGxheWVyIHdpdGhpbiBjYW52YXMgYm91bmRzXHJcbiAgICAgICAgICAgIHBsYXllci54ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY2FudmFzLndpZHRoIC0gcGxheWVyLndpZHRoLCBwbGF5ZXIueCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gT2JzdGFjbGUgc3Bhd25pbmcgbG9naWNcclxuICAgICAgICAgICAgb2JzdGFjbGVTcGF3blRpbWVyICs9IGR0ICogMTAwMDsgLy8gQWNjdW11bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgICAgICAgICBpZiAob2JzdGFjbGVTcGF3blRpbWVyID49IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5vYnN0YWNsZVNwYXduSW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9ic3RhY2xlV2lkdGggPSBNYXRoLnJhbmRvbSgpICogKGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5vYnN0YWNsZU1heFNpemUgLSBnYW1lRGF0YS5nYW1lU2V0dGluZ3Mub2JzdGFjbGVNaW5TaXplKSArIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5vYnN0YWNsZU1pblNpemU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYnN0YWNsZUhlaWdodCA9IG9ic3RhY2xlV2lkdGg7IC8vIE1ha2Ugb2JzdGFjbGVzIHNxdWFyZSBmb3Igc2ltcGxpY2l0eVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JzdGFjbGVYID0gTWF0aC5yYW5kb20oKSAqIChjYW52YXMud2lkdGggLSBvYnN0YWNsZVdpZHRoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9ic3RhY2xlU3BlZWQgPSBNYXRoLnJhbmRvbSgpICogKGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5vYnN0YWNsZU1heFNwZWVkIC0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLm9ic3RhY2xlTWluU3BlZWQpICsgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLm9ic3RhY2xlTWluU3BlZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgb2JzdGFjbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IG9ic3RhY2xlWCxcclxuICAgICAgICAgICAgICAgICAgICB5OiAtb2JzdGFjbGVIZWlnaHQsIC8vIFN0YXJ0IG9ic3RhY2xlIGp1c3QgYWJvdmUgdGhlIGNhbnZhc1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBvYnN0YWNsZVdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogb2JzdGFjbGVIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IG9ic3RhY2xlU3BlZWRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgb2JzdGFjbGVTcGF3blRpbWVyID0gMDsgLy8gUmVzZXQgdGltZXJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIG9ic3RhY2xlIHBvc2l0aW9ucyBhbmQgY2hlY2sgZm9yIGNvbGxpc2lvbnNcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYnN0YWNsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9icyA9IG9ic3RhY2xlc1tpXTtcclxuICAgICAgICAgICAgICAgIG9icy55ICs9IG9icy5zcGVlZCAqIGR0OyAvLyBNb3ZlIG9ic3RhY2xlIGRvd253YXJkc1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBBQUJCIGNvbGxpc2lvbiBkZXRlY3Rpb25cclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIueCA8IG9icy54ICsgb2JzLndpZHRoICYmXHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnggKyBwbGF5ZXIud2lkdGggPiBvYnMueCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllci55IDwgb2JzLnkgKyBvYnMuaGVpZ2h0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnkgKyBwbGF5ZXIuaGVpZ2h0ID4gb2JzLnlcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbGxpc2lvbiBkZXRlY3RlZCEgR2FtZSBPdmVyXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEdhbWVTdGF0ZSA9ICdHQU1FX09WRVInO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lT3ZlckVmZmVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lT3ZlckVmZmVjdC5jdXJyZW50VGltZSA9IDA7IC8vIFJld2luZCBhbmQgcGxheSBzb3VuZCBlZmZlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU92ZXJFZmZlY3QucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS53YXJuKFwiR2FtZSBvdmVyIHNvdW5kIHBsYXkgcHJldmVudGVkOlwiLCBlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYWNrZ3JvdW5kTXVzaWMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZE11c2ljLnBhdXNlKCk7IC8vIFBhdXNlIEJHTVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kTXVzaWMuY3VycmVudFRpbWUgPSAwOyAvLyBSZXdpbmQgQkdNIGZvciBuZXh0IGdhbWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIEV4aXQgbG9vcCwgZ2FtZSBzdGF0ZSBjaGFuZ2VkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBvZmYtc2NyZWVuIG9ic3RhY2xlcyBhbmQgdXBkYXRlIHNjb3JlXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBvYnN0YWNsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYnN0YWNsZXNbaV0ueSA+IGNhbnZhcy5oZWlnaHQpIHsgLy8gT2JzdGFjbGUgaGFzIG1vdmVkIG9mZi1zY3JlZW5cclxuICAgICAgICAgICAgICAgICAgICBvYnN0YWNsZXMuc3BsaWNlKGksIDEpOyAvLyBSZW1vdmUgaXRcclxuICAgICAgICAgICAgICAgICAgICBzY29yZSArPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3Muc2NvcmVJbmNyZW1lbnQ7IC8vIEluY3JlYXNlIHNjb3JlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnR0FNRV9PVkVSJzpcclxuICAgICAgICAgICAgaWYgKGlucHV0LnNwYWNlKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdHYW1lKCk7IC8vIFJlc3RhcnQgZ2FtZSBvbiBzcGFjZSBwcmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogRHJhd3MgYWxsIGdhbWUgZWxlbWVudHMgb24gdGhlIGNhbnZhcyBiYXNlZCBvbiB0aGUgY3VycmVudCBnYW1lIHN0YXRlLlxyXG4gKi9cclxuZnVuY3Rpb24gZHJhdygpIHtcclxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsgLy8gQ2xlYXIgdGhlIGVudGlyZSBjYW52YXNcclxuXHJcbiAgICBzd2l0Y2ggKGN1cnJlbnRHYW1lU3RhdGUpIHtcclxuICAgICAgICBjYXNlICdMT0FESU5HJzpcclxuICAgICAgICAgICAgZHJhd1RleHQoJ0xvYWRpbmcgYXNzZXRzLi4uJywgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIsICcyNHB4IEFyaWFsJywgJyNmZmZmZmYnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnVElUTEUnOlxyXG4gICAgICAgICAgICBkcmF3VGV4dChnYW1lRGF0YS5nYW1lU2V0dGluZ3MudGl0bGVTY3JlZW5UZXh0LCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiAtIDUwLCBnYW1lRGF0YS5nYW1lU2V0dGluZ3MudGl0bGVTY3JlZW5Gb250LCBnYW1lRGF0YS5nYW1lU2V0dGluZ3MudGl0bGVTY3JlZW5UZXh0Q29sb3IpO1xyXG4gICAgICAgICAgICBkcmF3VGV4dChnYW1lRGF0YS5nYW1lU2V0dGluZ3MucHJlc3NTcGFjZVRleHQsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyICsgMjAsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5zY29yZUZvbnQsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy50aXRsZVNjcmVlblRleHRDb2xvcik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ1BMQVlJTkcnOlxyXG4gICAgICAgICAgICAvLyBEcmF3IHBsYXllclxyXG4gICAgICAgICAgICBkcmF3QXNzZXQoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnBsYXllckltYWdlTmFtZSwgcGxheWVyLngsIHBsYXllci55LCBwbGF5ZXIud2lkdGgsIHBsYXllci5oZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgLy8gRHJhdyBvYnN0YWNsZXNcclxuICAgICAgICAgICAgZm9yIChjb25zdCBvYnMgb2Ygb2JzdGFjbGVzKSB7XHJcbiAgICAgICAgICAgICAgICBkcmF3QXNzZXQoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLm9ic3RhY2xlSW1hZ2VOYW1lLCBvYnMueCwgb2JzLnksIG9icy53aWR0aCwgb2JzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIERyYXcgc2NvcmVcclxuICAgICAgICAgICAgY3R4LmZvbnQgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3Muc2NvcmVGb250O1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnNjb3JlVGV4dENvbG9yO1xyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2xlZnQnOyAvLyBBbGlnbiBzY29yZSB0byB0aGUgbGVmdFxyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQoYFNjb3JlOiAke3Njb3JlfWAsIDEwLCAzMCk7IC8vIFBvc2l0aW9uIHNjb3JlIGF0IHRvcC1sZWZ0XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0dBTUVfT1ZFUic6XHJcbiAgICAgICAgICAgIGRyYXdUZXh0KGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5nYW1lT3ZlclNjcmVlblRleHQsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyIC0gNTAsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5nYW1lT3ZlckZvbnQsIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5nYW1lT3ZlclRleHRDb2xvcik7XHJcbiAgICAgICAgICAgIGRyYXdUZXh0KGBGaW5hbCBTY29yZTogJHtzY29yZX1gLCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiwgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnNjb3JlRm9udCwgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmdhbWVPdmVyVGV4dENvbG9yKTtcclxuICAgICAgICAgICAgZHJhd1RleHQoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnByZXNzU3BhY2VUZXh0LCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiArIDUwLCBnYW1lRGF0YS5nYW1lU2V0dGluZ3Muc2NvcmVGb250LCBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZ2FtZU92ZXJUZXh0Q29sb3IpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIEhlbHBlciBGdW5jdGlvbnMgLS0tXHJcblxyXG4vKipcclxuICogRHJhd3MgdGV4dCBvbiB0aGUgY2FudmFzLlxyXG4gKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCBzdHJpbmcgdG8gZHJhdy5cclxuICogQHBhcmFtIHggWC1jb29yZGluYXRlIChjZW50ZXIpLlxyXG4gKiBAcGFyYW0geSBZLWNvb3JkaW5hdGUgKGNlbnRlcikuXHJcbiAqIEBwYXJhbSBmb250IENTUyBmb250IHN0cmluZyAoZS5nLiwgXCIzMHB4IEFyaWFsXCIpLlxyXG4gKiBAcGFyYW0gY29sb3IgQ1NTIGNvbG9yIHN0cmluZyAoZS5nLiwgXCIjRkZGRkZGXCIpLlxyXG4gKi9cclxuZnVuY3Rpb24gZHJhd1RleHQodGV4dDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZm9udDogc3RyaW5nLCBjb2xvcjogc3RyaW5nKSB7XHJcbiAgICBjdHguZm9udCA9IGZvbnQ7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7XHJcbiAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7IC8vIENlbnRlciB2ZXJ0aWNhbGx5IGFzIHdlbGxcclxuICAgIGN0eC5maWxsVGV4dCh0ZXh0LCB4LCB5KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERyYXdzIGFuIGltYWdlIGFzc2V0IG9uIHRoZSBjYW52YXMsIHNjYWxlZCB0byB0aGUgc3BlY2lmaWVkIGRpbWVuc2lvbnMuXHJcbiAqIElmIHRoZSBpbWFnZSBhc3NldCBpcyBub3QgZm91bmQsIGEgY29sb3JlZCByZWN0YW5nbGUgaXMgZHJhd24gYXMgYSBmYWxsYmFjay5cclxuICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGltYWdlIGFzc2V0IChhcyBkZWZpbmVkIGluIGRhdGEuanNvbikuXHJcbiAqIEBwYXJhbSB4IFgtY29vcmRpbmF0ZSBvZiB0aGUgdG9wLWxlZnQgY29ybmVyLlxyXG4gKiBAcGFyYW0geSBZLWNvb3JkaW5hdGUgb2YgdGhlIHRvcC1sZWZ0IGNvcm5lci5cclxuICogQHBhcmFtIHdpZHRoIERlc2lyZWQgd2lkdGggZm9yIGRyYXdpbmcuXHJcbiAqIEBwYXJhbSBoZWlnaHQgRGVzaXJlZCBoZWlnaHQgZm9yIGRyYXdpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBkcmF3QXNzZXQobmFtZTogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGltYWdlID0gYXNzZXRzLmltYWdlcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoaW1hZ2UgJiYgaW1hZ2UuY29tcGxldGUgJiYgaW1hZ2UubmF0dXJhbFdpZHRoID4gMCkge1xyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGYWxsYmFjazogZHJhdyBhIGNvbG9yZWQgcmVjdGFuZ2xlIGlmIGltYWdlIGlzIG5vdCBsb2FkZWQgb3IgaW52YWxpZFxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBuYW1lID09PSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MucGxheWVySW1hZ2VOYW1lID8gJ2JsdWUnIDogJ3JlZCc7IC8vIERpZmZlcmVudCBjb2xvcnMgZm9yIHBsYXllci9vYnN0YWNsZXNcclxuICAgICAgICBjdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgLy8gY29uc29sZS53YXJuKGBBc3NldCBpbWFnZSAnJHtuYW1lfScgbm90IGZvdW5kIG9yIG5vdCBsb2FkZWQuIERyYXdpbmcgZmFsbGJhY2sgcmVjdGFuZ2xlLmApOyAvLyBVbmNvbW1lbnQgZm9yIGRlYnVnZ2luZ1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgcGxheWVyJ3MgaG9yaXpvbnRhbCBtb3ZlbWVudCBkaXJlY3Rpb24gYmFzZWQgb24gY3VycmVudCBpbnB1dC5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVBsYXllckRpcmVjdGlvbigpIHtcclxuICAgIGlmIChwbGF5ZXIpIHsgLy8gRW5zdXJlIHBsYXllciBvYmplY3QgZXhpc3RzIGJlZm9yZSB1cGRhdGluZ1xyXG4gICAgICAgIGlmIChpbnB1dC5sZWZ0ICYmICFpbnB1dC5yaWdodCkge1xyXG4gICAgICAgICAgICBwbGF5ZXIuZHggPSAtMTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnJpZ2h0ICYmICFpbnB1dC5sZWZ0KSB7XHJcbiAgICAgICAgICAgIHBsYXllci5keCA9IDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGxheWVyLmR4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIGtleWJvYXJkIGtleSBkb3duIGV2ZW50cy5cclxuICogQHBhcmFtIGV2ZW50IFRoZSBLZXlib2FyZEV2ZW50IG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZUtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dMZWZ0Jykge1xyXG4gICAgICAgIGlucHV0LmxlZnQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dSaWdodCcpIHtcclxuICAgICAgICBpbnB1dC5yaWdodCA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdTcGFjZScpIHtcclxuICAgICAgICBpbnB1dC5zcGFjZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQbGF5ZXJEaXJlY3Rpb24oKTsgLy8gVXBkYXRlIHBsYXllciBtb3ZlbWVudCBpbW1lZGlhdGVseVxyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlcyBrZXlib2FyZCBrZXkgdXAgZXZlbnRzLlxyXG4gKiBAcGFyYW0gZXZlbnQgVGhlIEtleWJvYXJkRXZlbnQgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dMZWZ0Jykge1xyXG4gICAgICAgIGlucHV0LmxlZnQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93UmlnaHQnKSB7XHJcbiAgICAgICAgaW5wdXQucmlnaHQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIFNwYWNlIGtleSAndXAnIGRvZXNuJ3QgaW1tZWRpYXRlbHkgY2xlYXIgJ2lucHV0LnNwYWNlJyBiZWNhdXNlIGl0J3NcclxuICAgIC8vIGNvbnN1bWVkIGJ5IHRoZSBnYW1lIHN0YXRlIGxvZ2ljIHdoZW4gc3RhcnRpbmcvcmVzdGFydGluZyB0aGUgZ2FtZS5cclxuICAgIHVwZGF0ZVBsYXllckRpcmVjdGlvbigpOyAvLyBVcGRhdGUgcGxheWVyIG1vdmVtZW50IGltbWVkaWF0ZWx5XHJcbn1cclxuXHJcbi8vIFN0YXJ0IHRoZSBnYW1lIHdoZW4gdGhlIERPTSBpcyBmdWxseSBsb2FkZWRcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGxvYWRHYW1lKTsiXSwKICAibWFwcGluZ3MiOiAiQUFtREEsSUFBSTtBQUNKLElBQUk7QUFDSixJQUFJO0FBT0osTUFBTSxTQUF1QjtBQUFBLEVBQ3pCLFFBQVEsb0JBQUksSUFBSTtBQUFBLEVBQ2hCLFFBQVEsb0JBQUksSUFBSTtBQUNwQjtBQUlBLElBQUksbUJBQThCO0FBR2xDLElBQUksV0FBVztBQUNmLElBQUksWUFBWTtBQVVoQixJQUFJO0FBVUosSUFBSSxZQUF3QixDQUFDO0FBRTdCLElBQUksUUFBUTtBQUNaLElBQUkscUJBQXFCO0FBUXpCLE1BQU0sUUFBb0I7QUFBQSxFQUN0QixNQUFNO0FBQUEsRUFDTixPQUFPO0FBQUEsRUFDUCxPQUFPO0FBQ1g7QUFHQSxJQUFJLGtCQUEyQztBQUMvQyxJQUFJLGlCQUEwQztBQVE5QyxlQUFlLFdBQVc7QUFDdEIsV0FBUyxTQUFTLGVBQWUsWUFBWTtBQUM3QyxNQUFJLENBQUMsUUFBUTtBQUNULFlBQVEsTUFBTSxnREFBZ0Q7QUFDOUQ7QUFBQSxFQUNKO0FBQ0EsUUFBTSxPQUFPLFdBQVcsSUFBSTtBQUM1QixNQUFJLENBQUMsS0FBSztBQUNOLFlBQVEsTUFBTSxxQ0FBcUM7QUFDbkQ7QUFBQSxFQUNKO0FBRUEsTUFBSTtBQUVBLFVBQU0sV0FBVyxNQUFNLE1BQU0sV0FBVztBQUN4QyxlQUFXLE1BQU0sU0FBUyxLQUFLO0FBRy9CLFdBQU8sUUFBUSxTQUFTLGFBQWE7QUFDckMsV0FBTyxTQUFTLFNBQVMsYUFBYTtBQUd0QyxVQUFNLFdBQVc7QUFHakIsYUFBUztBQUNULDBCQUFzQixRQUFRO0FBQUEsRUFFbEMsU0FBUyxPQUFPO0FBQ1osWUFBUSxNQUFNLHVDQUF1QyxLQUFLO0FBRTFELFFBQUksVUFB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
