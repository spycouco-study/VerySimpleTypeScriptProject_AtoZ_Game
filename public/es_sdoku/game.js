var GameState = /* @__PURE__ */ ((GameState2) => {
  GameState2[GameState2["TITLE"] = 0] = "TITLE";
  GameState2[GameState2["PLAYING"] = 1] = "PLAYING";
  GameState2[GameState2["GAME_OVER"] = 2] = "GAME_OVER";
  return GameState2;
})(GameState || {});
var InputKey = /* @__PURE__ */ ((InputKey2) => {
  InputKey2["ARROW_LEFT"] = "ArrowLeft";
  InputKey2["ARROW_RIGHT"] = "ArrowRight";
  InputKey2["ARROW_UP"] = "ArrowUp";
  InputKey2["ARROW_DOWN"] = "ArrowDown";
  InputKey2["SPACE"] = " ";
  InputKey2["ENTER"] = "Enter";
  InputKey2["KEY_G"] = "g";
  return InputKey2;
})(InputKey || {});
let canvas;
let ctx;
let gameConfig;
let loadedImages = /* @__PURE__ */ new Map();
let loadedSounds = /* @__PURE__ */ new Map();
let inputState = /* @__PURE__ */ new Set();
let currentState = 0 /* TITLE */;
let lastFrameTime = 0;
let player;
let playerBullets = [];
let backgroundMusic;
class GameObject {
  constructor(x, y, width, height, imageName, images) {
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.imageName = imageName;
    this.image = images.get(imageName);
  }
  draw(ctx2) {
    if (this.image) {
      ctx2.drawImage(this.image, this.x, this.y, this.width, this.height);
    } else {
      ctx2.fillStyle = "red";
      ctx2.fillRect(this.x, this.y, this.width, this.height);
    }
  }
}
class Player extends GameObject {
  // Current cooldown
  constructor(playerSettings, bulletSettings, images) {
    super(playerSettings.initialX, playerSettings.initialY, playerSettings.width, playerSettings.height, playerSettings.imageName, images);
    // Time between shots
    this.fireCooldown = 0;
    this.speed = playerSettings.speed;
    this.bulletSettings = bulletSettings;
    this.fireDelay = 1 / bulletSettings.fireRate;
  }
  update(deltaTime) {
    let dx = 0;
    let dy = 0;
    if (inputState.has("ArrowLeft" /* ARROW_LEFT */)) dx -= this.speed * deltaTime;
    if (inputState.has("ArrowRight" /* ARROW_RIGHT */)) dx += this.speed * deltaTime;
    if (inputState.has("ArrowUp" /* ARROW_UP */)) dy -= this.speed * deltaTime;
    if (inputState.has("ArrowDown" /* ARROW_DOWN */)) dy += this.speed * deltaTime;
    this.x += dx;
    this.y += dy;
    this.x = Math.max(0, Math.min(canvas.width - this.width, this.x));
    this.y = Math.max(0, Math.min(canvas.height - this.height, this.y));
    if (this.fireCooldown > 0) {
      this.fireCooldown -= deltaTime;
    }
    if (inputState.has(" " /* SPACE */) && this.fireCooldown <= 0) {
      this.fireCooldown = this.fireDelay;
      const bulletX = this.x + this.width / 2 - this.bulletSettings.width / 2;
      const bulletY = this.y;
      const newBullet = new Bullet(
        bulletX,
        bulletY,
        this.bulletSettings.width,
        this.bulletSettings.height,
        this.bulletSettings.imageName,
        this.bulletSettings.speed,
        loadedImages
      );
      playerBullets.push(newBullet);
      const shootSound = loadedSounds.get("shoot_sound");
      if (shootSound) {
        const clonedSound = shootSound.cloneNode();
        clonedSound.volume = shootSound.volume;
        clonedSound.play().catch((e) => console.error("Shoot sound playback failed:", e));
      }
    }
  }
}
class Bullet extends GameObject {
  constructor(x, y, width, height, imageName, speed, images) {
    super(x, y, width, height, imageName, images);
    this.speed = speed;
  }
  update(deltaTime) {
    this.y -= this.speed * deltaTime;
  }
}
async function loadGameData() {
  const response = await fetch("data.json");
  if (!response.ok) {
    throw new Error(`Failed to load data.json: ${response.statusText}`);
  }
  return response.json();
}
async function loadAssets(config) {
  const imagePromises = [];
  const soundPromises = [];
  for (const imgConfig of config.images) {
    const img = new Image();
    img.src = imgConfig.path;
    const promise = new Promise((resolve, reject) => {
      img.onload = () => {
        loadedImages.set(imgConfig.name, img);
        resolve();
      };
      img.onerror = () => reject(new Error(`Failed to load image: ${imgConfig.path}`));
    });
    imagePromises.push(promise);
  }
  for (const soundConfig of config.sounds) {
    const audio = new Audio(soundConfig.path);
    audio.volume = soundConfig.volume;
    const promise = new Promise((resolve, reject) => {
      audio.oncanplaythrough = () => {
        loadedSounds.set(soundConfig.name, audio);
        resolve();
      };
      audio.onerror = () => reject(new Error(`Failed to load sound: ${soundConfig.path}`));
      audio.load();
    });
    soundPromises.push(promise);
  }
  await Promise.all([...imagePromises, ...soundPromises]);
}
function resetGame() {
  player.x = gameConfig.playerSettings.initialX;
  player.y = gameConfig.playerSettings.initialY;
  playerBullets = [];
}
function update(deltaTime) {
  switch (currentState) {
    case 0 /* TITLE */:
      if (inputState.has(" " /* SPACE */)) {
        currentState = 1 /* PLAYING */;
        inputState.delete(" " /* SPACE */);
        resetGame();
        if (backgroundMusic) {
          backgroundMusic.loop = true;
          backgroundMusic.currentTime = 0;
          backgroundMusic.play().catch((e) => console.error("Background music playback failed:", e));
        }
        const startSound = loadedSounds.get("start_sound");
        if (startSound) {
          startSound.currentTime = 0;
          startSound.play().catch((e) => console.error("Start sound playback failed:", e));
        }
      }
      break;
    case 1 /* PLAYING */:
      player.update(deltaTime);
      for (let i = playerBullets.length - 1; i >= 0; i--) {
        const bullet = playerBullets[i];
        bullet.update(deltaTime);
        if (bullet.y + bullet.height < 0) {
          playerBullets.splice(i, 1);
        }
      }
      if (inputState.has("g" /* KEY_G */)) {
        currentState = 2 /* GAME_OVER */;
        inputState.delete("g" /* KEY_G */);
        if (backgroundMusic) {
          backgroundMusic.pause();
        }
        const gameOverSound = loadedSounds.get("explosion_sound");
        if (gameOverSound) {
          const clonedSound = gameOverSound.cloneNode();
          clonedSound.volume = gameOverSound.volume;
          clonedSound.currentTime = 0;
          clonedSound.play().catch((e) => console.error("Game Over sound playback failed:", e));
        }
      }
      break;
    case 2 /* GAME_OVER */:
      if (inputState.has("Enter" /* ENTER */)) {
        currentState = 0 /* TITLE */;
        inputState.delete("Enter" /* ENTER */);
      }
      break;
  }
}
function draw() {
  ctx.fillStyle = gameConfig.gameSettings.backgroundColor;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.font = `48px ${gameConfig.gameSettings.fontFamily}`;
  ctx.fillStyle = gameConfig.gameSettings.titleTextColor;
  ctx.textAlign = "center";
  switch (currentState) {
    case 0 /* TITLE */:
      ctx.fillText(gameConfig.gameSettings.titleText, canvas.width / 2, canvas.height / 2 - 50);
      ctx.font = `24px ${gameConfig.gameSettings.fontFamily}`;
      ctx.fillText(gameConfig.gameSettings.startInstruction, canvas.width / 2, canvas.height / 2 + 20);
      break;
    case 1 /* PLAYING */:
      player.draw(ctx);
      for (const bullet of playerBullets) {
        bullet.draw(ctx);
      }
      break;
    case 2 /* GAME_OVER */:
      ctx.fillText(gameConfig.gameSettings.gameOverText, canvas.width / 2, canvas.height / 2);
      ctx.font = `24px ${gameConfig.gameSettings.fontFamily}`;
      ctx.fillText(gameConfig.gameSettings.restartInstruction, canvas.width / 2, canvas.height / 2 + 50);
      break;
  }
}
function gameLoop(currentTime) {
  const deltaTime = (currentTime - lastFrameTime) / 1e3;
  lastFrameTime = currentTime;
  update(deltaTime);
  draw();
  requestAnimationFrame(gameLoop);
}
async function init() {
  canvas = document.getElementById("gameCanvas");
  if (!canvas) {
    console.error('Canvas element with ID "gameCanvas" not found.');
    return;
  }
  ctx = canvas.getContext("2d");
  try {
    gameConfig = await loadGameData();
    console.log("Game data loaded:", gameConfig);
    canvas.width = gameConfig.gameSettings.canvasWidth;
    canvas.height = gameConfig.gameSettings.canvasHeight;
    await loadAssets(gameConfig.assets);
    console.log("Assets loaded:", loadedImages.size, "images,", loadedSounds.size, "sounds");
    player = new Player(gameConfig.playerSettings, gameConfig.bulletSettings, loadedImages);
    backgroundMusic = loadedSounds.get("bgm");
    window.addEventListener("keydown", (e) => {
      const key = e.key;
      if (Object.values(InputKey).includes(key)) {
        inputState.add(key);
        e.preventDefault();
      }
    });
    window.addEventListener("keyup", (e) => {
      const key = e.key;
      if (Object.values(InputKey).includes(key)) {
        inputState.delete(key);
      }
    });
    lastFrameTime = performance.now();
    requestAnimationFrame(gameLoop);
  } catch (error) {
    console.error("Failed to initialize game:", error);
  }
}
window.onload = init;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiZ2FtZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gRW51bXMgZm9yIGdhbWUgc3RhdGVzIGFuZCBpbnB1dCBrZXlzXHJcbmVudW0gR2FtZVN0YXRlIHtcclxuICAgIFRJVExFLFxyXG4gICAgUExBWUlORyxcclxuICAgIEdBTUVfT1ZFUlxyXG59XHJcblxyXG5lbnVtIElucHV0S2V5IHtcclxuICAgIEFSUk9XX0xFRlQgPSBcIkFycm93TGVmdFwiLFxyXG4gICAgQVJST1dfUklHSFQgPSBcIkFycm93UmlnaHRcIixcclxuICAgIEFSUk9XX1VQID0gXCJBcnJvd1VwXCIsXHJcbiAgICBBUlJPV19ET1dOID0gXCJBcnJvd0Rvd25cIixcclxuICAgIFNQQUNFID0gXCIgXCIsXHJcbiAgICBFTlRFUiA9IFwiRW50ZXJcIixcclxuICAgIEtFWV9HID0gXCJnXCIgLy8gQWRkZWQgZm9yIGRlYnVnZ2luZyBnYW1lIG92ZXIgdHJhbnNpdGlvblxyXG59XHJcblxyXG4vLyBJbnRlcmZhY2VzIGZvciBkYXRhLmpzb24gc3RydWN0dXJlXHJcbmludGVyZmFjZSBJbWFnZUNvbmZpZyB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwYXRoOiBzdHJpbmc7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTb3VuZENvbmZpZyB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwYXRoOiBzdHJpbmc7XHJcbiAgICBkdXJhdGlvbl9zZWNvbmRzOiBudW1iZXI7XHJcbiAgICB2b2x1bWU6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEFzc2V0c0NvbmZpZyB7XHJcbiAgICBpbWFnZXM6IEltYWdlQ29uZmlnW107XHJcbiAgICBzb3VuZHM6IFNvdW5kQ29uZmlnW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBHYW1lU2V0dGluZ3Mge1xyXG4gICAgY2FudmFzV2lkdGg6IG51bWJlcjtcclxuICAgIGNhbnZhc0hlaWdodDogbnVtYmVyO1xyXG4gICAgdGl0bGVUZXh0OiBzdHJpbmc7XHJcbiAgICBzdGFydEluc3RydWN0aW9uOiBzdHJpbmc7XHJcbiAgICBnYW1lT3ZlclRleHQ6IHN0cmluZztcclxuICAgIHJlc3RhcnRJbnN0cnVjdGlvbjogc3RyaW5nOyAvLyBBZGRlZCByZXN0YXJ0IGluc3RydWN0aW9uXHJcbiAgICB0aXRsZVRleHRDb2xvcjogc3RyaW5nO1xyXG4gICAgYmFja2dyb3VuZENvbG9yOiBzdHJpbmc7XHJcbiAgICBmb250RmFtaWx5OiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBQbGF5ZXJTZXR0aW5ncyB7XHJcbiAgICBpbWFnZU5hbWU6IHN0cmluZztcclxuICAgIGluaXRpYWxYOiBudW1iZXI7XHJcbiAgICBpbml0aWFsWTogbnVtYmVyO1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG4gICAgc3BlZWQ6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEJ1bGxldFNldHRpbmdzIHtcclxuICAgIGltYWdlTmFtZTogc3RyaW5nO1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG4gICAgc3BlZWQ6IG51bWJlcjtcclxuICAgIGZpcmVSYXRlOiBudW1iZXI7IC8vIEJ1bGxldHMgcGVyIHNlY29uZFxyXG59XHJcblxyXG5pbnRlcmZhY2UgR2FtZUNvbmZpZyB7XHJcbiAgICBnYW1lU2V0dGluZ3M6IEdhbWVTZXR0aW5ncztcclxuICAgIHBsYXllclNldHRpbmdzOiBQbGF5ZXJTZXR0aW5ncztcclxuICAgIGJ1bGxldFNldHRpbmdzOiBCdWxsZXRTZXR0aW5nczsgLy8gQWRkZWQgYnVsbGV0IHNldHRpbmdzXHJcbiAgICBhc3NldHM6IEFzc2V0c0NvbmZpZztcclxufVxyXG5cclxuLy8gR2xvYmFsIGdhbWUgdmFyaWFibGVzXHJcbmxldCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG5sZXQgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbmxldCBnYW1lQ29uZmlnOiBHYW1lQ29uZmlnO1xyXG5sZXQgbG9hZGVkSW1hZ2VzOiBNYXA8c3RyaW5nLCBIVE1MSW1hZ2VFbGVtZW50PiA9IG5ldyBNYXAoKTtcclxubGV0IGxvYWRlZFNvdW5kczogTWFwPHN0cmluZywgSFRNTEF1ZGlvRWxlbWVudD4gPSBuZXcgTWFwKCk7XHJcbmxldCBpbnB1dFN0YXRlOiBTZXQ8SW5wdXRLZXk+ID0gbmV3IFNldCgpO1xyXG5sZXQgY3VycmVudFN0YXRlOiBHYW1lU3RhdGUgPSBHYW1lU3RhdGUuVElUTEU7XHJcbmxldCBsYXN0RnJhbWVUaW1lOiBudW1iZXIgPSAwO1xyXG5sZXQgcGxheWVyOiBQbGF5ZXI7XHJcbmxldCBwbGF5ZXJCdWxsZXRzOiBCdWxsZXRbXSA9IFtdOyAvLyBBcnJheSB0byBob2xkIGFjdGl2ZSBwbGF5ZXIgYnVsbGV0c1xyXG5sZXQgYmFja2dyb3VuZE11c2ljOiBIVE1MQXVkaW9FbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuLy8gR2FtZSBPYmplY3QgYmFzZSBjbGFzcyAoY2FuIGJlIGV4dGVuZGVkIGZvciBlbmVtaWVzLCBidWxsZXRzIGV0Yy4pXHJcbmNsYXNzIEdhbWVPYmplY3Qge1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG4gICAgaW1hZ2VOYW1lOiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBpbWFnZU5hbWU6IHN0cmluZywgaW1hZ2VzOiBNYXA8c3RyaW5nLCBIVE1MSW1hZ2VFbGVtZW50Pikge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5pbWFnZU5hbWUgPSBpbWFnZU5hbWU7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IGltYWdlcy5nZXQoaW1hZ2VOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2UpIHtcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlLCB0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBkcmF3IGEgY29sb3JlZCByZWN0YW5nbGUgaWYgaW1hZ2Ugbm90IGZvdW5kXHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmVkJztcclxuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBQbGF5ZXIgY2xhc3NcclxuY2xhc3MgUGxheWVyIGV4dGVuZHMgR2FtZU9iamVjdCB7XHJcbiAgICBzcGVlZDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBidWxsZXRTZXR0aW5nczogQnVsbGV0U2V0dGluZ3M7XHJcbiAgICBwcml2YXRlIGZpcmVEZWxheTogbnVtYmVyOyAvLyBUaW1lIGJldHdlZW4gc2hvdHNcclxuICAgIHByaXZhdGUgZmlyZUNvb2xkb3duOiBudW1iZXIgPSAwOyAvLyBDdXJyZW50IGNvb2xkb3duXHJcblxyXG4gICAgY29uc3RydWN0b3IocGxheWVyU2V0dGluZ3M6IFBsYXllclNldHRpbmdzLCBidWxsZXRTZXR0aW5nczogQnVsbGV0U2V0dGluZ3MsIGltYWdlczogTWFwPHN0cmluZywgSFRNTEltYWdlRWxlbWVudD4pIHtcclxuICAgICAgICBzdXBlcihwbGF5ZXJTZXR0aW5ncy5pbml0aWFsWCwgcGxheWVyU2V0dGluZ3MuaW5pdGlhbFksIHBsYXllclNldHRpbmdzLndpZHRoLCBwbGF5ZXJTZXR0aW5ncy5oZWlnaHQsIHBsYXllclNldHRpbmdzLmltYWdlTmFtZSwgaW1hZ2VzKTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gcGxheWVyU2V0dGluZ3Muc3BlZWQ7XHJcbiAgICAgICAgdGhpcy5idWxsZXRTZXR0aW5ncyA9IGJ1bGxldFNldHRpbmdzO1xyXG4gICAgICAgIHRoaXMuZmlyZURlbGF5ID0gMSAvIGJ1bGxldFNldHRpbmdzLmZpcmVSYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGxldCBkeCA9IDA7XHJcbiAgICAgICAgbGV0IGR5ID0gMDtcclxuXHJcbiAgICAgICAgaWYgKGlucHV0U3RhdGUuaGFzKElucHV0S2V5LkFSUk9XX0xFRlQpKSBkeCAtPSB0aGlzLnNwZWVkICogZGVsdGFUaW1lO1xyXG4gICAgICAgIGlmIChpbnB1dFN0YXRlLmhhcyhJbnB1dEtleS5BUlJPV19SSUdIVCkpIGR4ICs9IHRoaXMuc3BlZWQgKiBkZWx0YVRpbWU7XHJcbiAgICAgICAgaWYgKGlucHV0U3RhdGUuaGFzKElucHV0S2V5LkFSUk9XX1VQKSkgZHkgLT0gdGhpcy5zcGVlZCAqIGRlbHRhVGltZTtcclxuICAgICAgICBpZiAoaW5wdXRTdGF0ZS5oYXMoSW5wdXRLZXkuQVJST1dfRE9XTikpIGR5ICs9IHRoaXMuc3BlZWQgKiBkZWx0YVRpbWU7XHJcblxyXG4gICAgICAgIHRoaXMueCArPSBkeDtcclxuICAgICAgICB0aGlzLnkgKz0gZHk7XHJcblxyXG4gICAgICAgIC8vIENsYW1wIHBsYXllciBwb3NpdGlvbiB3aXRoaW4gY2FudmFzIGJvdW5kYXJpZXNcclxuICAgICAgICB0aGlzLnggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjYW52YXMud2lkdGggLSB0aGlzLndpZHRoLCB0aGlzLngpKTtcclxuICAgICAgICB0aGlzLnkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjYW52YXMuaGVpZ2h0IC0gdGhpcy5oZWlnaHQsIHRoaXMueSkpO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgZmlyZSBjb29sZG93blxyXG4gICAgICAgIGlmICh0aGlzLmZpcmVDb29sZG93biA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5maXJlQ29vbGRvd24gLT0gZGVsdGFUaW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUGxheWVyIHNob290aW5nIGxvZ2ljXHJcbiAgICAgICAgaWYgKGlucHV0U3RhdGUuaGFzKElucHV0S2V5LlNQQUNFKSAmJiB0aGlzLmZpcmVDb29sZG93biA8PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlyZUNvb2xkb3duID0gdGhpcy5maXJlRGVsYXk7IC8vIFJlc2V0IGNvb2xkb3duXHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgYnVsbGV0XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1bGxldFggPSB0aGlzLnggKyAodGhpcy53aWR0aCAvIDIpIC0gKHRoaXMuYnVsbGV0U2V0dGluZ3Mud2lkdGggLyAyKTsgLy8gQ2VudGVyIGJ1bGxldFxyXG4gICAgICAgICAgICBjb25zdCBidWxsZXRZID0gdGhpcy55OyAvLyBTdGFydCBhdCBwbGF5ZXIncyB0b3AgZWRnZVxyXG4gICAgICAgICAgICBjb25zdCBuZXdCdWxsZXQgPSBuZXcgQnVsbGV0KFxyXG4gICAgICAgICAgICAgICAgYnVsbGV0WCxcclxuICAgICAgICAgICAgICAgIGJ1bGxldFksXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1bGxldFNldHRpbmdzLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5idWxsZXRTZXR0aW5ncy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1bGxldFNldHRpbmdzLmltYWdlTmFtZSxcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVsbGV0U2V0dGluZ3Muc3BlZWQsXHJcbiAgICAgICAgICAgICAgICBsb2FkZWRJbWFnZXNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcGxheWVyQnVsbGV0cy5wdXNoKG5ld0J1bGxldCk7IC8vIEFkZCB0byBnbG9iYWwgYnVsbGV0IGFycmF5XHJcblxyXG4gICAgICAgICAgICAvLyBQbGF5IHNob290IHNvdW5kXHJcbiAgICAgICAgICAgIGNvbnN0IHNob290U291bmQgPSBsb2FkZWRTb3VuZHMuZ2V0KFwic2hvb3Rfc291bmRcIik7XHJcbiAgICAgICAgICAgIGlmIChzaG9vdFNvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDbG9uZSB0aGUgc291bmQgdG8gYWxsb3cgbXVsdGlwbGUgY29uY3VycmVudCBwbGF5cyB3aXRob3V0IGN1dHRpbmcgb2ZmIHByZXZpb3VzIG9uZXNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lZFNvdW5kID0gc2hvb3RTb3VuZC5jbG9uZU5vZGUoKSBhcyBIVE1MQXVkaW9FbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgY2xvbmVkU291bmQudm9sdW1lID0gc2hvb3RTb3VuZC52b2x1bWU7XHJcbiAgICAgICAgICAgICAgICBjbG9uZWRTb3VuZC5wbGF5KCkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKFwiU2hvb3Qgc291bmQgcGxheWJhY2sgZmFpbGVkOlwiLCBlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEJ1bGxldCBjbGFzc1xyXG5jbGFzcyBCdWxsZXQgZXh0ZW5kcyBHYW1lT2JqZWN0IHtcclxuICAgIHNwZWVkOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBpbWFnZU5hbWU6IHN0cmluZywgc3BlZWQ6IG51bWJlciwgaW1hZ2VzOiBNYXA8c3RyaW5nLCBIVE1MSW1hZ2VFbGVtZW50Pikge1xyXG4gICAgICAgIHN1cGVyKHgsIHksIHdpZHRoLCBoZWlnaHQsIGltYWdlTmFtZSwgaW1hZ2VzKTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy55IC09IHRoaXMuc3BlZWQgKiBkZWx0YVRpbWU7IC8vIE1vdmUgdXB3YXJkc1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBGZXRjaGVzIGdhbWUgY29uZmlndXJhdGlvbiBmcm9tIGRhdGEuanNvblxyXG5hc3luYyBmdW5jdGlvbiBsb2FkR2FtZURhdGEoKTogUHJvbWlzZTxHYW1lQ29uZmlnPiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdkYXRhLmpzb24nKTtcclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIGRhdGEuanNvbjogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxufVxyXG5cclxuLy8gTG9hZHMgYWxsIGltYWdlIGFuZCBzb3VuZCBhc3NldHNcclxuYXN5bmMgZnVuY3Rpb24gbG9hZEFzc2V0cyhjb25maWc6IEFzc2V0c0NvbmZpZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgaW1hZ2VQcm9taXNlczogUHJvbWlzZTx2b2lkPltdID0gW107XHJcbiAgICBjb25zdCBzb3VuZFByb21pc2VzOiBQcm9taXNlPHZvaWQ+W10gPSBbXTtcclxuXHJcbiAgICAvLyBMb2FkIGltYWdlc1xyXG4gICAgZm9yIChjb25zdCBpbWdDb25maWcgb2YgY29uZmlnLmltYWdlcykge1xyXG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIGltZy5zcmMgPSBpbWdDb25maWcucGF0aDtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbG9hZGVkSW1hZ2VzLnNldChpbWdDb25maWcubmFtZSwgaW1nKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBpbWFnZTogJHtpbWdDb25maWcucGF0aH1gKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaW1hZ2VQcm9taXNlcy5wdXNoKHByb21pc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvYWQgc291bmRzXHJcbiAgICBmb3IgKGNvbnN0IHNvdW5kQ29uZmlnIG9mIGNvbmZpZy5zb3VuZHMpIHtcclxuICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhzb3VuZENvbmZpZy5wYXRoKTtcclxuICAgICAgICBhdWRpby52b2x1bWUgPSBzb3VuZENvbmZpZy52b2x1bWU7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgYXVkaW8ub25jYW5wbGF5dGhyb3VnaCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxvYWRlZFNvdW5kcy5zZXQoc291bmRDb25maWcubmFtZSwgYXVkaW8pO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhdWRpby5vbmVycm9yID0gKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgc291bmQ6ICR7c291bmRDb25maWcucGF0aH1gKSk7XHJcbiAgICAgICAgICAgIC8vIEVuc3VyZSBsb2FkKCkgaXMgY2FsbGVkIGZvciBzb21lIGJyb3dzZXJzIHRvIGZpcmUgY2FucGxheXRocm91Z2hcclxuICAgICAgICAgICAgYXVkaW8ubG9hZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNvdW5kUHJvbWlzZXMucHVzaChwcm9taXNlKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbLi4uaW1hZ2VQcm9taXNlcywgLi4uc291bmRQcm9taXNlc10pO1xyXG59XHJcblxyXG4vLyBSZXNldHMgZ2FtZSBlbGVtZW50cyB0byB0aGVpciBpbml0aWFsIHN0YXRlIGZvciBhIG5ldyBnYW1lXHJcbmZ1bmN0aW9uIHJlc2V0R2FtZSgpOiB2b2lkIHtcclxuICAgIHBsYXllci54ID0gZ2FtZUNvbmZpZy5wbGF5ZXJTZXR0aW5ncy5pbml0aWFsWDtcclxuICAgIHBsYXllci55ID0gZ2FtZUNvbmZpZy5wbGF5ZXJTZXR0aW5ncy5pbml0aWFsWTtcclxuICAgIHBsYXllckJ1bGxldHMgPSBbXTsgLy8gQ2xlYXIgYWxsIGFjdGl2ZSBidWxsZXRzXHJcbiAgICAvLyBBbnkgb3RoZXIgZ2FtZSBzdGF0ZSAoZS5nLiwgZW5lbWllcywgc2NvcmUpIHdvdWxkIGJlIHJlc2V0IGhlcmUuXHJcbn1cclxuXHJcbi8vIEdhbWUgbG9vcCBmdW5jdGlvbnNcclxuZnVuY3Rpb24gdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBzd2l0Y2ggKGN1cnJlbnRTdGF0ZSkge1xyXG4gICAgICAgIGNhc2UgR2FtZVN0YXRlLlRJVExFOlxyXG4gICAgICAgICAgICBpZiAoaW5wdXRTdGF0ZS5oYXMoSW5wdXRLZXkuU1BBQ0UpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBHYW1lU3RhdGUuUExBWUlORztcclxuICAgICAgICAgICAgICAgIGlucHV0U3RhdGUuZGVsZXRlKElucHV0S2V5LlNQQUNFKTsgLy8gQ29uc3VtZSB0aGUgaW5wdXRcclxuXHJcbiAgICAgICAgICAgICAgICByZXNldEdhbWUoKTsgLy8gUmVzZXQgZ2FtZSBzdGF0ZSBmb3IgYSBmcmVzaCBzdGFydFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFBsYXkgQkdNIHdoZW4gZ2FtZSBzdGFydHNcclxuICAgICAgICAgICAgICAgIGlmIChiYWNrZ3JvdW5kTXVzaWMpIHtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kTXVzaWMubG9vcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZE11c2ljLmN1cnJlbnRUaW1lID0gMDsgLy8gUmV3aW5kIEJHTVxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRNdXNpYy5wbGF5KCkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKFwiQmFja2dyb3VuZCBtdXNpYyBwbGF5YmFjayBmYWlsZWQ6XCIsIGUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0U291bmQgPSBsb2FkZWRTb3VuZHMuZ2V0KFwic3RhcnRfc291bmRcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRTb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0U291bmQuY3VycmVudFRpbWUgPSAwOyAvLyBSZXdpbmQgdG8gc3RhcnRcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFNvdW5kLnBsYXkoKS5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoXCJTdGFydCBzb3VuZCBwbGF5YmFjayBmYWlsZWQ6XCIsIGUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEdhbWVTdGF0ZS5QTEFZSU5HOlxyXG4gICAgICAgICAgICBwbGF5ZXIudXBkYXRlKGRlbHRhVGltZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgcGxheWVyIGJ1bGxldHNcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHBsYXllckJ1bGxldHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1bGxldCA9IHBsYXllckJ1bGxldHNbaV07XHJcbiAgICAgICAgICAgICAgICBidWxsZXQudXBkYXRlKGRlbHRhVGltZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGJ1bGxldHMgdGhhdCBnbyBvZmYtc2NyZWVuXHJcbiAgICAgICAgICAgICAgICBpZiAoYnVsbGV0LnkgKyBidWxsZXQuaGVpZ2h0IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllckJ1bGxldHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEFkZCBtb3JlIGdhbWUgbG9naWMgaGVyZSAoZS5nLiwgZW5lbXkgbW92ZW1lbnQsIGNvbGxpc2lvbnMsIHNjb3JpbmcpXHJcblxyXG4gICAgICAgICAgICAvLyBUZW1wb3JhcnkgR2FtZSBPdmVyIHRyaWdnZXIgZm9yIGRlbW9uc3RyYXRpb24gKGUuZy4sIGlmIHBsYXllciBwcmVzc2VzICdnJylcclxuICAgICAgICAgICAgaWYgKGlucHV0U3RhdGUuaGFzKElucHV0S2V5LktFWV9HKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gR2FtZVN0YXRlLkdBTUVfT1ZFUjtcclxuICAgICAgICAgICAgICAgIGlucHV0U3RhdGUuZGVsZXRlKElucHV0S2V5LktFWV9HKTsgLy8gQ29uc3VtZSBpbnB1dFxyXG4gICAgICAgICAgICAgICAgaWYgKGJhY2tncm91bmRNdXNpYykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRNdXNpYy5wYXVzZSgpOyAvLyBQYXVzZSBCR01cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVPdmVyU291bmQgPSBsb2FkZWRTb3VuZHMuZ2V0KFwiZXhwbG9zaW9uX3NvdW5kXCIpOyAvLyBSZXB1cnBvc2UgZXhpc3Rpbmcgc291bmQgZm9yIGdhbWUgb3ZlclxyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWVPdmVyU291bmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9uZWRTb3VuZCA9IGdhbWVPdmVyU291bmQuY2xvbmVOb2RlKCkgYXMgSFRNTEF1ZGlvRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZWRTb3VuZC52b2x1bWUgPSBnYW1lT3ZlclNvdW5kLnZvbHVtZTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZWRTb3VuZC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVkU291bmQucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihcIkdhbWUgT3ZlciBzb3VuZCBwbGF5YmFjayBmYWlsZWQ6XCIsIGUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEdhbWVTdGF0ZS5HQU1FX09WRVI6XHJcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIHJlc3RhcnQgaW5wdXRcclxuICAgICAgICAgICAgaWYgKGlucHV0U3RhdGUuaGFzKElucHV0S2V5LkVOVEVSKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gR2FtZVN0YXRlLlRJVExFOyAvLyBUcmFuc2l0aW9uIGJhY2sgdG8gdGl0bGUgc2NyZWVuXHJcbiAgICAgICAgICAgICAgICBpbnB1dFN0YXRlLmRlbGV0ZShJbnB1dEtleS5FTlRFUik7IC8vIENvbnN1bWUgdGhlIGlucHV0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXcoKTogdm9pZCB7XHJcbiAgICAvLyBDbGVhciBjYW52YXNcclxuICAgIGN0eC5maWxsU3R5bGUgPSBnYW1lQ29uZmlnLmdhbWVTZXR0aW5ncy5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICBjdHguZm9udCA9IGA0OHB4ICR7Z2FtZUNvbmZpZy5nYW1lU2V0dGluZ3MuZm9udEZhbWlseX1gO1xyXG4gICAgY3R4LmZpbGxTdHlsZSA9IGdhbWVDb25maWcuZ2FtZVNldHRpbmdzLnRpdGxlVGV4dENvbG9yO1xyXG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG5cclxuICAgIHN3aXRjaCAoY3VycmVudFN0YXRlKSB7XHJcbiAgICAgICAgY2FzZSBHYW1lU3RhdGUuVElUTEU6XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChnYW1lQ29uZmlnLmdhbWVTZXR0aW5ncy50aXRsZVRleHQsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyIC0gNTApO1xyXG4gICAgICAgICAgICBjdHguZm9udCA9IGAyNHB4ICR7Z2FtZUNvbmZpZy5nYW1lU2V0dGluZ3MuZm9udEZhbWlseX1gO1xyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQoZ2FtZUNvbmZpZy5nYW1lU2V0dGluZ3Muc3RhcnRJbnN0cnVjdGlvbiwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIgKyAyMCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgR2FtZVN0YXRlLlBMQVlJTkc6XHJcbiAgICAgICAgICAgIHBsYXllci5kcmF3KGN0eCk7XHJcbiAgICAgICAgICAgIC8vIERyYXcgcGxheWVyIGJ1bGxldHNcclxuICAgICAgICAgICAgZm9yIChjb25zdCBidWxsZXQgb2YgcGxheWVyQnVsbGV0cykge1xyXG4gICAgICAgICAgICAgICAgYnVsbGV0LmRyYXcoY3R4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBEcmF3IG90aGVyIGdhbWUgZWxlbWVudHMgKGVuZW1pZXMsIGJ1bGxldHMsIHNjb3JlLCBldGMuKVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEdhbWVTdGF0ZS5HQU1FX09WRVI6XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChnYW1lQ29uZmlnLmdhbWVTZXR0aW5ncy5nYW1lT3ZlclRleHQsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyKTtcclxuICAgICAgICAgICAgY3R4LmZvbnQgPSBgMjRweCAke2dhbWVDb25maWcuZ2FtZVNldHRpbmdzLmZvbnRGYW1pbHl9YDsgLy8gU21hbGxlciBmb250IGZvciBpbnN0cnVjdGlvbnNcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGdhbWVDb25maWcuZ2FtZVNldHRpbmdzLnJlc3RhcnRJbnN0cnVjdGlvbiwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIgKyA1MCk7IC8vIERpc3BsYXkgcmVzdGFydCBpbnN0cnVjdGlvblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2FtZUxvb3AoY3VycmVudFRpbWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgY29uc3QgZGVsdGFUaW1lID0gKGN1cnJlbnRUaW1lIC0gbGFzdEZyYW1lVGltZSkgLyAxMDAwOyAvLyBDb252ZXJ0IG1zIHRvIHNlY29uZHNcclxuICAgIGxhc3RGcmFtZVRpbWUgPSBjdXJyZW50VGltZTtcclxuXHJcbiAgICB1cGRhdGUoZGVsdGFUaW1lKTtcclxuICAgIGRyYXcoKTtcclxuXHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApO1xyXG59XHJcblxyXG4vLyBJbml0aWFsaXplIGdhbWVcclxuYXN5bmMgZnVuY3Rpb24gaW5pdCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lQ2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBpZiAoIWNhbnZhcykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhbnZhcyBlbGVtZW50IHdpdGggSUQgXCJnYW1lQ2FudmFzXCIgbm90IGZvdW5kLicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGdhbWVDb25maWcgPSBhd2FpdCBsb2FkR2FtZURhdGEoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnR2FtZSBkYXRhIGxvYWRlZDonLCBnYW1lQ29uZmlnKTtcclxuXHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gZ2FtZUNvbmZpZy5nYW1lU2V0dGluZ3MuY2FudmFzV2lkdGg7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGdhbWVDb25maWcuZ2FtZVNldHRpbmdzLmNhbnZhc0hlaWdodDtcclxuXHJcbiAgICAgICAgYXdhaXQgbG9hZEFzc2V0cyhnYW1lQ29uZmlnLmFzc2V0cyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0Fzc2V0cyBsb2FkZWQ6JywgbG9hZGVkSW1hZ2VzLnNpemUsICdpbWFnZXMsJywgbG9hZGVkU291bmRzLnNpemUsICdzb3VuZHMnKTtcclxuXHJcbiAgICAgICAgcGxheWVyID0gbmV3IFBsYXllcihnYW1lQ29uZmlnLnBsYXllclNldHRpbmdzLCBnYW1lQ29uZmlnLmJ1bGxldFNldHRpbmdzLCBsb2FkZWRJbWFnZXMpOyAvLyBQYXNzIGJ1bGxldFNldHRpbmdzXHJcbiAgICAgICAgYmFja2dyb3VuZE11c2ljID0gbG9hZGVkU291bmRzLmdldChcImJnbVwiKTtcclxuXHJcbiAgICAgICAgLy8gSW5wdXQgbGlzdGVuZXJzXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBlLmtleSBhcyBJbnB1dEtleTtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHByZXNzZWQga2V5IGlzIG9uZSBvZiBvdXIgZGVmaW5lZCBJbnB1dEtleXNcclxuICAgICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoSW5wdXRLZXkpLmluY2x1ZGVzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0U3RhdGUuYWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgZGVmYXVsdCBicm93c2VyIGFjdGlvbnMgZm9yIGdhbWUga2V5c1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGUua2V5IGFzIElucHV0S2V5O1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhJbnB1dEtleSkuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRTdGF0ZS5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdGFydCB0aGUgZ2FtZSBsb29wXHJcbiAgICAgICAgbGFzdEZyYW1lVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBnYW1lOicsIGVycm9yKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gU3RhcnQgdGhlIGdhbWUgaW5pdGlhbGl6YXRpb24gd2hlbiB0aGUgd2luZG93IGxvYWRzXHJcbndpbmRvdy5vbmxvYWQgPSBpbml0OyJdLAogICJtYXBwaW5ncyI6ICJBQUNBLElBQUssWUFBTCxrQkFBS0EsZUFBTDtBQUNJLEVBQUFBLHNCQUFBO0FBQ0EsRUFBQUEsc0JBQUE7QUFDQSxFQUFBQSxzQkFBQTtBQUhDLFNBQUFBO0FBQUEsR0FBQTtBQU1MLElBQUssV0FBTCxrQkFBS0MsY0FBTDtBQUNJLEVBQUFBLFVBQUEsZ0JBQWE7QUFDYixFQUFBQSxVQUFBLGlCQUFjO0FBQ2QsRUFBQUEsVUFBQSxjQUFXO0FBQ1gsRUFBQUEsVUFBQSxnQkFBYTtBQUNiLEVBQUFBLFVBQUEsV0FBUTtBQUNSLEVBQUFBLFVBQUEsV0FBUTtBQUNSLEVBQUFBLFVBQUEsV0FBUTtBQVBQLFNBQUFBO0FBQUEsR0FBQTtBQW1FTCxJQUFJO0FBQ0osSUFBSTtBQUNKLElBQUk7QUFDSixJQUFJLGVBQThDLG9CQUFJLElBQUk7QUFDMUQsSUFBSSxlQUE4QyxvQkFBSSxJQUFJO0FBQzFELElBQUksYUFBNEIsb0JBQUksSUFBSTtBQUN4QyxJQUFJLGVBQTBCO0FBQzlCLElBQUksZ0JBQXdCO0FBQzVCLElBQUk7QUFDSixJQUFJLGdCQUEwQixDQUFDO0FBQy9CLElBQUk7QUFHSixNQUFNLFdBQVc7QUFBQSxFQVFiLFlBQVksR0FBVyxHQUFXLE9BQWUsUUFBZ0IsV0FBbUIsUUFBdUM7QUFDdkgsU0FBSyxJQUFJO0FBQ1QsU0FBSyxJQUFJO0FBQ1QsU0FBSyxRQUFRO0FBQ2IsU0FBSyxTQUFTO0FBQ2QsU0FBSyxZQUFZO0FBQ2pCLFNBQUssUUFBUSxPQUFPLElBQUksU0FBUztBQUFBLEVBQ3JDO0FBQUEsRUFFQSxLQUFLQyxNQUFxQztBQUN0QyxRQUFJLEtBQUssT0FBTztBQUNaLE1BQUFBLEtBQUksVUFBVSxLQUFLLE9BQU8sS0FBSyxHQUFHLEtBQUssR0FBRyxLQUFLLE9BQU8sS0FBSyxNQUFNO0FBQUEsSUFDckUsT0FB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
