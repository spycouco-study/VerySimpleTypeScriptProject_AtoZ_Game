var GameState = /* @__PURE__ */ ((GameState2) => {
  GameState2[GameState2["TITLE"] = 0] = "TITLE";
  GameState2[GameState2["PLAYING"] = 1] = "PLAYING";
  GameState2[GameState2["GAME_OVER"] = 2] = "GAME_OVER";
  return GameState2;
})(GameState || {});
var InputKey = /* @__PURE__ */ ((InputKey2) => {
  InputKey2["ARROW_LEFT"] = "ArrowLeft";
  InputKey2["ARROW_RIGHT"] = "ArrowRight";
  InputKey2["ARROW_UP"] = "ArrowUp";
  InputKey2["ARROW_DOWN"] = "ArrowDown";
  InputKey2["SPACE"] = " ";
  InputKey2["ENTER"] = "Enter";
  return InputKey2;
})(InputKey || {});
let canvas;
let ctx;
let gameConfig;
let loadedImages = /* @__PURE__ */ new Map();
let loadedSounds = /* @__PURE__ */ new Map();
let inputState = /* @__PURE__ */ new Set();
let currentState = 0 /* TITLE */;
let lastFrameTime = 0;
let player;
let playerBullets = [];
let backgroundMusic;
class GameObject {
  constructor(x, y, width, height, imageName, images) {
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.imageName = imageName;
    this.image = images.get(imageName);
  }
  draw(ctx2) {
    if (this.image) {
      ctx2.drawImage(this.image, this.x, this.y, this.width, this.height);
    } else {
      ctx2.fillStyle = "red";
      ctx2.fillRect(this.x, this.y, this.width, this.height);
    }
  }
}
class Player extends GameObject {
  // Current cooldown
  constructor(playerSettings, bulletSettings, images) {
    super(playerSettings.initialX, playerSettings.initialY, playerSettings.width, playerSettings.height, playerSettings.imageName, images);
    // Time between shots
    this.fireCooldown = 0;
    this.speed = playerSettings.speed;
    this.bulletSettings = bulletSettings;
    this.fireDelay = 1 / bulletSettings.fireRate;
  }
  update(deltaTime) {
    let dx = 0;
    let dy = 0;
    if (inputState.has("ArrowLeft" /* ARROW_LEFT */)) dx -= this.speed * deltaTime;
    if (inputState.has("ArrowRight" /* ARROW_RIGHT */)) dx += this.speed * deltaTime;
    if (inputState.has("ArrowUp" /* ARROW_UP */)) dy -= this.speed * deltaTime;
    if (inputState.has("ArrowDown" /* ARROW_DOWN */)) dy += this.speed * deltaTime;
    this.x += dx;
    this.y += dy;
    this.x = Math.max(0, Math.min(canvas.width - this.width, this.x));
    this.y = Math.max(0, Math.min(canvas.height - this.height, this.y));
    if (this.fireCooldown > 0) {
      this.fireCooldown -= deltaTime;
    }
    if (inputState.has(" " /* SPACE */) && this.fireCooldown <= 0) {
      this.fireCooldown = this.fireDelay;
      const bulletX = this.x + this.width / 2 - this.bulletSettings.width / 2;
      const bulletY = this.y;
      const newBullet = new Bullet(
        bulletX,
        bulletY,
        this.bulletSettings.width,
        this.bulletSettings.height,
        this.bulletSettings.imageName,
        this.bulletSettings.speed,
        loadedImages
      );
      playerBullets.push(newBullet);
      const shootSound = loadedSounds.get("shoot_sound");
      if (shootSound) {
        const clonedSound = shootSound.cloneNode();
        clonedSound.volume = shootSound.volume;
        clonedSound.play().catch((e) => console.error("Shoot sound playback failed:", e));
      }
    }
  }
}
class Bullet extends GameObject {
  constructor(x, y, width, height, imageName, speed, images) {
    super(x, y, width, height, imageName, images);
    this.speed = speed;
  }
  update(deltaTime) {
    this.y -= this.speed * deltaTime;
  }
}
async function loadGameData() {
  const response = await fetch("data.json");
  if (!response.ok) {
    throw new Error(`Failed to load data.json: ${response.statusText}`);
  }
  return response.json();
}
async function loadAssets(config) {
  const imagePromises = [];
  const soundPromises = [];
  for (const imgConfig of config.images) {
    const img = new Image();
    img.src = imgConfig.path;
    const promise = new Promise((resolve, reject) => {
      img.onload = () => {
        loadedImages.set(imgConfig.name, img);
        resolve();
      };
      img.onerror = () => reject(new Error(`Failed to load image: ${imgConfig.path}`));
    });
    imagePromises.push(promise);
  }
  for (const soundConfig of config.sounds) {
    const audio = new Audio(soundConfig.path);
    audio.volume = soundConfig.volume;
    const promise = new Promise((resolve, reject) => {
      audio.oncanplaythrough = () => {
        loadedSounds.set(soundConfig.name, audio);
        resolve();
      };
      audio.onerror = () => reject(new Error(`Failed to load sound: ${soundConfig.path}`));
      audio.load();
    });
    soundPromises.push(promise);
  }
  await Promise.all([...imagePromises, ...soundPromises]);
}
function update(deltaTime) {
  switch (currentState) {
    case 0 /* TITLE */:
      if (inputState.has(" " /* SPACE */)) {
        currentState = 1 /* PLAYING */;
        inputState.delete(" " /* SPACE */);
        if (backgroundMusic) {
          backgroundMusic.loop = true;
          backgroundMusic.play().catch((e) => console.error("Background music playback failed:", e));
        }
        const startSound = loadedSounds.get("start_sound");
        if (startSound) {
          startSound.currentTime = 0;
          startSound.play().catch((e) => console.error("Start sound playback failed:", e));
        }
      }
      break;
    case 1 /* PLAYING */:
      player.update(deltaTime);
      for (let i = playerBullets.length - 1; i >= 0; i--) {
        const bullet = playerBullets[i];
        bullet.update(deltaTime);
        if (bullet.y + bullet.height < 0) {
          playerBullets.splice(i, 1);
        }
      }
      break;
    case 2 /* GAME_OVER */:
      break;
  }
}
function draw() {
  ctx.fillStyle = gameConfig.gameSettings.backgroundColor;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.font = `48px ${gameConfig.gameSettings.fontFamily}`;
  ctx.fillStyle = gameConfig.gameSettings.titleTextColor;
  ctx.textAlign = "center";
  switch (currentState) {
    case 0 /* TITLE */:
      ctx.fillText(gameConfig.gameSettings.titleText, canvas.width / 2, canvas.height / 2 - 50);
      ctx.font = `24px ${gameConfig.gameSettings.fontFamily}`;
      ctx.fillText(gameConfig.gameSettings.startInstruction, canvas.width / 2, canvas.height / 2 + 20);
      break;
    case 1 /* PLAYING */:
      player.draw(ctx);
      for (const bullet of playerBullets) {
        bullet.draw(ctx);
      }
      break;
    case 2 /* GAME_OVER */:
      ctx.fillText(gameConfig.gameSettings.gameOverText, canvas.width / 2, canvas.height / 2);
      break;
  }
}
function gameLoop(currentTime) {
  const deltaTime = (currentTime - lastFrameTime) / 1e3;
  lastFrameTime = currentTime;
  update(deltaTime);
  draw();
  requestAnimationFrame(gameLoop);
}
async function init() {
  canvas = document.getElementById("gameCanvas");
  if (!canvas) {
    console.error('Canvas element with ID "gameCanvas" not found.');
    return;
  }
  ctx = canvas.getContext("2d");
  try {
    gameConfig = await loadGameData();
    console.log("Game data loaded:", gameConfig);
    canvas.width = gameConfig.gameSettings.canvasWidth;
    canvas.height = gameConfig.gameSettings.canvasHeight;
    await loadAssets(gameConfig.assets);
    console.log("Assets loaded:", loadedImages.size, "images,", loadedSounds.size, "sounds");
    player = new Player(gameConfig.playerSettings, gameConfig.bulletSettings, loadedImages);
    backgroundMusic = loadedSounds.get("bgm");
    window.addEventListener("keydown", (e) => {
      const key = e.key;
      if (Object.values(InputKey).includes(key)) {
        inputState.add(key);
        e.preventDefault();
      }
    });
    window.addEventListener("keyup", (e) => {
      const key = e.key;
      if (Object.values(InputKey).includes(key)) {
        inputState.delete(key);
      }
    });
    lastFrameTime = performance.now();
    requestAnimationFrame(gameLoop);
  } catch (error) {
    console.error("Failed to initialize game:", error);
  }
}
window.onload = init;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiZ2FtZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gRW51bXMgZm9yIGdhbWUgc3RhdGVzIGFuZCBpbnB1dCBrZXlzXHJcbmVudW0gR2FtZVN0YXRlIHtcclxuICAgIFRJVExFLFxyXG4gICAgUExBWUlORyxcclxuICAgIEdBTUVfT1ZFUlxyXG59XHJcblxyXG5lbnVtIElucHV0S2V5IHtcclxuICAgIEFSUk9XX0xFRlQgPSBcIkFycm93TGVmdFwiLFxyXG4gICAgQVJST1dfUklHSFQgPSBcIkFycm93UmlnaHRcIixcclxuICAgIEFSUk9XX1VQID0gXCJBcnJvd1VwXCIsXHJcbiAgICBBUlJPV19ET1dOID0gXCJBcnJvd0Rvd25cIixcclxuICAgIFNQQUNFID0gXCIgXCIsXHJcbiAgICBFTlRFUiA9IFwiRW50ZXJcIlxyXG59XHJcblxyXG4vLyBJbnRlcmZhY2VzIGZvciBkYXRhLmpzb24gc3RydWN0dXJlXHJcbmludGVyZmFjZSBJbWFnZUNvbmZpZyB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwYXRoOiBzdHJpbmc7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTb3VuZENvbmZpZyB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwYXRoOiBzdHJpbmc7XHJcbiAgICBkdXJhdGlvbl9zZWNvbmRzOiBudW1iZXI7XHJcbiAgICB2b2x1bWU6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEFzc2V0c0NvbmZpZyB7XHJcbiAgICBpbWFnZXM6IEltYWdlQ29uZmlnW107XHJcbiAgICBzb3VuZHM6IFNvdW5kQ29uZmlnW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBHYW1lU2V0dGluZ3Mge1xyXG4gICAgY2FudmFzV2lkdGg6IG51bWJlcjtcclxuICAgIGNhbnZhc0hlaWdodDogbnVtYmVyO1xyXG4gICAgdGl0bGVUZXh0OiBzdHJpbmc7XHJcbiAgICBzdGFydEluc3RydWN0aW9uOiBzdHJpbmc7XHJcbiAgICBnYW1lT3ZlclRleHQ6IHN0cmluZztcclxuICAgIHRpdGxlVGV4dENvbG9yOiBzdHJpbmc7XHJcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IHN0cmluZztcclxuICAgIGZvbnRGYW1pbHk6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFBsYXllclNldHRpbmdzIHtcclxuICAgIGltYWdlTmFtZTogc3RyaW5nO1xyXG4gICAgaW5pdGlhbFg6IG51bWJlcjtcclxuICAgIGluaXRpYWxZOiBudW1iZXI7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICBzcGVlZDogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQnVsbGV0U2V0dGluZ3Mge1xyXG4gICAgaW1hZ2VOYW1lOiBzdHJpbmc7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICBzcGVlZDogbnVtYmVyO1xyXG4gICAgZmlyZVJhdGU6IG51bWJlcjsgLy8gQnVsbGV0cyBwZXIgc2Vjb25kXHJcbn1cclxuXHJcbmludGVyZmFjZSBHYW1lQ29uZmlnIHtcclxuICAgIGdhbWVTZXR0aW5nczogR2FtZVNldHRpbmdzO1xyXG4gICAgcGxheWVyU2V0dGluZ3M6IFBsYXllclNldHRpbmdzO1xyXG4gICAgYnVsbGV0U2V0dGluZ3M6IEJ1bGxldFNldHRpbmdzOyAvLyBBZGRlZCBidWxsZXQgc2V0dGluZ3NcclxuICAgIGFzc2V0czogQXNzZXRzQ29uZmlnO1xyXG59XHJcblxyXG4vLyBHbG9iYWwgZ2FtZSB2YXJpYWJsZXNcclxubGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmxldCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxubGV0IGdhbWVDb25maWc6IEdhbWVDb25maWc7XHJcbmxldCBsb2FkZWRJbWFnZXM6IE1hcDxzdHJpbmcsIEhUTUxJbWFnZUVsZW1lbnQ+ID0gbmV3IE1hcCgpO1xyXG5sZXQgbG9hZGVkU291bmRzOiBNYXA8c3RyaW5nLCBIVE1MQXVkaW9FbGVtZW50PiA9IG5ldyBNYXAoKTtcclxubGV0IGlucHV0U3RhdGU6IFNldDxJbnB1dEtleT4gPSBuZXcgU2V0KCk7XHJcbmxldCBjdXJyZW50U3RhdGU6IEdhbWVTdGF0ZSA9IEdhbWVTdGF0ZS5USVRMRTtcclxubGV0IGxhc3RGcmFtZVRpbWU6IG51bWJlciA9IDA7XHJcbmxldCBwbGF5ZXI6IFBsYXllcjtcclxubGV0IHBsYXllckJ1bGxldHM6IEJ1bGxldFtdID0gW107IC8vIEFycmF5IHRvIGhvbGQgYWN0aXZlIHBsYXllciBidWxsZXRzXHJcbmxldCBiYWNrZ3JvdW5kTXVzaWM6IEhUTUxBdWRpb0VsZW1lbnQgfCB1bmRlZmluZWQ7XHJcblxyXG4vLyBHYW1lIE9iamVjdCBiYXNlIGNsYXNzIChjYW4gYmUgZXh0ZW5kZWQgZm9yIGVuZW1pZXMsIGJ1bGxldHMgZXRjLilcclxuY2xhc3MgR2FtZU9iamVjdCB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICBpbWFnZU5hbWU6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBpbWFnZTogSFRNTEltYWdlRWxlbWVudCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGltYWdlTmFtZTogc3RyaW5nLCBpbWFnZXM6IE1hcDxzdHJpbmcsIEhUTUxJbWFnZUVsZW1lbnQ+KSB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLmltYWdlTmFtZSA9IGltYWdlTmFtZTtcclxuICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2VzLmdldChpbWFnZU5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5pbWFnZSkge1xyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRmFsbGJhY2s6IGRyYXcgYSBjb2xvcmVkIHJlY3RhbmdsZSBpZiBpbWFnZSBub3QgZm91bmRcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZWQnO1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFBsYXllciBjbGFzc1xyXG5jbGFzcyBQbGF5ZXIgZXh0ZW5kcyBHYW1lT2JqZWN0IHtcclxuICAgIHNwZWVkOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGJ1bGxldFNldHRpbmdzOiBCdWxsZXRTZXR0aW5ncztcclxuICAgIHByaXZhdGUgZmlyZURlbGF5OiBudW1iZXI7IC8vIFRpbWUgYmV0d2VlbiBzaG90c1xyXG4gICAgcHJpdmF0ZSBmaXJlQ29vbGRvd246IG51bWJlciA9IDA7IC8vIEN1cnJlbnQgY29vbGRvd25cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwbGF5ZXJTZXR0aW5nczogUGxheWVyU2V0dGluZ3MsIGJ1bGxldFNldHRpbmdzOiBCdWxsZXRTZXR0aW5ncywgaW1hZ2VzOiBNYXA8c3RyaW5nLCBIVE1MSW1hZ2VFbGVtZW50Pikge1xyXG4gICAgICAgIHN1cGVyKHBsYXllclNldHRpbmdzLmluaXRpYWxYLCBwbGF5ZXJTZXR0aW5ncy5pbml0aWFsWSwgcGxheWVyU2V0dGluZ3Mud2lkdGgsIHBsYXllclNldHRpbmdzLmhlaWdodCwgcGxheWVyU2V0dGluZ3MuaW1hZ2VOYW1lLCBpbWFnZXMpO1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBwbGF5ZXJTZXR0aW5ncy5zcGVlZDtcclxuICAgICAgICB0aGlzLmJ1bGxldFNldHRpbmdzID0gYnVsbGV0U2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5maXJlRGVsYXkgPSAxIC8gYnVsbGV0U2V0dGluZ3MuZmlyZVJhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGR4ID0gMDtcclxuICAgICAgICBsZXQgZHkgPSAwO1xyXG5cclxuICAgICAgICBpZiAoaW5wdXRTdGF0ZS5oYXMoSW5wdXRLZXkuQVJST1dfTEVGVCkpIGR4IC09IHRoaXMuc3BlZWQgKiBkZWx0YVRpbWU7XHJcbiAgICAgICAgaWYgKGlucHV0U3RhdGUuaGFzKElucHV0S2V5LkFSUk9XX1JJR0hUKSkgZHggKz0gdGhpcy5zcGVlZCAqIGRlbHRhVGltZTtcclxuICAgICAgICBpZiAoaW5wdXRTdGF0ZS5oYXMoSW5wdXRLZXkuQVJST1dfVVApKSBkeSAtPSB0aGlzLnNwZWVkICogZGVsdGFUaW1lO1xyXG4gICAgICAgIGlmIChpbnB1dFN0YXRlLmhhcyhJbnB1dEtleS5BUlJPV19ET1dOKSkgZHkgKz0gdGhpcy5zcGVlZCAqIGRlbHRhVGltZTtcclxuXHJcbiAgICAgICAgdGhpcy54ICs9IGR4O1xyXG4gICAgICAgIHRoaXMueSArPSBkeTtcclxuXHJcbiAgICAgICAgLy8gQ2xhbXAgcGxheWVyIHBvc2l0aW9uIHdpdGhpbiBjYW52YXMgYm91bmRhcmllc1xyXG4gICAgICAgIHRoaXMueCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGNhbnZhcy53aWR0aCAtIHRoaXMud2lkdGgsIHRoaXMueCkpO1xyXG4gICAgICAgIHRoaXMueSA9IE1hdGgubWF4KDAsIE1hdGgubWluKGNhbnZhcy5oZWlnaHQgLSB0aGlzLmhlaWdodCwgdGhpcy55KSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBmaXJlIGNvb2xkb3duXHJcbiAgICAgICAgaWYgKHRoaXMuZmlyZUNvb2xkb3duID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpcmVDb29sZG93biAtPSBkZWx0YVRpbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQbGF5ZXIgc2hvb3RpbmcgbG9naWNcclxuICAgICAgICBpZiAoaW5wdXRTdGF0ZS5oYXMoSW5wdXRLZXkuU1BBQ0UpICYmIHRoaXMuZmlyZUNvb2xkb3duIDw9IDApIHtcclxuICAgICAgICAgICAgdGhpcy5maXJlQ29vbGRvd24gPSB0aGlzLmZpcmVEZWxheTsgLy8gUmVzZXQgY29vbGRvd25cclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBidWxsZXRcclxuICAgICAgICAgICAgY29uc3QgYnVsbGV0WCA9IHRoaXMueCArICh0aGlzLndpZHRoIC8gMikgLSAodGhpcy5idWxsZXRTZXR0aW5ncy53aWR0aCAvIDIpOyAvLyBDZW50ZXIgYnVsbGV0XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1bGxldFkgPSB0aGlzLnk7IC8vIFN0YXJ0IGF0IHBsYXllcidzIHRvcCBlZGdlXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0J1bGxldCA9IG5ldyBCdWxsZXQoXHJcbiAgICAgICAgICAgICAgICBidWxsZXRYLFxyXG4gICAgICAgICAgICAgICAgYnVsbGV0WSxcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVsbGV0U2V0dGluZ3Mud2lkdGgsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1bGxldFNldHRpbmdzLmhlaWdodCxcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVsbGV0U2V0dGluZ3MuaW1hZ2VOYW1lLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5idWxsZXRTZXR0aW5ncy5zcGVlZCxcclxuICAgICAgICAgICAgICAgIGxvYWRlZEltYWdlc1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBwbGF5ZXJCdWxsZXRzLnB1c2gobmV3QnVsbGV0KTsgLy8gQWRkIHRvIGdsb2JhbCBidWxsZXQgYXJyYXlcclxuXHJcbiAgICAgICAgICAgIC8vIFBsYXkgc2hvb3Qgc291bmRcclxuICAgICAgICAgICAgY29uc3Qgc2hvb3RTb3VuZCA9IGxvYWRlZFNvdW5kcy5nZXQoXCJzaG9vdF9zb3VuZFwiKTtcclxuICAgICAgICAgICAgaWYgKHNob290U291bmQpIHtcclxuICAgICAgICAgICAgICAgIC8vIENsb25lIHRoZSBzb3VuZCB0byBhbGxvdyBtdWx0aXBsZSBjb25jdXJyZW50IHBsYXlzIHdpdGhvdXQgY3V0dGluZyBvZmYgcHJldmlvdXMgb25lc1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xvbmVkU291bmQgPSBzaG9vdFNvdW5kLmNsb25lTm9kZSgpIGFzIEhUTUxBdWRpb0VsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBjbG9uZWRTb3VuZC52b2x1bWUgPSBzaG9vdFNvdW5kLnZvbHVtZTtcclxuICAgICAgICAgICAgICAgIGNsb25lZFNvdW5kLnBsYXkoKS5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoXCJTaG9vdCBzb3VuZCBwbGF5YmFjayBmYWlsZWQ6XCIsIGUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gQnVsbGV0IGNsYXNzXHJcbmNsYXNzIEJ1bGxldCBleHRlbmRzIEdhbWVPYmplY3Qge1xyXG4gICAgc3BlZWQ6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGltYWdlTmFtZTogc3RyaW5nLCBzcGVlZDogbnVtYmVyLCBpbWFnZXM6IE1hcDxzdHJpbmcsIEhUTUxJbWFnZUVsZW1lbnQ+KSB7XHJcbiAgICAgICAgc3VwZXIoeCwgeSwgd2lkdGgsIGhlaWdodCwgaW1hZ2VOYW1lLCBpbWFnZXMpO1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoZGVsdGFUaW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnkgLT0gdGhpcy5zcGVlZCAqIGRlbHRhVGltZTsgLy8gTW92ZSB1cHdhcmRzXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEZldGNoZXMgZ2FtZSBjb25maWd1cmF0aW9uIGZyb20gZGF0YS5qc29uXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRHYW1lRGF0YSgpOiBQcm9taXNlPEdhbWVDb25maWc+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2RhdGEuanNvbicpO1xyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgZGF0YS5qc29uOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG59XHJcblxyXG4vLyBMb2FkcyBhbGwgaW1hZ2UgYW5kIHNvdW5kIGFzc2V0c1xyXG5hc3luYyBmdW5jdGlvbiBsb2FkQXNzZXRzKGNvbmZpZzogQXNzZXRzQ29uZmlnKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBpbWFnZVByb21pc2VzOiBQcm9taXNlPHZvaWQ+W10gPSBbXTtcclxuICAgIGNvbnN0IHNvdW5kUHJvbWlzZXM6IFByb21pc2U8dm9pZD5bXSA9IFtdO1xyXG5cclxuICAgIC8vIExvYWQgaW1hZ2VzXHJcbiAgICBmb3IgKGNvbnN0IGltZ0NvbmZpZyBvZiBjb25maWcuaW1hZ2VzKSB7XHJcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgaW1nLnNyYyA9IGltZ0NvbmZpZy5wYXRoO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2FkZWRJbWFnZXMuc2V0KGltZ0NvbmZpZy5uYW1lLCBpbWcpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIGltYWdlOiAke2ltZ0NvbmZpZy5wYXRofWApKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpbWFnZVByb21pc2VzLnB1c2gocHJvbWlzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTG9hZCBzb3VuZHNcclxuICAgIGZvciAoY29uc3Qgc291bmRDb25maWcgb2YgY29uZmlnLnNvdW5kcykge1xyXG4gICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKHNvdW5kQ29uZmlnLnBhdGgpO1xyXG4gICAgICAgIGF1ZGlvLnZvbHVtZSA9IHNvdW5kQ29uZmlnLnZvbHVtZTtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBhdWRpby5vbmNhbnBsYXl0aHJvdWdoID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbG9hZGVkU291bmRzLnNldChzb3VuZENvbmZpZy5uYW1lLCBhdWRpbyk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBzb3VuZDogJHtzb3VuZENvbmZpZy5wYXRofWApKTtcclxuICAgICAgICAgICAgLy8gRW5zdXJlIGxvYWQoKSBpcyBjYWxsZWQgZm9yIHNvbWUgYnJvd3NlcnMgdG8gZmlyZSBjYW5wbGF5dGhyb3VnaFxyXG4gICAgICAgICAgICBhdWRpby5sb2FkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc291bmRQcm9taXNlcy5wdXNoKHByb21pc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IFByb21pc2UuYWxsKFsuLi5pbWFnZVByb21pc2VzLCAuLi5zb3VuZFByb21pc2VzXSk7XHJcbn1cclxuXHJcbi8vIEdhbWUgbG9vcCBmdW5jdGlvbnNcclxuZnVuY3Rpb24gdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBzd2l0Y2ggKGN1cnJlbnRTdGF0ZSkge1xyXG4gICAgICAgIGNhc2UgR2FtZVN0YXRlLlRJVExFOlxyXG4gICAgICAgICAgICBpZiAoaW5wdXRTdGF0ZS5oYXMoSW5wdXRLZXkuU1BBQ0UpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBHYW1lU3RhdGUuUExBWUlORztcclxuICAgICAgICAgICAgICAgIGlucHV0U3RhdGUuZGVsZXRlKElucHV0S2V5LlNQQUNFKTsgLy8gQ29uc3VtZSB0aGUgaW5wdXRcclxuICAgICAgICAgICAgICAgIC8vIFBsYXkgQkdNIHdoZW4gZ2FtZSBzdGFydHNcclxuICAgICAgICAgICAgICAgIGlmIChiYWNrZ3JvdW5kTXVzaWMpIHtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kTXVzaWMubG9vcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZE11c2ljLnBsYXkoKS5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoXCJCYWNrZ3JvdW5kIG11c2ljIHBsYXliYWNrIGZhaWxlZDpcIiwgZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRTb3VuZCA9IGxvYWRlZFNvdW5kcy5nZXQoXCJzdGFydF9zb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdGFydFNvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRTb3VuZC5jdXJyZW50VGltZSA9IDA7IC8vIFJld2luZCB0byBzdGFydFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0U291bmQucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihcIlN0YXJ0IHNvdW5kIHBsYXliYWNrIGZhaWxlZDpcIiwgZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgR2FtZVN0YXRlLlBMQVlJTkc6XHJcbiAgICAgICAgICAgIHBsYXllci51cGRhdGUoZGVsdGFUaW1lKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBwbGF5ZXIgYnVsbGV0c1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcGxheWVyQnVsbGV0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVsbGV0ID0gcGxheWVyQnVsbGV0c1tpXTtcclxuICAgICAgICAgICAgICAgIGJ1bGxldC51cGRhdGUoZGVsdGFUaW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYnVsbGV0cyB0aGF0IGdvIG9mZi1zY3JlZW5cclxuICAgICAgICAgICAgICAgIGlmIChidWxsZXQueSArIGJ1bGxldC5oZWlnaHQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyQnVsbGV0cy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQWRkIG1vcmUgZ2FtZSBsb2dpYyBoZXJlIChlLmcuLCBlbmVteSBtb3ZlbWVudCwgY29sbGlzaW9ucywgc2NvcmluZylcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBHYW1lU3RhdGUuR0FNRV9PVkVSOlxyXG4gICAgICAgICAgICAvLyBHYW1lIG92ZXIgbG9naWMgKGUuZy4sIGRpc3BsYXkgc2NvcmUsIHdhaXQgZm9yIHJlc3RhcnQgaW5wdXQpXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3KCk6IHZvaWQge1xyXG4gICAgLy8gQ2xlYXIgY2FudmFzXHJcbiAgICBjdHguZmlsbFN0eWxlID0gZ2FtZUNvbmZpZy5nYW1lU2V0dGluZ3MuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgY3R4LmZvbnQgPSBgNDhweCAke2dhbWVDb25maWcuZ2FtZVNldHRpbmdzLmZvbnRGYW1pbHl9YDtcclxuICAgIGN0eC5maWxsU3R5bGUgPSBnYW1lQ29uZmlnLmdhbWVTZXR0aW5ncy50aXRsZVRleHRDb2xvcjtcclxuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuXHJcbiAgICBzd2l0Y2ggKGN1cnJlbnRTdGF0ZSkge1xyXG4gICAgICAgIGNhc2UgR2FtZVN0YXRlLlRJVExFOlxyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQoZ2FtZUNvbmZpZy5nYW1lU2V0dGluZ3MudGl0bGVUZXh0LCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiAtIDUwKTtcclxuICAgICAgICAgICAgY3R4LmZvbnQgPSBgMjRweCAke2dhbWVDb25maWcuZ2FtZVNldHRpbmdzLmZvbnRGYW1pbHl9YDtcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGdhbWVDb25maWcuZ2FtZVNldHRpbmdzLnN0YXJ0SW5zdHJ1Y3Rpb24sIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyICsgMjApO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEdhbWVTdGF0ZS5QTEFZSU5HOlxyXG4gICAgICAgICAgICBwbGF5ZXIuZHJhdyhjdHgpO1xyXG4gICAgICAgICAgICAvLyBEcmF3IHBsYXllciBidWxsZXRzXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgYnVsbGV0IG9mIHBsYXllckJ1bGxldHMpIHtcclxuICAgICAgICAgICAgICAgIGJ1bGxldC5kcmF3KGN0eCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRHJhdyBvdGhlciBnYW1lIGVsZW1lbnRzIChlbmVtaWVzLCBidWxsZXRzLCBzY29yZSwgZXRjLilcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBHYW1lU3RhdGUuR0FNRV9PVkVSOlxyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQoZ2FtZUNvbmZpZy5nYW1lU2V0dGluZ3MuZ2FtZU92ZXJUZXh0LCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnYW1lTG9vcChjdXJyZW50VGltZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBjb25zdCBkZWx0YVRpbWUgPSAoY3VycmVudFRpbWUgLSBsYXN0RnJhbWVUaW1lKSAvIDEwMDA7IC8vIENvbnZlcnQgbXMgdG8gc2Vjb25kc1xyXG4gICAgbGFzdEZyYW1lVGltZSA9IGN1cnJlbnRUaW1lO1xyXG5cclxuICAgIHVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgZHJhdygpO1xyXG5cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XHJcbn1cclxuXHJcbi8vIEluaXRpYWxpemUgZ2FtZVxyXG5hc3luYyBmdW5jdGlvbiBpbml0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVDYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGlmICghY2FudmFzKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQ2FudmFzIGVsZW1lbnQgd2l0aCBJRCBcImdhbWVDYW52YXNcIiBub3QgZm91bmQuJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgZ2FtZUNvbmZpZyA9IGF3YWl0IGxvYWRHYW1lRGF0YSgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdHYW1lIGRhdGEgbG9hZGVkOicsIGdhbWVDb25maWcpO1xyXG5cclxuICAgICAgICBjYW52YXMud2lkdGggPSBnYW1lQ29uZmlnLmdhbWVTZXR0aW5ncy5jYW52YXNXaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gZ2FtZUNvbmZpZy5nYW1lU2V0dGluZ3MuY2FudmFzSGVpZ2h0O1xyXG5cclxuICAgICAgICBhd2FpdCBsb2FkQXNzZXRzKGdhbWVDb25maWcuYXNzZXRzKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnQXNzZXRzIGxvYWRlZDonLCBsb2FkZWRJbWFnZXMuc2l6ZSwgJ2ltYWdlcywnLCBsb2FkZWRTb3VuZHMuc2l6ZSwgJ3NvdW5kcycpO1xyXG5cclxuICAgICAgICBwbGF5ZXIgPSBuZXcgUGxheWVyKGdhbWVDb25maWcucGxheWVyU2V0dGluZ3MsIGdhbWVDb25maWcuYnVsbGV0U2V0dGluZ3MsIGxvYWRlZEltYWdlcyk7IC8vIFBhc3MgYnVsbGV0U2V0dGluZ3NcclxuICAgICAgICBiYWNrZ3JvdW5kTXVzaWMgPSBsb2FkZWRTb3VuZHMuZ2V0KFwiYmdtXCIpO1xyXG5cclxuICAgICAgICAvLyBJbnB1dCBsaXN0ZW5lcnNcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGUua2V5IGFzIElucHV0S2V5O1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhJbnB1dEtleSkuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRTdGF0ZS5hZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCBkZWZhdWx0IGJyb3dzZXIgYWN0aW9ucyBmb3IgZ2FtZSBrZXlzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gZS5rZXkgYXMgSW5wdXRLZXk7XHJcbiAgICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKElucHV0S2V5KS5pbmNsdWRlcyhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFN0YXRlLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN0YXJ0IHRoZSBnYW1lIGxvb3BcclxuICAgICAgICBsYXN0RnJhbWVUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdhbWVMb29wKTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGdhbWU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBTdGFydCB0aGUgZ2FtZSBpbml0aWFsaXphdGlvbiB3aGVuIHRoZSB3aW5kb3cgbG9hZHNcclxud2luZG93Lm9ubG9hZCA9IGluaXQ7Il0sCiAgIm1hcHBpbmdzIjogIkFBQ0EsSUFBSyxZQUFMLGtCQUFLQSxlQUFMO0FBQ0ksRUFBQUEsc0JBQUE7QUFDQSxFQUFBQSxzQkFBQTtBQUNBLEVBQUFBLHNCQUFBO0FBSEMsU0FBQUE7QUFBQSxHQUFBO0FBTUwsSUFBSyxXQUFMLGtCQUFLQyxjQUFMO0FBQ0ksRUFBQUEsVUFBQSxnQkFBYTtBQUNiLEVBQUFB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
