let canvas;
let ctx;
let gameData;
const loadedImages = /* @__PURE__ */ new Map();
const loadedSounds = /* @__PURE__ */ new Map();
let gameState = "TITLE";
let player;
let bullets = [];
let enemies = [];
let score = 0;
let lastFrameTime = 0;
let enemySpawnTimer = 0;
const pressedKeys = /* @__PURE__ */ new Set();
async function loadAssets() {
  try {
    const response = await fetch("data.json");
    gameData = await response.json();
    const imagePromises = gameData.assets.images.map((imgData) => {
      return new Promise((resolve, reject) => {
        const img = new Image();
        img.src = imgData.path;
        img.onload = () => {
          loadedImages.set(imgData.name, img);
          resolve();
        };
        img.onerror = () => reject(`Failed to load image: ${imgData.path}`);
      });
    });
    const soundPromises = gameData.assets.sounds.map((soundData) => {
      return new Promise((resolve) => {
        const audio = new Audio(soundData.path);
        audio.volume = soundData.volume;
        audio.oncanplaythrough = () => {
          loadedSounds.set(soundData.name, audio);
          resolve();
        };
        audio.onerror = () => {
          console.warn(`Failed to load sound: ${soundData.path}`);
          loadedSounds.set(soundData.name, audio);
          resolve();
        };
        setTimeout(() => {
          if (!loadedSounds.has(soundData.name)) {
            console.warn(`Sound loading timeout for: ${soundData.path}. Proceeding.`);
            loadedSounds.set(soundData.name, audio);
            resolve();
          }
        }, 5e3);
      });
    });
    await Promise.all([...imagePromises, ...soundPromises]);
    console.log("All assets loaded.");
  } catch (error) {
    console.error("Error loading game data or assets:", error);
    alert("Failed to load game. Please check console for details.");
  }
}
function handleKeyDown(event) {
  pressedKeys.add(event.code);
  if (gameState === "TITLE" || gameState === "GAME_OVER") {
    startGame();
  }
}
function handleKeyUp(event) {
  pressedKeys.delete(event.code);
}
function initGame() {
  canvas = document.getElementById("gameCanvas");
  if (!canvas) {
    console.error('Canvas element with ID "gameCanvas" not found.');
    return;
  }
  ctx = canvas.getContext("2d");
  canvas.width = gameData.gameSettings.canvasWidth;
  canvas.height = gameData.gameSettings.canvasHeight;
  window.addEventListener("keydown", handleKeyDown);
  window.addEventListener("keyup", handleKeyUp);
  const bgm = loadedSounds.get("bgm");
  if (bgm) {
    bgm.loop = true;
    bgm.volume = gameData.assets.sounds.find((s) => s.name === "bgm")?.volume ?? 0.3;
  }
  requestAnimationFrame(gameLoop);
}
function resetGame() {
  player = {
    x: gameData.gameSettings.canvasWidth / 2 - gameData.gameSettings.player.width / 2,
    y: gameData.gameSettings.canvasHeight - gameData.gameSettings.player.height - 20,
    width: gameData.gameSettings.player.width,
    height: gameData.gameSettings.player.height,
    speed: gameData.gameSettings.player.speed,
    health: gameData.gameSettings.player.health,
    lastFireTime: 0,
    fireCooldown: gameData.gameSettings.player.fireCooldown
  };
  bullets = [];
  enemies = [];
  score = gameData.gameSettings.initialScore;
  enemySpawnTimer = gameData.gameSettings.enemySpawnInterval;
}
function startGame() {
  if (gameState === "TITLE" || gameState === "GAME_OVER") {
    resetGame();
    gameState = "PLAYING";
    const bgm = loadedSounds.get("bgm");
    if (bgm && bgm.paused) {
      bgm.play().catch((e) => console.error("BGM autoplay prevented (likely due to browser policy):", e));
    }
  }
}
function endGame() {
  gameState = "GAME_OVER";
  const bgm = loadedSounds.get("bgm");
  if (bgm) {
    bgm.pause();
    bgm.currentTime = 0;
  }
}
function gameLoop(currentTime) {
  const deltaTime = (currentTime - lastFrameTime) / 1e3;
  lastFrameTime = currentTime;
  update(deltaTime);
  draw();
  requestAnimationFrame(gameLoop);
}
function update(deltaTime) {
  switch (gameState) {
    case "TITLE":
      break;
    case "PLAYING":
      updatePlayingState(deltaTime);
      break;
    case "GAME_OVER":
      break;
  }
}
function updatePlayingState(deltaTime) {
  if (pressedKeys.has("ArrowLeft") || pressedKeys.has("KeyA")) {
    player.x -= player.speed * deltaTime;
  }
  if (pressedKeys.has("ArrowRight") || pressedKeys.has("KeyD")) {
    player.x += player.speed * deltaTime;
  }
  player.x = Math.max(0, Math.min(player.x, gameData.gameSettings.canvasWidth - player.width));
  const currentTimeInSeconds = lastFrameTime / 1e3;
  if ((pressedKeys.has("Space") || pressedKeys.has("KeyW") || pressedKeys.has("ArrowUp")) && currentTimeInSeconds - player.lastFireTime > player.fireCooldown) {
    bullets.push({
      x: player.x + player.width / 2 - gameData.gameSettings.bullet.width / 2,
      y: player.y,
      width: gameData.gameSettings.bullet.width,
      height: gameData.gameSettings.bullet.height,
      speed: gameData.gameSettings.bullet.speed,
      damage: gameData.gameSettings.bullet.damage
    });
    player.lastFireTime = currentTimeInSeconds;
    playSound("shoot");
  }
  bullets = bullets.filter((bullet) => {
    bullet.y -= bullet.speed * deltaTime;
    return bullet.y + bullet.height > 0;
  });
  enemySpawnTimer -= deltaTime;
  if (enemySpawnTimer <= 0) {
    enemies.push({
      x: Math.random() * (gameData.gameSettings.canvasWidth - gameData.gameSettings.enemy.width),
      y: -gameData.gameSettings.enemy.height,
      // Start above screen
      width: gameData.gameSettings.enemy.width,
      height: gameData.gameSettings.enemy.height,
      speed: Math.random() * (gameData.gameSettings.enemy.speedMax - gameData.gameSettings.enemy.speedMin) + gameData.gameSettings.enemy.speedMin,
      health: gameData.gameSettings.enemy.health,
      scoreValue: gameData.gameSettings.enemy.scoreValue
    });
    enemySpawnTimer = gameData.gameSettings.enemySpawnInterval;
  }
  enemies = enemies.filter((enemy) => {
    enemy.y += enemy.speed * deltaTime;
    return enemy.y < gameData.gameSettings.canvasHeight;
  });
  bullets.forEach((bullet, bIndex) => {
    enemies.forEach((enemy, eIndex) => {
      if (checkCollision(bullet, enemy)) {
        bullet.y = -100;
        enemy.health -= bullet.damage;
        if (enemy.health <= 0) {
          enemy.y = gameData.gameSettings.canvasHeight + 100;
          score += enemy.scoreValue;
          playSound("explosion");
        }
      }
    });
  });
  bullets = bullets.filter((bullet) => bullet.y !== -100);
  enemies = enemies.filter((enemy) => enemy.y !== gameData.gameSettings.canvasHeight + 100);
  enemies.forEach((enemy) => {
    if (checkCollision(player, enemy)) {
      player.health--;
      enemy.y = gameData.gameSettings.canvasHeight + 100;
      playSound("player_hit");
      if (player.health <= 0) {
        endGame();
      }
    }
  });
  enemies = enemies.filter((enemy) => enemy.y !== gameData.gameSettings.canvasHeight + 100);
}
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const backgroundImage = loadedImages.get("background");
  if (backgroundImage) {
    ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);
  } else {
    ctx.fillStyle = "#000000";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
  }
  switch (gameState) {
    case "TITLE":
      drawTextCentered(gameData.gameSettings.titleScreenText, canvas.height / 2);
      drawTextCentered("Press any key to start", canvas.height / 2 + gameData.gameSettings.fontSize);
      break;
    case "PLAYING":
      drawPlayingState();
      break;
    case "GAME_OVER":
      drawTextCentered(gameData.gameSettings.gameOverScreenText + score, canvas.height / 2 - 30);
      drawTextCentered(gameData.gameSettings.restartScreenText, canvas.height / 2 + 30);
      break;
  }
}
function drawPlayingState() {
  drawImage("player", player.x, player.y, player.width, player.height);
  bullets.forEach((bullet) => {
    drawImage("bullet", bullet.x, bullet.y, bullet.width, bullet.height);
  });
  enemies.forEach((enemy) => {
    drawImage("enemy", enemy.x, enemy.y, enemy.width, enemy.height);
  });
  ctx.fillStyle = gameData.gameSettings.textColor;
  ctx.font = `${gameData.gameSettings.fontSize / 2}px ${gameData.gameSettings.fontFamily}`;
  ctx.textAlign = "left";
  ctx.textBaseline = "top";
  ctx.fillText(`Score: ${score}`, 10, 10);
  ctx.fillText(`Health: ${player.health}`, 10, 10 + gameData.gameSettings.fontSize / 2 + 5);
}
function drawImage(imageName, x, y, width, height) {
  const img = loadedImages.get(imageName);
  if (img) {
    ctx.drawImage(img, x, y, width, height);
  } else {
    console.warn(`Image '${imageName}' not found.`);
    ctx.fillStyle = "red";
    ctx.fillRect(x, y, width, height);
  }
}
function playSound(soundName) {
  const audio = loadedSounds.get(soundName);
  if (audio) {
    const clonedAudio = audio.cloneNode();
    clonedAudio.volume = audio.volume;
    clonedAudio.play().catch((e) => console.warn(`Sound '${soundName}' playback prevented:`, e));
  } else {
    console.warn(`Sound '${soundName}' not found.`);
  }
}
function checkCollision(obj1, obj2) {
  return obj1.x < obj2.x + obj2.width && obj1.x + obj1.width > obj2.x && obj1.y < obj2.y + obj2.height && obj1.y + obj1.height > obj2.y;
}
function drawTextCentered(text, y) {
  ctx.fillStyle = gameData.gameSettings.textColor;
  ctx.font = `${gameData.gameSettings.fontSize}px ${gameData.gameSettings.fontFamily}`;
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText(text, canvas.width / 2, y);
  ctx.textAlign = "left";
  ctx.textBaseline = "alphabetic";
}
loadAssets().then(() => {
  initGame();
}).catch((err) => {
  console.error("Game failed to initialize:", err);
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiZ2FtZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gRGVmaW5lIGludGVyZmFjZXMgZm9yIGdhbWUgZW50aXRpZXMgYW5kIGRhdGEgc3RydWN0dXJlIGZvciB0eXBlIHNhZmV0eVxyXG5pbnRlcmZhY2UgR2FtZVNldHRpbmdzIHtcclxuICAgIGNhbnZhc1dpZHRoOiBudW1iZXI7XHJcbiAgICBjYW52YXNIZWlnaHQ6IG51bWJlcjtcclxuICAgIHBsYXllcjoge1xyXG4gICAgICAgIHNwZWVkOiBudW1iZXI7XHJcbiAgICAgICAgaGVhbHRoOiBudW1iZXI7XHJcbiAgICAgICAgd2lkdGg6IG51bWJlcjtcclxuICAgICAgICBoZWlnaHQ6IG51bWJlcjtcclxuICAgICAgICBmaXJlQ29vbGRvd246IG51bWJlcjtcclxuICAgIH07XHJcbiAgICBidWxsZXQ6IHtcclxuICAgICAgICBzcGVlZDogbnVtYmVyO1xyXG4gICAgICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICAgICAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICAgICAgZGFtYWdlOiBudW1iZXI7XHJcbiAgICB9O1xyXG4gICAgZW5lbXk6IHtcclxuICAgICAgICBzcGVlZE1pbjogbnVtYmVyO1xyXG4gICAgICAgIHNwZWVkTWF4OiBudW1iZXI7XHJcbiAgICAgICAgaGVhbHRoOiBudW1iZXI7XHJcbiAgICAgICAgd2lkdGg6IG51bWJlcjtcclxuICAgICAgICBoZWlnaHQ6IG51bWJlcjtcclxuICAgICAgICBzY29yZVZhbHVlOiBudW1iZXI7XHJcbiAgICB9O1xyXG4gICAgZW5lbXlTcGF3bkludGVydmFsOiBudW1iZXI7XHJcbiAgICBpbml0aWFsU2NvcmU6IG51bWJlcjtcclxuICAgIHRpdGxlU2NyZWVuVGV4dDogc3RyaW5nO1xyXG4gICAgZ2FtZU92ZXJTY3JlZW5UZXh0OiBzdHJpbmc7XHJcbiAgICByZXN0YXJ0U2NyZWVuVGV4dDogc3RyaW5nO1xyXG4gICAgZm9udEZhbWlseTogc3RyaW5nO1xyXG4gICAgZm9udFNpemU6IG51bWJlcjtcclxuICAgIHRleHRDb2xvcjogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSW1hZ2VEYXRhIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHBhdGg6IHN0cmluZztcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFNvdW5kRGF0YSB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwYXRoOiBzdHJpbmc7XHJcbiAgICBkdXJhdGlvbl9zZWNvbmRzOiBudW1iZXI7XHJcbiAgICB2b2x1bWU6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEdhbWVEYXRhIHtcclxuICAgIGFzc2V0czoge1xyXG4gICAgICAgIGltYWdlczogSW1hZ2VEYXRhW107XHJcbiAgICAgICAgc291bmRzOiBTb3VuZERhdGFbXTtcclxuICAgIH07XHJcbiAgICBnYW1lU2V0dGluZ3M6IEdhbWVTZXR0aW5ncztcclxufVxyXG5cclxuaW50ZXJmYWNlIFBsYXllciB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICBzcGVlZDogbnVtYmVyO1xyXG4gICAgaGVhbHRoOiBudW1iZXI7XHJcbiAgICBsYXN0RmlyZVRpbWU6IG51bWJlcjtcclxuICAgIGZpcmVDb29sZG93bjogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQnVsbGV0IHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxuICAgIHNwZWVkOiBudW1iZXI7XHJcbiAgICBkYW1hZ2U6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEVuZW15IHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxuICAgIHNwZWVkOiBudW1iZXI7XHJcbiAgICBoZWFsdGg6IG51bWJlcjtcclxuICAgIHNjb3JlVmFsdWU6IG51bWJlcjtcclxufVxyXG5cclxudHlwZSBHYW1lU3RhdGUgPSAnVElUTEUnIHwgJ1BMQVlJTkcnIHwgJ0dBTUVfT1ZFUic7XHJcblxyXG4vLyAtLS0gR2FtZSBHbG9iYWxzIC0tLVxyXG5sZXQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxubGV0IGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5sZXQgZ2FtZURhdGE6IEdhbWVEYXRhO1xyXG5jb25zdCBsb2FkZWRJbWFnZXMgPSBuZXcgTWFwPHN0cmluZywgSFRNTEltYWdlRWxlbWVudD4oKTtcclxuY29uc3QgbG9hZGVkU291bmRzID0gbmV3IE1hcDxzdHJpbmcsIEhUTUxBdWRpb0VsZW1lbnQ+KCk7XHJcblxyXG5sZXQgZ2FtZVN0YXRlOiBHYW1lU3RhdGUgPSAnVElUTEUnO1xyXG5sZXQgcGxheWVyOiBQbGF5ZXI7XHJcbmxldCBidWxsZXRzOiBCdWxsZXRbXSA9IFtdO1xyXG5sZXQgZW5lbWllczogRW5lbXlbXSA9IFtdO1xyXG5sZXQgc2NvcmU6IG51bWJlciA9IDA7XHJcbmxldCBsYXN0RnJhbWVUaW1lOiBET01IaWdoUmVzVGltZVN0YW1wID0gMDtcclxubGV0IGVuZW15U3Bhd25UaW1lcjogbnVtYmVyID0gMDtcclxuXHJcbmNvbnN0IHByZXNzZWRLZXlzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblxyXG4vLyAtLS0gQXNzZXQgTG9hZGluZyAtLS1cclxuYXN5bmMgZnVuY3Rpb24gbG9hZEFzc2V0cygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnZGF0YS5qc29uJyk7XHJcbiAgICAgICAgZ2FtZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGltYWdlUHJvbWlzZXMgPSBnYW1lRGF0YS5hc3NldHMuaW1hZ2VzLm1hcChpbWdEYXRhID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgaW1nLnNyYyA9IGltZ0RhdGEucGF0aDtcclxuICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkSW1hZ2VzLnNldChpbWdEYXRhLm5hbWUsIGltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGltZy5vbmVycm9yID0gKCkgPT4gcmVqZWN0KGBGYWlsZWQgdG8gbG9hZCBpbWFnZTogJHtpbWdEYXRhLnBhdGh9YCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBzb3VuZFByb21pc2VzID0gZ2FtZURhdGEuYXNzZXRzLnNvdW5kcy5tYXAoc291bmREYXRhID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhzb3VuZERhdGEucGF0aCk7XHJcbiAgICAgICAgICAgICAgICBhdWRpby52b2x1bWUgPSBzb3VuZERhdGEudm9sdW1lO1xyXG4gICAgICAgICAgICAgICAgYXVkaW8ub25jYW5wbGF5dGhyb3VnaCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkZWRTb3VuZHMuc2V0KHNvdW5kRGF0YS5uYW1lLCBhdWRpbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gbG9hZCBzb3VuZDogJHtzb3VuZERhdGEucGF0aH1gKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkZWRTb3VuZHMuc2V0KHNvdW5kRGF0YS5uYW1lLCBhdWRpbyk7IC8vIFN0aWxsIGFkZCBpdCwganVzdCBtaWdodCBub3QgcGxheVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgYSB0aW1lb3V0IHRvIHByZXZlbnQgaW5kZWZpbml0ZSBibG9ja2luZyBpZiBzb3VuZCBmYWlscyB0byBsb2FkIGV2ZW50XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWxvYWRlZFNvdW5kcy5oYXMoc291bmREYXRhLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgU291bmQgbG9hZGluZyB0aW1lb3V0IGZvcjogJHtzb3VuZERhdGEucGF0aH0uIFByb2NlZWRpbmcuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZFNvdW5kcy5zZXQoc291bmREYXRhLm5hbWUsIGF1ZGlvKTsgLy8gRW5zdXJlIGl0J3MgaW4gdGhlIG1hcCBldmVuIGlmIGZhaWxlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgNTAwMCk7IC8vIDUgc2Vjb25kIHRpbWVvdXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFsuLi5pbWFnZVByb21pc2VzLCAuLi5zb3VuZFByb21pc2VzXSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FsbCBhc3NldHMgbG9hZGVkLicpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGdhbWUgZGF0YSBvciBhc3NldHM6JywgZXJyb3IpO1xyXG4gICAgICAgIGFsZXJ0KCdGYWlsZWQgdG8gbG9hZCBnYW1lLiBQbGVhc2UgY2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIElucHV0IEhhbmRsaW5nIC0tLVxyXG5mdW5jdGlvbiBoYW5kbGVLZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICBwcmVzc2VkS2V5cy5hZGQoZXZlbnQuY29kZSk7XHJcbiAgICBpZiAoZ2FtZVN0YXRlID09PSAnVElUTEUnIHx8IGdhbWVTdGF0ZSA9PT0gJ0dBTUVfT1ZFUicpIHtcclxuICAgICAgICBzdGFydEdhbWUoKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgIHByZXNzZWRLZXlzLmRlbGV0ZShldmVudC5jb2RlKTtcclxufVxyXG5cclxuLy8gLS0tIEdhbWUgSW5pdGlhbGl6YXRpb24gJiBTdGF0ZSBNYW5hZ2VtZW50IC0tLVxyXG5mdW5jdGlvbiBpbml0R2FtZSgpOiB2b2lkIHtcclxuICAgIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lQ2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBpZiAoIWNhbnZhcykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhbnZhcyBlbGVtZW50IHdpdGggSUQgXCJnYW1lQ2FudmFzXCIgbm90IGZvdW5kLicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcclxuXHJcbiAgICBjYW52YXMud2lkdGggPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuY2FudmFzV2lkdGg7XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmNhbnZhc0hlaWdodDtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaGFuZGxlS2V5VXApO1xyXG5cclxuICAgIC8vIEluaXRpYWwgc2V0dXAgZm9yIEJHTVxyXG4gICAgY29uc3QgYmdtID0gbG9hZGVkU291bmRzLmdldCgnYmdtJyk7XHJcbiAgICBpZiAoYmdtKSB7XHJcbiAgICAgICAgYmdtLmxvb3AgPSB0cnVlO1xyXG4gICAgICAgIGJnbS52b2x1bWUgPSBnYW1lRGF0YS5hc3NldHMuc291bmRzLmZpbmQocyA9PiBzLm5hbWUgPT09ICdiZ20nKT8udm9sdW1lID8/IDAuMztcclxuICAgIH1cclxuXHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApOyAvLyBTdGFydCB0aGUgZ2FtZSBsb29wXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0R2FtZSgpOiB2b2lkIHtcclxuICAgIHBsYXllciA9IHtcclxuICAgICAgICB4OiBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuY2FudmFzV2lkdGggLyAyIC0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnBsYXllci53aWR0aCAvIDIsXHJcbiAgICAgICAgeTogZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmNhbnZhc0hlaWdodCAtIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5wbGF5ZXIuaGVpZ2h0IC0gMjAsXHJcbiAgICAgICAgd2lkdGg6IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5wbGF5ZXIud2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiBnYW1lRGF0YS5nYW1lU2V0dGluZ3MucGxheWVyLmhlaWdodCxcclxuICAgICAgICBzcGVlZDogZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnBsYXllci5zcGVlZCxcclxuICAgICAgICBoZWFsdGg6IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5wbGF5ZXIuaGVhbHRoLFxyXG4gICAgICAgIGxhc3RGaXJlVGltZTogMCxcclxuICAgICAgICBmaXJlQ29vbGRvd246IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5wbGF5ZXIuZmlyZUNvb2xkb3duXHJcbiAgICB9O1xyXG4gICAgYnVsbGV0cyA9IFtdO1xyXG4gICAgZW5lbWllcyA9IFtdO1xyXG4gICAgc2NvcmUgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuaW5pdGlhbFNjb3JlO1xyXG4gICAgZW5lbXlTcGF3blRpbWVyID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmVuZW15U3Bhd25JbnRlcnZhbDtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnRHYW1lKCk6IHZvaWQge1xyXG4gICAgaWYgKGdhbWVTdGF0ZSA9PT0gJ1RJVExFJyB8fCBnYW1lU3RhdGUgPT09ICdHQU1FX09WRVInKSB7XHJcbiAgICAgICAgcmVzZXRHYW1lKCk7XHJcbiAgICAgICAgZ2FtZVN0YXRlID0gJ1BMQVlJTkcnO1xyXG4gICAgICAgIC8vIFN0YXJ0IEJHTSBpZiBub3QgYWxyZWFkeSBwbGF5aW5nIG9yIHBhdXNlZFxyXG4gICAgICAgIGNvbnN0IGJnbSA9IGxvYWRlZFNvdW5kcy5nZXQoJ2JnbScpO1xyXG4gICAgICAgIGlmIChiZ20gJiYgYmdtLnBhdXNlZCkge1xyXG4gICAgICAgICAgICBiZ20ucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihcIkJHTSBhdXRvcGxheSBwcmV2ZW50ZWQgKGxpa2VseSBkdWUgdG8gYnJvd3NlciBwb2xpY3kpOlwiLCBlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBlbmRHYW1lKCk6IHZvaWQge1xyXG4gICAgZ2FtZVN0YXRlID0gJ0dBTUVfT1ZFUic7XHJcbiAgICBjb25zdCBiZ20gPSBsb2FkZWRTb3VuZHMuZ2V0KCdiZ20nKTtcclxuICAgIGlmIChiZ20pIHtcclxuICAgICAgICBiZ20ucGF1c2UoKTtcclxuICAgICAgICBiZ20uY3VycmVudFRpbWUgPSAwOyAvLyBSZXdpbmQgQkdNXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBHYW1lIExvb3AgLS0tXHJcbmZ1bmN0aW9uIGdhbWVMb29wKGN1cnJlbnRUaW1lOiBET01IaWdoUmVzVGltZVN0YW1wKTogdm9pZCB7XHJcbiAgICBjb25zdCBkZWx0YVRpbWUgPSAoY3VycmVudFRpbWUgLSBsYXN0RnJhbWVUaW1lKSAvIDEwMDA7IC8vIENvbnZlcnQgbXMgdG8gc2Vjb25kc1xyXG4gICAgbGFzdEZyYW1lVGltZSA9IGN1cnJlbnRUaW1lO1xyXG5cclxuICAgIHVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgZHJhdygpO1xyXG5cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XHJcbn1cclxuXHJcbi8vIC0tLSBVcGRhdGUgR2FtZSBTdGF0ZSAtLS1cclxuZnVuY3Rpb24gdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBzd2l0Y2ggKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIGNhc2UgJ1RJVExFJzpcclxuICAgICAgICAgICAgLy8gTm8gdXBkYXRlcywganVzdCB3YWl0aW5nIGZvciBpbnB1dFxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdQTEFZSU5HJzpcclxuICAgICAgICAgICAgdXBkYXRlUGxheWluZ1N0YXRlKGRlbHRhVGltZSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0dBTUVfT1ZFUic6XHJcbiAgICAgICAgICAgIC8vIE5vIHVwZGF0ZXMsIGp1c3Qgd2FpdGluZyBmb3IgaW5wdXQgdG8gcmVzdGFydFxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUGxheWluZ1N0YXRlKGRlbHRhVGltZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAvLyBQbGF5ZXIgbW92ZW1lbnRcclxuICAgIGlmIChwcmVzc2VkS2V5cy5oYXMoJ0Fycm93TGVmdCcpIHx8IHByZXNzZWRLZXlzLmhhcygnS2V5QScpKSB7XHJcbiAgICAgICAgcGxheWVyLnggLT0gcGxheWVyLnNwZWVkICogZGVsdGFUaW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKHByZXNzZWRLZXlzLmhhcygnQXJyb3dSaWdodCcpIHx8IHByZXNzZWRLZXlzLmhhcygnS2V5RCcpKSB7XHJcbiAgICAgICAgcGxheWVyLnggKz0gcGxheWVyLnNwZWVkICogZGVsdGFUaW1lO1xyXG4gICAgfVxyXG4gICAgLy8gQ2xhbXAgcGxheWVyIHBvc2l0aW9uXHJcbiAgICBwbGF5ZXIueCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHBsYXllci54LCBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuY2FudmFzV2lkdGggLSBwbGF5ZXIud2lkdGgpKTtcclxuXHJcbiAgICAvLyBQbGF5ZXIgc2hvb3RpbmdcclxuICAgIGNvbnN0IGN1cnJlbnRUaW1lSW5TZWNvbmRzID0gbGFzdEZyYW1lVGltZSAvIDEwMDA7XHJcbiAgICBpZiAoKHByZXNzZWRLZXlzLmhhcygnU3BhY2UnKSB8fCBwcmVzc2VkS2V5cy5oYXMoJ0tleVcnKSB8fCBwcmVzc2VkS2V5cy5oYXMoJ0Fycm93VXAnKSkgJiYgKGN1cnJlbnRUaW1lSW5TZWNvbmRzIC0gcGxheWVyLmxhc3RGaXJlVGltZSA+IHBsYXllci5maXJlQ29vbGRvd24pKSB7XHJcbiAgICAgICAgYnVsbGV0cy5wdXNoKHtcclxuICAgICAgICAgICAgeDogcGxheWVyLnggKyBwbGF5ZXIud2lkdGggLyAyIC0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmJ1bGxldC53aWR0aCAvIDIsXHJcbiAgICAgICAgICAgIHk6IHBsYXllci55LFxyXG4gICAgICAgICAgICB3aWR0aDogZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmJ1bGxldC53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuYnVsbGV0LmhlaWdodCxcclxuICAgICAgICAgICAgc3BlZWQ6IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5idWxsZXQuc3BlZWQsXHJcbiAgICAgICAgICAgIGRhbWFnZTogZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmJ1bGxldC5kYW1hZ2VcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIubGFzdEZpcmVUaW1lID0gY3VycmVudFRpbWVJblNlY29uZHM7XHJcbiAgICAgICAgcGxheVNvdW5kKCdzaG9vdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBidWxsZXRzXHJcbiAgICBidWxsZXRzID0gYnVsbGV0cy5maWx0ZXIoYnVsbGV0ID0+IHtcclxuICAgICAgICBidWxsZXQueSAtPSBidWxsZXQuc3BlZWQgKiBkZWx0YVRpbWU7XHJcbiAgICAgICAgcmV0dXJuIGJ1bGxldC55ICsgYnVsbGV0LmhlaWdodCA+IDA7IC8vIEtlZXAgYnVsbGV0cyBvbiBzY3JlZW5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNwYXduIGVuZW1pZXNcclxuICAgIGVuZW15U3Bhd25UaW1lciAtPSBkZWx0YVRpbWU7XHJcbiAgICBpZiAoZW5lbXlTcGF3blRpbWVyIDw9IDApIHtcclxuICAgICAgICBlbmVtaWVzLnB1c2goe1xyXG4gICAgICAgICAgICB4OiBNYXRoLnJhbmRvbSgpICogKGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5jYW52YXNXaWR0aCAtIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5lbmVteS53aWR0aCksXHJcbiAgICAgICAgICAgIHk6IC1nYW1lRGF0YS5nYW1lU2V0dGluZ3MuZW5lbXkuaGVpZ2h0LCAvLyBTdGFydCBhYm92ZSBzY3JlZW5cclxuICAgICAgICAgICAgd2lkdGg6IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5lbmVteS53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZW5lbXkuaGVpZ2h0LFxyXG4gICAgICAgICAgICBzcGVlZDogTWF0aC5yYW5kb20oKSAqIChnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZW5lbXkuc3BlZWRNYXggLSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZW5lbXkuc3BlZWRNaW4pICsgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmVuZW15LnNwZWVkTWluLFxyXG4gICAgICAgICAgICBoZWFsdGg6IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5lbmVteS5oZWFsdGgsXHJcbiAgICAgICAgICAgIHNjb3JlVmFsdWU6IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5lbmVteS5zY29yZVZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZW5lbXlTcGF3blRpbWVyID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmVuZW15U3Bhd25JbnRlcnZhbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgZW5lbWllc1xyXG4gICAgZW5lbWllcyA9IGVuZW1pZXMuZmlsdGVyKGVuZW15ID0+IHtcclxuICAgICAgICBlbmVteS55ICs9IGVuZW15LnNwZWVkICogZGVsdGFUaW1lO1xyXG4gICAgICAgIHJldHVybiBlbmVteS55IDwgZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmNhbnZhc0hlaWdodDsgLy8gS2VlcCBlbmVtaWVzIG9uIHNjcmVlblxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ29sbGlzaW9uIGRldGVjdGlvbjogQnVsbGV0IHZzIEVuZW15XHJcbiAgICBidWxsZXRzLmZvckVhY2goKGJ1bGxldCwgYkluZGV4KSA9PiB7XHJcbiAgICAgICAgZW5lbWllcy5mb3JFYWNoKChlbmVteSwgZUluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjaGVja0NvbGxpc2lvbihidWxsZXQsIGVuZW15KSkge1xyXG4gICAgICAgICAgICAgICAgYnVsbGV0LnkgPSAtMTAwOyAvLyBNYXJrIGJ1bGxldCBmb3IgcmVtb3ZhbFxyXG4gICAgICAgICAgICAgICAgZW5lbXkuaGVhbHRoIC09IGJ1bGxldC5kYW1hZ2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5lbXkuaGVhbHRoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmVteS55ID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmNhbnZhc0hlaWdodCArIDEwMDsgLy8gTWFyayBlbmVteSBmb3IgcmVtb3ZhbFxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlICs9IGVuZW15LnNjb3JlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheVNvdW5kKCdleHBsb3Npb24nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBidWxsZXRzID0gYnVsbGV0cy5maWx0ZXIoYnVsbGV0ID0+IGJ1bGxldC55ICE9PSAtMTAwKTtcclxuICAgIGVuZW1pZXMgPSBlbmVtaWVzLmZpbHRlcihlbmVteSA9PiBlbmVteS55ICE9PSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuY2FudmFzSGVpZ2h0ICsgMTAwKTtcclxuXHJcbiAgICAvLyBDb2xsaXNpb24gZGV0ZWN0aW9uOiBQbGF5ZXIgdnMgRW5lbXlcclxuICAgIGVuZW1pZXMuZm9yRWFjaChlbmVteSA9PiB7XHJcbiAgICAgICAgaWYgKGNoZWNrQ29sbGlzaW9uKHBsYXllciwgZW5lbXkpKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5oZWFsdGgtLTtcclxuICAgICAgICAgICAgZW5lbXkueSA9IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5jYW52YXNIZWlnaHQgKyAxMDA7IC8vIE1hcmsgZW5lbXkgZm9yIHJlbW92YWxcclxuICAgICAgICAgICAgcGxheVNvdW5kKCdwbGF5ZXJfaGl0Jyk7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaGVhbHRoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGVuZEdhbWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgZW5lbWllcyA9IGVuZW1pZXMuZmlsdGVyKGVuZW15ID0+IGVuZW15LnkgIT09IGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5jYW52YXNIZWlnaHQgKyAxMDApO1xyXG59XHJcblxyXG4vLyAtLS0gRHJhd2luZyAtLS1cclxuZnVuY3Rpb24gZHJhdygpOiB2b2lkIHtcclxuICAgIC8vIENsZWFyIGNhbnZhc1xyXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgIC8vIERyYXcgYmFja2dyb3VuZCAoaWYgcHJlc2VudClcclxuICAgIGNvbnN0IGJhY2tncm91bmRJbWFnZSA9IGxvYWRlZEltYWdlcy5nZXQoJ2JhY2tncm91bmQnKTtcclxuICAgIGlmIChiYWNrZ3JvdW5kSW1hZ2UpIHtcclxuICAgICAgICBjdHguZHJhd0ltYWdlKGJhY2tncm91bmRJbWFnZSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwMDAwJzsgLy8gRGVmYXVsdCBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3dpdGNoIChnYW1lU3RhdGUpIHtcclxuICAgICAgICBjYXNlICdUSVRMRSc6XHJcbiAgICAgICAgICAgIGRyYXdUZXh0Q2VudGVyZWQoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnRpdGxlU2NyZWVuVGV4dCwgY2FudmFzLmhlaWdodCAvIDIpO1xyXG4gICAgICAgICAgICBkcmF3VGV4dENlbnRlcmVkKFwiUHJlc3MgYW55IGtleSB0byBzdGFydFwiLCBjYW52YXMuaGVpZ2h0IC8gMiArIGdhbWVEYXRhLmdhbWVTZXR0aW5ncy5mb250U2l6ZSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ1BMQVlJTkcnOlxyXG4gICAgICAgICAgICBkcmF3UGxheWluZ1N0YXRlKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0dBTUVfT1ZFUic6XHJcbiAgICAgICAgICAgIGRyYXdUZXh0Q2VudGVyZWQoZ2FtZURhdGEuZ2FtZVNldHRpbmdzLmdhbWVPdmVyU2NyZWVuVGV4dCArIHNjb3JlLCBjYW52YXMuaGVpZ2h0IC8gMiAtIDMwKTtcclxuICAgICAgICAgICAgZHJhd1RleHRDZW50ZXJlZChnYW1lRGF0YS5nYW1lU2V0dGluZ3MucmVzdGFydFNjcmVlblRleHQsIGNhbnZhcy5oZWlnaHQgLyAyICsgMzApO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1BsYXlpbmdTdGF0ZSgpOiB2b2lkIHtcclxuICAgIC8vIERyYXcgcGxheWVyXHJcbiAgICBkcmF3SW1hZ2UoJ3BsYXllcicsIHBsYXllci54LCBwbGF5ZXIueSwgcGxheWVyLndpZHRoLCBwbGF5ZXIuaGVpZ2h0KTtcclxuXHJcbiAgICAvLyBEcmF3IGJ1bGxldHNcclxuICAgIGJ1bGxldHMuZm9yRWFjaChidWxsZXQgPT4ge1xyXG4gICAgICAgIGRyYXdJbWFnZSgnYnVsbGV0JywgYnVsbGV0LngsIGJ1bGxldC55LCBidWxsZXQud2lkdGgsIGJ1bGxldC5oZWlnaHQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRHJhdyBlbmVtaWVzXHJcbiAgICBlbmVtaWVzLmZvckVhY2goZW5lbXkgPT4ge1xyXG4gICAgICAgIGRyYXdJbWFnZSgnZW5lbXknLCBlbmVteS54LCBlbmVteS55LCBlbmVteS53aWR0aCwgZW5lbXkuaGVpZ2h0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIERyYXcgVUkgKFNjb3JlIGFuZCBIZWFsdGgpXHJcbiAgICBjdHguZmlsbFN0eWxlID0gZ2FtZURhdGEuZ2FtZVNldHRpbmdzLnRleHRDb2xvcjtcclxuICAgIGN0eC5mb250ID0gYCR7Z2FtZURhdGEuZ2FtZVNldHRpbmdzLmZvbnRTaXplIC8gMn1weCAke2dhbWVEYXRhLmdhbWVTZXR0aW5ncy5mb250RmFtaWx5fWA7XHJcbiAgICBjdHgudGV4dEFsaWduID0gJ2xlZnQnO1xyXG4gICAgY3R4LnRleHRCYXNlbGluZSA9ICd0b3AnO1xyXG4gICAgY3R4LmZpbGxUZXh0KGBTY29yZTogJHtzY29yZX1gLCAxMCwgMTApO1xyXG4gICAgY3R4LmZpbGxUZXh0KGBIZWFsdGg6ICR7cGxheWVyLmhlYWx0aH1gLCAxMCwgMTAgKyBnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udFNpemUgLyAyICsgNSk7XHJcbn1cclxuXHJcblxyXG4vLyAtLS0gSGVscGVyIEZ1bmN0aW9ucyAtLS1cclxuZnVuY3Rpb24gZHJhd0ltYWdlKGltYWdlTmFtZTogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IGltZyA9IGxvYWRlZEltYWdlcy5nZXQoaW1hZ2VOYW1lKTtcclxuICAgIGlmIChpbWcpIHtcclxuICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgSW1hZ2UgJyR7aW1hZ2VOYW1lfScgbm90IGZvdW5kLmApO1xyXG4gICAgICAgIC8vIEZhbGxiYWNrOiBkcmF3IGEgY29sb3JlZCByZWN0YW5nbGUgaWYgaW1hZ2Ugbm90IGxvYWRlZFxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmVkJztcclxuICAgICAgICBjdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBsYXlTb3VuZChzb3VuZE5hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgYXVkaW8gPSBsb2FkZWRTb3VuZHMuZ2V0KHNvdW5kTmFtZSk7XHJcbiAgICBpZiAoYXVkaW8pIHtcclxuICAgICAgICAvLyBUbyBwbGF5IG11bHRpcGxlIGluc3RhbmNlcyBvZiBhIHNvdW5kLCB3ZSBuZWVkIHRvIGNsb25lIGl0XHJcbiAgICAgICAgY29uc3QgY2xvbmVkQXVkaW8gPSBhdWRpby5jbG9uZU5vZGUoKSBhcyBIVE1MQXVkaW9FbGVtZW50O1xyXG4gICAgICAgIGNsb25lZEF1ZGlvLnZvbHVtZSA9IGF1ZGlvLnZvbHVtZTsgLy8gS2VlcCBvcmlnaW5hbCB2b2x1bWVcclxuICAgICAgICBjbG9uZWRBdWRpby5wbGF5KCkuY2F0Y2goZSA9PiBjb25zb2xlLndhcm4oYFNvdW5kICcke3NvdW5kTmFtZX0nIHBsYXliYWNrIHByZXZlbnRlZDpgLCBlKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgU291bmQgJyR7c291bmROYW1lfScgbm90IGZvdW5kLmApO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0NvbGxpc2lvbihvYmoxOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlcjsgfSwgb2JqMjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXI7IH0pOiBib29sZWFuIHtcclxuICAgIHJldHVybiBvYmoxLnggPCBvYmoyLnggKyBvYmoyLndpZHRoICYmXHJcbiAgICAgICAgICAgb2JqMS54ICsgb2JqMS53aWR0aCA+IG9iajIueCAmJlxyXG4gICAgICAgICAgIG9iajEueSA8IG9iajIueSArIG9iajIuaGVpZ2h0ICYmXHJcbiAgICAgICAgICAgb2JqMS55ICsgb2JqMS5oZWlnaHQgPiBvYmoyLnk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdUZXh0Q2VudGVyZWQodGV4dDogc3RyaW5nLCB5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGN0eC5maWxsU3R5bGUgPSBnYW1lRGF0YS5nYW1lU2V0dGluZ3MudGV4dENvbG9yO1xyXG4gICAgY3R4LmZvbnQgPSBgJHtnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udFNpemV9cHggJHtnYW1lRGF0YS5nYW1lU2V0dGluZ3MuZm9udEZhbWlseX1gO1xyXG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xyXG4gICAgY3R4LmZpbGxUZXh0KHRleHQsIGNhbnZhcy53aWR0aCAvIDIsIHkpO1xyXG4gICAgY3R4LnRleHRBbGlnbiA9ICdsZWZ0JzsgLy8gUmVzZXQgZm9yIG90aGVyIHRleHQgZHJhd2luZ1xyXG4gICAgY3R4LnRleHRCYXNlbGluZSA9ICdhbHBoYWJldGljJzsgLy8gUmVzZXRcclxufVxyXG5cclxuLy8gLS0tIEVudHJ5IFBvaW50IC0tLVxyXG4vLyBMb2FkIGFzc2V0cywgdGhlbiBpbml0aWFsaXplIGFuZCBzdGFydCB0aGUgZ2FtZSBsb29wXHJcbmxvYWRBc3NldHMoKS50aGVuKCgpID0+IHtcclxuICAgIGluaXRHYW1lKCk7XHJcbn0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiR2FtZSBmYWlsZWQgdG8gaW5pdGlhbGl6ZTpcIiwgZXJyKTtcclxufSk7Il0sCiAgIm1hcHBpbmdzIjogIkFBMEZBLElBQUk7QUFDSixJQUFJO0FBQ0osSUFBSTtBQUNKLE1BQU0sZUFBZSxvQkFBSSxJQUE4QjtBQUN2RCxNQUFNLGVBQWUsb0JBQUksSUFBOEI7QUFFdkQsSUFBSSxZQUF1QjtBQUMzQixJQUFJO0FBQ0osSUFBSSxVQUFvQixDQUFDO0FBQ3pCLElBQUksVUFBbUIsQ0FBQztBQUN4QixJQUFJLFFBQWdCO0FBQ3BCLElBQUksZ0JBQXFDO0FBQ3pDLElBQUksa0JBQTBCO0FBRTlCLE1BQU0sY0FBYyxvQkFBSSxJQUFZO0FBR3BDLGVBQWUsYUFBNEI7QUFDdkMsTUFBSTtBQUNBLFVBQU0sV0FBVyxNQUFNLE1BQU0sV0FBVztBQUN4QyxlQUFXLE1B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
