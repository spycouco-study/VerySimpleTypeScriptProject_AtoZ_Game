{
    "chat": [
        {
            "from": "user",
            "text": "게임 프로토타입 사양서 (뱀 게임)\n1. 게임 화면 설정\n화면 크기: 가로 20칸, 세로 20칸의 격자형 화면으로 구성됩니다. 각 칸은 뱀이나 먹이의 한 부분을 나타냅니다.\n칸(블록) 크기: 각 칸은 25x25 픽셀 크기로 표시됩니다.\n배경 색상: 게임 화면의 배경은 어두운 회색으로 설정됩니다.\n2. 뱀의 움직임 및 상호작용\n뱀의 외형: 뱀의 머리 부분은 빨간색으로, 몸통 부분은 초록색으로 표시됩니다.\n벽 충돌: 뱀이 게임 화면의 가장자리에 부딪히면 게임이 종료됩니다.\n초기 길이: 뱀은 게임 시작 시 몸통 3칸의 길이로 시작합니다.\n이동 속도: 뱀은 보통 빠르기(예: 약 150ms 간격으로 한 칸씩 이동)로 움직입니다.\n자기 몸통 충돌: 뱀이 자신의 몸통에 부딪히면 게임이 종료됩니다.\n180도 방향 전환 제한: 뱀이 현재 이동하는 방향의 정반대 방향으로는 즉시 방향을 전환할 수 없습니다 (예: 오른쪽으로 이동 중일 때 즉시 왼쪽으로 방향 전환 불가).\n조작 방법: 키보드의 화살표 키(↑, ↓, ←, →)를 사용하여 뱀의 이동 방향을 조종합니다.\n3. 먹이 시스템\n먹이 외형: 먹이는 빨간색 사각형 모양으로 표시됩니다.\n먹이 생성: 한 번에 1개의 먹이가 게임 화면 내 무작위 위치에 나타납니다. 먹이는 뱀의 몸통이나 다른 먹이와 겹치지 않는 곳에 생성되어야 합니다.\n먹이 섭취 효과: 뱀이 먹이를 먹으면 뱀의 길이가 1칸 길어지고, 점수가 증가합니다.\n4. 점수 시스템\n점수 계산: 뱀이 먹이를 먹을 때마다 10점씩 점수가 증가합니다.\n점수 표시: 현재 점수는 게임 화면의 왼쪽 위에 표시됩니다.\n5. 게임 시작, 종료 및 재시작\n게임 시작 흐름: 웹 페이지 로딩 후 '게임을 시작하려면 엔터 키를 누르세요' 메시지가 화면 중앙에 표시되며, 사용자가 Enter 키를 누르면 게임이 시작됩니다.\n게임 종료 조건: 뱀이 벽에 부딪히거나 자신의 몸통에 부딪히면 게임이 종료됩니다.\n게임 종료 표시: 게임 종료 시 화면 중앙에 '게임 오버' 메시지가 표시됩니다.\n재시작: 게임 종료 후, 사용자는 'R' 키를 눌러 게임을 다시 시작할 수 있습니다.\n일시 정지 기능: 게임 플레이 중 'P' 키를 누르면 게임이 일시 정지되며, 다시 'P' 키를 누르면 게임이 이어서 진행됩니다. 일시 정지 상태에서는 화면 중앙에 'PAUSE' 메시지가 표시됩니다."
        },
        {
            "from": "bot",
            "text": "< game.ts : 수정 O >\n< data.json : 수정 O >\n요청하신 뱀 게임 프로토타입 사양에 맞춰 `game.ts`와 `data.json` 파일을 생성했습니다.\n\n**`game.ts` 주요 구현 사항:**\n-   **단일 파일 로직**: 게임의 모든 핵심 로직(규칙, 물리 처리, 입력 처리)이 `game.ts` 파일 하나에 구현되어 있습니다.\n-   **데이터 기반 설정**: `data.json` 파일에서 게임 설정(`gameSettings`)과 에셋(`assets`) 정보를 불러와 게임을 초기화합니다.\n-   **캔버스 렌더링**: HTML `<canvas id=\"gameCanvas\">` 요소에 게임 화면을 그립니다.\n-   **에셋 로딩 및 스케일링**: `assets` 폴더에서 이미지(`png`)와 사운드(`mp3`) 파일을 비동기적으로 로드합니다. 이미지 로드 실패 시, `data.json`에 정의된 색상으로 대체하여 그립니다. 이미지 크기와 관계없이 `cellSize`에 맞춰 스케일링하여 그려집니다.\n-   **게임 상태 관리**: `START_SCREEN`, `PLAYING`, `PAUSED`, `GAME_OVER` 네 가지 상태로 게임 흐름을 제어합니다.\n-   **뱀 로직**:\n    -   초기 길이, 색상(머리/몸통), 이동 속도, 180도 방향 전환 제한 등을 구현했습니다.\n    -   벽 또는 자기 몸통 충돌 시 게임이 종료됩니다.\n    -   화살표 키로 조작하며, 다음 이동 시점에 방향이 적용됩니다.\n-   **먹이 시스템**:\n    -   뱀의 몸통과 겹치지 않는 무작위 위치에 1개의 먹이를 생성합니다.\n    -   먹이 섭취 시 뱀 길이 증가, 점수 증가, 효과음 재생 기능이 구현되어 있습니다.\n-   **점수 시스템**: 먹이 섭취 시 10점씩 증가하며, 화면 좌측 상단에 표시됩니다.\n-   **게임 흐름**:\n    -   **시작**: 엔터 키 입력 시 게임 시작 및 배경 음악 재생.\n    -   **일시 정지**: 'P' 키로 일시 정지/재개 토글, 일시 정지 시 'PAUSE' 메시지 표시 및 배경 음악 정지.\n    -   **종료**: 게임 오버 조건 충족 시 'GAME OVER' 메시지 표시 및 게임 오버 효과음 재생.\n    -   **재시작**: 게임 오버 후 'R' 키 입력 시 게임 초기화 및 재시작.\n-   **게임 루프**: `setInterval`을 통해 고정된 간격(`movementIntervalMs`)으로 게임 로직을 업데이트하고, `requestAnimationFrame`을 통해 부드러운 화면 렌더링을 처리합니다.\n\n**`data.json` 주요 구현 사항:**\n-   **모든 설정 데이터**: 게임 화면 크기, 색상, 뱀의 속성, 점수 규칙, 메시지 등 게임에 필요한 모든 설정 값을 포함합니다.\n-   **에셋 정보**: 로드해야 할 이미지와 사운드 파일의 이름, 경로, 기본 크기(이미지), 재생 시간 및 볼륨(사운드) 정보를 정의하여 `AssetManager`가 사용하도록 했습니다.\n\n**사용 방법:**\n1.  HTML 파일에 `<canvas id=\"gameCanvas\"></canvas>` 요소를 추가합니다.\n2.  생성된 `game.ts` 파일을 HTML에 스크립트로 포함합니다 (예: `<script src=\"game.ts\"></script>`).\n3.  `data.json` 파일을 `game.ts`와 같은 경로에 배치합니다.\n4.  `assets` 폴더를 생성하고, `data.json`에 명시된 `snake_head.png`, `snake_body.png`, `food.png`, `eat_food.mp3`, `game_over.mp3`, `bgm.mp3` 파일을 해당 폴더 안에 준비합니다. (이미지가 없어도 기본 색상으로 그려집니다.)"
        }
    ]
}